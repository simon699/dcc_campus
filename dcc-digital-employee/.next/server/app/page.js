(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3240:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c}),r(5480),r(4763),r(5866);var n=r(3191),s=r(8716),a=r(7922),i=r.n(a),o=r(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5480)),"/Users/wedo/Documents/product/DCC数字员工/V1.0/dcc-digital-employee/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,4763)),"/Users/wedo/Documents/product/DCC数字员工/V1.0/dcc-digital-employee/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/wedo/Documents/product/DCC数字员工/V1.0/dcc-digital-employee/src/app/page.tsx"],u="/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6340:(e,t,r)=>{Promise.resolve().then(r.bind(r,4060))},8472:()=>{},1596:(e,t,r)=>{"use strict";r(8472);var n=r(7577),s=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(n),a="undefined"!=typeof process&&process.env&&!0,i=function(e){return"[object String]"===Object.prototype.toString.call(e)},o=function(){function e(e){var t=void 0===e?{}:e,r=t.name,n=void 0===r?"stylesheet":r,s=t.optimizeForSpeed,o=void 0===s?a:s;l(i(n),"`name` must be a string"),this._name=n,this._deletedRulePlaceholder="#"+n+"-deleted-rule____{}",l("boolean"==typeof o,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=o,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0,this._nonce=null}var t=e.prototype;return t.setOptimizeForSpeed=function(e){l("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),l(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},t.isOptimizeForSpeed=function(){return this._optimizeForSpeed},t.inject=function(){var e=this;l(!this._injected,"sheet already injected"),this._injected=!0,this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},t.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},t.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},t.insertRule=function(e,t){return l(i(e),"`insertRule` accepts only strings"),"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++},t.replaceRule=function(e,t){this._optimizeForSpeed;var r=this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(n){a||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}return e},t.deleteRule=function(e){this._serverSheet.deleteRule(e)},t.flush=function(){this._injected=!1,this._rulesCount=0,this._serverSheet.cssRules=[]},t.cssRules=function(){return this._serverSheet.cssRules},t.makeStyleTag=function(e,t,r){t&&l(i(t),"makeStyleTag accepts only strings as second parameter");var n=document.createElement("style");this._nonce&&n.setAttribute("nonce",this._nonce),n.type="text/css",n.setAttribute("data-"+e,""),t&&n.appendChild(document.createTextNode(t));var s=document.head||document.getElementsByTagName("head")[0];return r?s.insertBefore(n,r):s.appendChild(n),n},function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),e}();function l(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var c=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},d={};function u(e,t){if(!t)return"jsx-"+e;var r=String(t),n=e+r;return d[n]||(d[n]="jsx-"+c(e+"-"+r)),d[n]}function p(e,t){var r=e+(t=t.replace(/\/style/gi,"\\/style"));return d[r]||(d[r]=t.replace(/__jsx-style-dynamic-selector/g,e)),d[r]}var h=n.createContext(null);h.displayName="StyleSheetContext",s.default.useInsertionEffect||s.default.useLayoutEffect;var m=void 0;function x(e){var t=m||n.useContext(h);return t&&t.add(e),null}x.dynamic=function(e){return e.map(function(e){return u(e[0],e[1])}).join(" ")},t.style=x},7626:(e,t,r)=>{"use strict";e.exports=r(1596).style},4060:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>sz});var n,s,a,i=r(326),o=r(7626),l=r.n(o),c=r(7577),d=r.t(c,2),u=r.n(c),p=r(5047),h=r(4591),m=r(1471);function x({isOpen:e,onClose:t,onConfirm:r,dccUser:n}){let[s,a]=(0,c.useState)(!1),o=async()=>{a(!0);try{await r()}finally{a(!1)}};return e?i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl p-6 shadow-2xl max-w-md w-full mx-4",children:[(0,i.jsxs)("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("svg",{className:"w-8 h-8 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),i.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"确认解绑DCC账号"}),(0,i.jsxs)("p",{className:"text-gray-300 text-sm",children:["您确定要解绑DCC账号 ",i.jsx("span",{className:"font-medium text-blue-300",children:n})," 吗？"]}),i.jsx("p",{className:"text-gray-400 text-xs mt-2",children:"解绑后，您需要重新绑定DCC账号才能使用系统功能。"})]}),(0,i.jsxs)("div",{className:"flex space-x-3",children:[i.jsx("button",{onClick:t,disabled:s,className:"flex-1 py-2 px-4 bg-gray-600/50 hover:bg-gray-500/50 text-white font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500/50 disabled:opacity-50 disabled:cursor-not-allowed",children:"取消"}),i.jsx("button",{onClick:o,disabled:s,className:"flex-1 py-2 px-4 bg-red-600 hover:bg-red-500 text-white font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-red-500/50 disabled:opacity-50 disabled:cursor-not-allowed",children:s?(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[(0,i.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"解绑中..."]}):"确认解绑"})]})]})}):null}r(3322);var f=r(5941);function g(){(0,p.useRouter)();let{user:e,logout:t}=(0,h.a)(),[r,n]=(0,c.useState)(!1),[s,a]=(0,c.useState)(!1),o=async()=>{try{let e=localStorage.getItem("access_token"),t=await fetch(`${f.CT}/dcc/disassociate`,{method:"DELETE",headers:{"access-token":e||""}});if(!t.ok)throw Error("解绑失败");let r=await t.json();if("success"===r.status){let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);t.dcc_user=null,localStorage.setItem("user",JSON.stringify(t))}sessionStorage.setItem("needBindDcc","true"),a(!1),window.location.reload()}else throw Error(r.message||"解绑失败")}catch(e){console.error("Unbind error:",e),alert("解绑失败，请重试")}};return(0,i.jsxs)("header",{className:"sticky top-0 z-50 backdrop-blur-xl bg-white/10 border-b border-white/20",children:[i.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center",children:i.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),i.jsx("h1",{className:"text-xl font-semibold text-white",children:"DCC 数字员工"})]}),i.jsx("div",{className:"flex items-center space-x-4",children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("button",{onClick:()=>{n(!r)},className:"flex items-center space-x-2 p-2 rounded-lg transition-colors duration-200 text-gray-300 hover:text-white hover:bg-white/10",children:[i.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-sm font-medium text-white",children:e?.username?.charAt(0)?.toUpperCase()||"U"})}),i.jsx("span",{className:"text-sm font-medium",children:e?.username||"用户"}),i.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&(0,i.jsxs)("div",{className:"absolute right-0 mt-2 w-56 rounded-lg shadow-lg py-1 backdrop-blur-xl bg-white/80 border border-white/30",children:[e?.dcc_user&&(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsx("svg",{className:"w-4 h-4 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),i.jsx("span",{className:"text-xs text-gray-600",children:"DCC账号"})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-blue-600 truncate",children:e.dcc_user}),i.jsx("button",{onClick:()=>{a(!0),n(!1)},className:"ml-2 px-2 py-1 text-xs bg-red-600 hover:bg-red-700 text-white rounded transition-colors duration-200",children:"解绑"})]})]}),(0,i.jsxs)("div",{className:"px-4 py-2 border-b border-gray-200",children:[i.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"用户名"}),i.jsx("div",{className:"text-sm font-medium text-gray-800",children:e?.username||"未知用户"})]}),i.jsx("button",{onClick:()=>{t()},className:"block w-full text-left px-4 py-2 text-sm transition-colors duration-200 text-gray-700 hover:text-gray-900 hover:bg-gray-100",children:"退出登录"})]})]})})]})}),i.jsx(x,{isOpen:s,onClose:()=>a(!1),onConfirm:o,dccUser:e?.dcc_user||""})]})}function b({isOpen:e,onClose:t,records:r,currentTasks:n=[]}){let s=e=>{switch(e){case"success":return"text-green-400 bg-green-500/20";case"failed":return"text-red-400 bg-red-500/20";case"no-answer":return"text-yellow-400 bg-yellow-500/20";case"busy":return"text-orange-400 bg-orange-500/20";default:return"text-gray-400 bg-gray-500/20"}},a=e=>{switch(e){case"success":return"接通成功";case"failed":return"拨打失败";case"no-answer":return"无人接听";case"busy":return"占线";default:return"未知状态"}};return(0,i.jsxs)(i.Fragment,{children:[e&&i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:t}),i.jsx("div",{className:`
        fixed top-0 right-0 h-full w-[600px] bg-white/10 backdrop-blur-xl border-l border-white/20
        transform transition-transform duration-300 ease-in-out z-50
        ${e?"translate-x-0":"translate-x-full"}
      `,children:(0,i.jsxs)("div",{className:"h-full flex flex-col",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-white",children:"电话拨打记录"}),(0,i.jsxs)("p",{className:"text-gray-400 text-sm mt-1",children:["共 ",r.length," 条记录"]})]}),i.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:i.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[n.filter(e=>"calling"===e.status).length>0&&(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[i.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full mr-2 animate-pulse"}),"正在拨打"]}),i.jsx("div",{className:"space-y-3",children:n.filter(e=>"calling"===e.status).map(e=>(0,i.jsxs)("div",{className:"bg-blue-500/10 rounded-xl p-4 border border-blue-500/20",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-white font-medium",children:e.leadName}),i.jsx("span",{className:"text-blue-400 text-sm",children:"通话中..."})]}),i.jsx("div",{className:"text-gray-300 text-sm mb-3",children:(0,i.jsxs)("div",{children:["手机号: ",e.phone]})}),i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1.5 overflow-hidden",children:i.jsx("div",{className:"bg-blue-500 h-1.5 rounded-full transition-all duration-300",style:{width:`${e.progress}%`}})}),(0,i.jsxs)("div",{className:"text-blue-400 text-xs mt-1 text-center",children:[e.progress,"% 完成"]})]},e.id))})]}),n.filter(e=>"pending"===e.status).length>0&&(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[i.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full mr-2"}),"等待拨打"]}),(0,i.jsxs)("div",{className:"space-y-2",children:[n.filter(e=>"pending"===e.status).slice(0,3).map(e=>(0,i.jsxs)("div",{className:"bg-gray-500/10 rounded-lg p-3 border border-gray-500/20",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-white text-sm",children:e.leadName}),i.jsx("span",{className:"text-gray-400 text-xs",children:"等待中"})]}),i.jsx("div",{className:"text-gray-400 text-xs mt-1",children:e.phone})]},e.id)),n.filter(e=>"pending"===e.status).length>3&&(0,i.jsxs)("div",{className:"text-gray-400 text-xs text-center py-2",children:["还有 ",n.filter(e=>"pending"===e.status).length-3," 个等待拨打"]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[r.length>0&&(0,i.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[i.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2"}),"通话记录"]}),r.map(e=>i.jsx("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:i.jsx("div",{className:"flex items-start justify-between mb-3",children:(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-white font-medium text-lg",children:e.leadName}),i.jsx("span",{className:`text-xs px-2 py-1 rounded ${s(e.status)}`,children:a(e.status)})]}),(0,i.jsxs)("div",{className:"text-gray-300 text-sm space-y-1",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-gray-400 w-16",children:"手机号:"}),i.jsx("span",{children:e.phone})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-gray-400 w-16",children:"拨打时间:"}),i.jsx("span",{children:e.callTime})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-gray-400 w-16",children:"通话时长:"}),i.jsx("span",{className:"text-blue-300",children:e.duration})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-gray-400 w-16",children:"通话结果:"}),i.jsx("span",{children:e.result})]}),e.notes&&(0,i.jsxs)("div",{className:"flex items-start",children:[i.jsx("span",{className:"text-gray-400 w-16 mt-1",children:"备注:"}),i.jsx("span",{className:"text-gray-300 flex-1",children:e.notes})]})]})]})})},e.id))]})]})]})})]})}function v({isOpen:e,onClose:t,onBindSuccess:r}){let[n,s]=(0,c.useState)(1),[a,o]=(0,c.useState)(""),[l,d]=(0,c.useState)(""),[u,p]=(0,c.useState)(""),[h,m]=(0,c.useState)(""),[x,g]=(0,c.useState)(""),[b,v]=(0,c.useState)(!1),[w,y]=(0,c.useState)(0),[j,N]=(0,c.useState)(!1),_=()=>{let e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",t="";for(let r=0;r<4;r++){let r=Math.floor(Math.random()*e.length);t+=e[r]}m(t)},k=async e=>{if(e.preventDefault(),g(""),!a||!l){g("请输入DCC用户名和密码");return}if(!u){g("请输入验证码");return}if(u!==h){g("验证码错误"),_(),p("");return}v(!0);try{let e=await fetch(`${f.CT}/dcc/user/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_name:a,user_password:l,user_org_id:"M0BFYPL"})});if(!e.ok)throw Error("验证失败");let t=await e.json();if("success"!==t.status)throw Error(t.message||"DCC账号验证失败");let r=localStorage.getItem("access_token"),n=await fetch(`${f.CT}/dcc/associate`,{method:"POST",headers:{"Content-Type":"application/json","access-token":r||""},body:JSON.stringify({dcc_user:a,dcc_user_org_id:"M0BFYPL"})});if(!n.ok)throw Error("关联失败");let i=await n.json();if("success"===i.status){let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);t.dcc_user=a,t.dcc_user_org_id="M0BFYPL",localStorage.setItem("user",JSON.stringify(t))}s(2),y(0),N(!0)}else throw Error(i.message||"关联失败")}catch(e){g(e instanceof Error?e.message:"绑定失败，请重试"),console.error("Bind error:",e)}finally{v(!1)}};return e?i.jsx("div",{className:`fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 ${2===n&&j?"pointer-events-none":""}`,onClick:2===n&&j?void 0:t,children:i.jsx("div",{className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl p-8 shadow-2xl max-w-md w-full mx-4",onClick:e=>e.stopPropagation(),children:1===n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"text-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"绑定DCC账号"}),i.jsx("p",{className:"text-gray-300",children:"请绑定您的DCC账号以继续使用系统"})]}),x&&i.jsx("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-500/30 rounded-lg",children:(0,i.jsxs)("div",{className:"flex",children:[i.jsx("svg",{className:"w-5 h-5 text-red-400 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("div",{className:"ml-3",children:i.jsx("p",{className:"text-sm text-red-200",children:x})})]})}),(0,i.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,i.jsxs)("div",{children:[i.jsx("label",{htmlFor:"dcc-username",className:"block text-sm font-medium mb-2 text-gray-300",children:"DCC用户名"}),i.jsx("input",{type:"text",id:"dcc-username",value:a,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent transition-all duration-200",placeholder:"请输入DCC用户名",required:!0})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{htmlFor:"dcc-password",className:"block text-sm font-medium mb-2 text-gray-300",children:"DCC密码"}),i.jsx("input",{type:"password",id:"dcc-password",value:l,onChange:e=>d(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent transition-all duration-200",placeholder:"请输入DCC密码",required:!0})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{htmlFor:"dcc-captcha",className:"block text-sm font-medium mb-2 text-gray-300",children:"验证码"}),(0,i.jsxs)("div",{className:"flex space-x-3",children:[i.jsx("input",{type:"text",id:"dcc-captcha",value:u,onChange:e=>p(e.target.value.toUpperCase()),className:"flex-1 px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent transition-all duration-200",placeholder:"请输入验证码",maxLength:4,required:!0}),i.jsx("button",{type:"button",onClick:_,className:"w-24 h-11 rounded-lg border border-blue-500/30 font-mono text-lg font-bold transition-all duration-200 flex items-center justify-center tracking-wider bg-gradient-to-r from-blue-600/50 to-purple-600/50 text-blue-300 hover:from-blue-500/70 hover:to-purple-500/70 hover:text-white",title:"点击刷新验证码",children:h})]})]}),i.jsx("button",{type:"submit",disabled:b,className:"w-full py-3 px-4 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-medium rounded-lg transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500/50 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:b?(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[(0,i.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"绑定中..."]}):"绑定"})]})]}):(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"正在分析"}),i.jsx("p",{className:"text-gray-300",children:"系统正在分析您的DCC账号信息"})]}),w<100?(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsxs)("div",{className:"relative w-32 h-32 mx-auto mb-4",children:[i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsxs)("svg",{className:"w-16 h-16 text-blue-400 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsxs)("svg",{className:"w-8 h-8 text-purple-400 animate-spin",style:{animationDirection:"reverse"},fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"6",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]}),i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 mb-4",children:i.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-1000",style:{width:`${Math.min(w,100)}%`}})}),i.jsx("p",{className:"text-gray-300 text-sm",children:"正在分析中..."})]}):i.jsx("div",{className:"mb-8",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-32 h-32 bg-green-500/20 rounded-full mb-6",children:i.jsx("svg",{className:"w-16 h-16 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),i.jsx("h3",{className:"text-xl font-bold text-green-400 mb-2",children:"分析完成"}),i.jsx("p",{className:"text-gray-300 text-sm",children:"DCC账号信息分析成功"})]})}),w>=100&&i.jsx("button",{onClick:()=>{let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);t.dcc_user=a,t.dcc_user_org_id="M0BFYPL",localStorage.setItem("user",JSON.stringify(t))}r&&r(),setTimeout(()=>{t(),s(1),y(0),o(""),d(""),p(""),g("")},1500)},className:"w-full py-3 px-4 bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-500 hover:to-blue-500 text-white font-medium rounded-lg transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-green-500/50",children:"开始使用"})]})})}):null}function w(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=function e(t){var r,n,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(n=e(t[r]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n)}return s}(e))&&(n&&(n+=" "),n+=t);return n}let y={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},j=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,N=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,_=/^([+-])(\d{2})(?::?(\d{2}))?$/;function k(e){return e?parseInt(e):1}function D(e){return e&&parseFloat(e.replace(",","."))||0}let S=[31,null,31,30,31,30,31,31,30,31,30,31];function C(e){return e%400==0||e%4==0&&e%100!=0}function M(e){let t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):new Date("number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?e:NaN)}function T(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}let E={},P={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function L(e){return (t={})=>{let r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}let O={date:L({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:L({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:L({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},$={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function I(e){return(t,r)=>{let n;if("formatting"===(r?.context?String(r.context):"standalone")&&e.formattingValues){let t=e.defaultFormattingWidth||e.defaultWidth,s=r?.width?String(r.width):t;n=e.formattingValues[s]||e.formattingValues[t]}else{let t=e.defaultWidth,s=r?.width?String(r.width):e.defaultWidth;n=e.values[s]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function R(e){return(t,r={})=>{let n;let s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;let o=i[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}(l,e=>e.test(o)):function(e,t){for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}(l,e=>e.test(o));return n=e.valueCallback?e.valueCallback(c):c,{value:n=r.valueCallback?r.valueCallback(n):n,rest:t.slice(o.length)}}}let Y={code:"en-US",formatDistance:(e,t,r)=>{let n;let s=P[e];return(n="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),r?.addSuffix)?r.comparison&&r.comparison>0?"in "+n:n+" ago":n},formatLong:O,formatRelative:(e,t,r,n)=>$[e],localize:{ordinalNumber:(e,t)=>{let r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:I({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:I({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:I({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:I({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:I({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function(e){return(t,r={})=>{let n=t.match(e.matchPattern);if(!n)return null;let s=n[0],a=t.match(e.parsePattern);if(!a)return null;let i=e.valueCallback?e.valueCallback(a[0]):a[0];return{value:i=r.valueCallback?r.valueCallback(i):i,rest:t.slice(s.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:R({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:R({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:R({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:R({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:R({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},F=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},A=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},W={p:A,P:(e,t)=>{let r;let n=e.match(/(P+)(p+)?/)||[],s=n[1],a=n[2];if(!a)return F(e,t);switch(s){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",F(s,t)).replace("{{time}}",A(a,t))}},H=/^D+$/,B=/^Y+$/,z=["D","DD","YY","YYYY"];function q(e,t,r){let n=function(e,t,r){let n="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,r);if(console.warn(n),z.includes(e))throw RangeError(n)}class Q{validate(e,t){return!0}constructor(){this.subPriority=0}}class V extends Q{constructor(e,t,r,n,s){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=n,s&&(this.subPriority=s)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class K extends Q{set(e,t){return t.timestampIsSet?e:T(e,function(e,t){let r=t instanceof Date?T(t,0):new t(0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}(e,Date))}constructor(...e){super(...e),this.priority=10,this.subPriority=-1}}class U{run(e,t,r,n){let s=this.parse(e,t,r,n);return s?{setter:new V(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,t,r){return!0}}class G extends U{parse(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,t,r){return t.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}constructor(...e){super(...e),this.priority=140,this.incompatibleTokens=["R","u","t","T"]}}let X={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},J={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Z(e,t){return e?{value:t(e.value),rest:e.rest}:e}function ee(e,t){let r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function et(e,t){let r=t.match(e);if(!r)return null;if("Z"===r[0])return{value:0,rest:t.slice(1)};let n="+"===r[1]?1:-1;return{value:n*(36e5*(r[2]?parseInt(r[2],10):0)+6e4*(r[3]?parseInt(r[3],10):0)+(r[5]?parseInt(r[5],10):0)*1e3),rest:t.slice(r[0].length)}}function er(e){return ee(X.anyDigitsSigned,e)}function en(e,t){switch(e){case 1:return ee(X.singleDigit,t);case 2:return ee(X.twoDigits,t);case 3:return ee(X.threeDigits,t);case 4:return ee(X.fourDigits,t);default:return ee(RegExp("^\\d{1,"+e+"}"),t)}}function es(e,t){switch(e){case 1:return ee(X.singleDigitSigned,t);case 2:return ee(X.twoDigitsSigned,t);case 3:return ee(X.threeDigitsSigned,t);case 4:return ee(X.fourDigitsSigned,t);default:return ee(RegExp("^-?\\d{1,"+e+"}"),t)}}function ea(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function ei(e,t){let r;let n=t>0,s=n?t:1-t;if(s<=50)r=e||100;else{let t=s+50;r=e+100*Math.trunc(t/100)-(e>=t%100?100:0)}return n?r:1-r}function eo(e){return e%400==0||e%4==0&&e%100!=0}class el extends U{parse(e,t,r){let n=e=>({year:e,isTwoDigitYear:"yy"===t});switch(t){case"y":return Z(en(4,e),n);case"yo":return Z(r.ordinalNumber(e,{unit:"year"}),n);default:return Z(en(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r){let n=e.getFullYear();if(r.isTwoDigitYear){let t=ei(r.year,n);return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}let s="era"in t&&1!==t.era?1-r.year:r.year;return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}constructor(...e){super(...e),this.priority=130,this.incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"]}}function ec(e,t){let r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??E.weekStartsOn??E.locale?.options?.weekStartsOn??0,n=M(e),s=n.getDay();return n.setDate(n.getDate()-((s<r?7:0)+s-r)),n.setHours(0,0,0,0),n}function ed(e,t){let r=M(e),n=r.getFullYear(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??E.firstWeekContainsDate??E.locale?.options?.firstWeekContainsDate??1,a=T(e,0);a.setFullYear(n+1,0,s),a.setHours(0,0,0,0);let i=ec(a,t),o=T(e,0);o.setFullYear(n,0,s),o.setHours(0,0,0,0);let l=ec(o,t);return r.getTime()>=i.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}class eu extends U{parse(e,t,r){let n=e=>({year:e,isTwoDigitYear:"YY"===t});switch(t){case"Y":return Z(en(4,e),n);case"Yo":return Z(r.ordinalNumber(e,{unit:"year"}),n);default:return Z(en(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r,n){let s=ed(e,n);if(r.isTwoDigitYear){let t=ei(r.year,s);return e.setFullYear(t,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),ec(e,n)}let a="era"in t&&1!==t.era?1-r.year:r.year;return e.setFullYear(a,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),ec(e,n)}constructor(...e){super(...e),this.priority=130,this.incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}}function ep(e){return ec(e,{weekStartsOn:1})}class eh extends U{parse(e,t){return"R"===t?es(4,e):es(t.length,e)}set(e,t,r){let n=T(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),ep(n)}constructor(...e){super(...e),this.priority=130,this.incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}}class em extends U{parse(e,t){return"u"===t?es(4,e):es(t.length,e)}set(e,t,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}constructor(...e){super(...e),this.priority=130,this.incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}}class ex extends U{parse(e,t,r){switch(t){case"Q":case"QQ":return en(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}constructor(...e){super(...e),this.priority=120,this.incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}}class ef extends U{parse(e,t,r){switch(t){case"q":case"qq":return en(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}constructor(...e){super(...e),this.priority=120,this.incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}}class eg extends U{parse(e,t,r){let n=e=>e-1;switch(t){case"M":return Z(ee(X.month,e),n);case"MM":return Z(en(2,e),n);case"Mo":return Z(r.ordinalNumber(e,{unit:"month"}),n);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}constructor(...e){super(...e),this.incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"],this.priority=110}}class eb extends U{parse(e,t,r){let n=e=>e-1;switch(t){case"L":return Z(ee(X.month,e),n);case"LL":return Z(en(2,e),n);case"Lo":return Z(r.ordinalNumber(e,{unit:"month"}),n);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}constructor(...e){super(...e),this.priority=110,this.incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}}function ev(e,t){let r=M(e);return Math.round((+ec(r,t)-+function(e,t){let r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??E.firstWeekContainsDate??E.locale?.options?.firstWeekContainsDate??1,n=ed(e,t),s=T(e,0);return s.setFullYear(n,0,r),s.setHours(0,0,0,0),ec(s,t)}(r,t))/6048e5)+1}class ew extends U{parse(e,t,r){switch(t){case"w":return ee(X.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return en(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r,n){return ec(function(e,t,r){let n=M(e),s=ev(n,r)-t;return n.setDate(n.getDate()-7*s),n}(e,r,n),n)}constructor(...e){super(...e),this.priority=100,this.incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}}function ey(e){let t=M(e),r=t.getFullYear(),n=T(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);let s=ep(n),a=T(e,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);let i=ep(a);return t.getTime()>=s.getTime()?r+1:t.getTime()>=i.getTime()?r:r-1}function ej(e){let t=M(e);return Math.round((+ep(t)-+function(e){let t=ey(e),r=T(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),ep(r)}(t))/6048e5)+1}class eN extends U{parse(e,t,r){switch(t){case"I":return ee(X.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return en(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r){return ep(function(e,t){let r=M(e),n=ej(r)-t;return r.setDate(r.getDate()-7*n),r}(e,r))}constructor(...e){super(...e),this.priority=100,this.incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}}let e_=[31,28,31,30,31,30,31,31,30,31,30,31],ek=[31,29,31,30,31,30,31,31,30,31,30,31];class eD extends U{parse(e,t,r){switch(t){case"d":return ee(X.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return en(t.length,e)}}validate(e,t){let r=eo(e.getFullYear()),n=e.getMonth();return r?t>=1&&t<=ek[n]:t>=1&&t<=e_[n]}set(e,t,r){return e.setDate(r),e.setHours(0,0,0,0),e}constructor(...e){super(...e),this.priority=90,this.subPriority=1,this.incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}}class eS extends U{parse(e,t,r){switch(t){case"D":case"DD":return ee(X.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return en(t.length,e)}}validate(e,t){return eo(e.getFullYear())?t>=1&&t<=366:t>=1&&t<=365}set(e,t,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}constructor(...e){super(...e),this.priority=90,this.subpriority=1,this.incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}}function eC(e,t){let r=M(e);return isNaN(t)?T(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function eM(e,t,r){let n=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??E.weekStartsOn??E.locale?.options?.weekStartsOn??0,s=M(e),a=s.getDay(),i=7-n;return eC(s,t<0||t>6?t-(a+i)%7:((t%7+7)%7+i)%7-(a+i)%7)}class eT extends U{parse(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=eM(e,r,n)).setHours(0,0,0,0),e}constructor(...e){super(...e),this.priority=90,this.incompatibleTokens=["D","i","e","c","t","T"]}}class eE extends U{parse(e,t,r,n){let s=e=>(e+n.weekStartsOn+6)%7+7*Math.floor((e-1)/7);switch(t){case"e":case"ee":return Z(en(t.length,e),s);case"eo":return Z(r.ordinalNumber(e,{unit:"day"}),s);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=eM(e,r,n)).setHours(0,0,0,0),e}constructor(...e){super(...e),this.priority=90,this.incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}}class eP extends U{parse(e,t,r,n){let s=e=>(e+n.weekStartsOn+6)%7+7*Math.floor((e-1)/7);switch(t){case"c":case"cc":return Z(en(t.length,e),s);case"co":return Z(r.ordinalNumber(e,{unit:"day"}),s);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=eM(e,r,n)).setHours(0,0,0,0),e}constructor(...e){super(...e),this.priority=90,this.incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}}class eL extends U{parse(e,t,r){let n=e=>0===e?7:e;switch(t){case"i":case"ii":return en(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return Z(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return Z(r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return Z(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);default:return Z(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n)}}validate(e,t){return t>=1&&t<=7}set(e,t,r){return(e=function(e,t){let r;let n=M(e),s=(0===(r=M(n).getDay())&&(r=7),r);return eC(n,t-s)}(e,r)).setHours(0,0,0,0),e}constructor(...e){super(...e),this.priority=90,this.incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}}class eO extends U{parse(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(ea(r),0,0,0),e}constructor(...e){super(...e),this.priority=80,this.incompatibleTokens=["b","B","H","k","t","T"]}}class e$ extends U{parse(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(ea(r),0,0,0),e}constructor(...e){super(...e),this.priority=80,this.incompatibleTokens=["a","B","H","k","t","T"]}}class eI extends U{parse(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(ea(r),0,0,0),e}constructor(...e){super(...e),this.priority=80,this.incompatibleTokens=["a","b","t","T"]}}class eR extends U{parse(e,t,r){switch(t){case"h":return ee(X.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return en(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,r){let n=e.getHours()>=12;return n&&r<12?e.setHours(r+12,0,0,0):n||12!==r?e.setHours(r,0,0,0):e.setHours(0,0,0,0),e}constructor(...e){super(...e),this.priority=70,this.incompatibleTokens=["H","K","k","t","T"]}}class eY extends U{parse(e,t,r){switch(t){case"H":return ee(X.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return en(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,r){return e.setHours(r,0,0,0),e}constructor(...e){super(...e),this.priority=70,this.incompatibleTokens=["a","b","h","K","k","t","T"]}}class eF extends U{parse(e,t,r){switch(t){case"K":return ee(X.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return en(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}constructor(...e){super(...e),this.priority=70,this.incompatibleTokens=["h","H","k","t","T"]}}class eA extends U{parse(e,t,r){switch(t){case"k":return ee(X.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return en(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,r){return e.setHours(r<=24?r%24:r,0,0,0),e}constructor(...e){super(...e),this.priority=70,this.incompatibleTokens=["a","b","h","H","K","t","T"]}}class eW extends U{parse(e,t,r){switch(t){case"m":return ee(X.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return en(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setMinutes(r,0,0),e}constructor(...e){super(...e),this.priority=60,this.incompatibleTokens=["t","T"]}}class eH extends U{parse(e,t,r){switch(t){case"s":return ee(X.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return en(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setSeconds(r,0),e}constructor(...e){super(...e),this.priority=50,this.incompatibleTokens=["t","T"]}}class eB extends U{parse(e,t){return Z(en(t.length,e),e=>Math.trunc(e*Math.pow(10,-t.length+3)))}set(e,t,r){return e.setMilliseconds(r),e}constructor(...e){super(...e),this.priority=30,this.incompatibleTokens=["t","T"]}}function ez(e){let t=M(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}class eq extends U{parse(e,t){switch(t){case"X":return et(J.basicOptionalMinutes,e);case"XX":return et(J.basic,e);case"XXXX":return et(J.basicOptionalSeconds,e);case"XXXXX":return et(J.extendedOptionalSeconds,e);default:return et(J.extended,e)}}set(e,t,r){return t.timestampIsSet?e:T(e,e.getTime()-ez(e)-r)}constructor(...e){super(...e),this.priority=10,this.incompatibleTokens=["t","T","x"]}}class eQ extends U{parse(e,t){switch(t){case"x":return et(J.basicOptionalMinutes,e);case"xx":return et(J.basic,e);case"xxxx":return et(J.basicOptionalSeconds,e);case"xxxxx":return et(J.extendedOptionalSeconds,e);default:return et(J.extended,e)}}set(e,t,r){return t.timestampIsSet?e:T(e,e.getTime()-ez(e)-r)}constructor(...e){super(...e),this.priority=10,this.incompatibleTokens=["t","T","X"]}}class eV extends U{parse(e){return er(e)}set(e,t,r){return[T(e,1e3*r),{timestampIsSet:!0}]}constructor(...e){super(...e),this.priority=40,this.incompatibleTokens="*"}}class eK extends U{parse(e){return er(e)}set(e,t,r){return[T(e,r),{timestampIsSet:!0}]}constructor(...e){super(...e),this.priority=20,this.incompatibleTokens="*"}}let eU={G:new G,y:new el,Y:new eu,R:new eh,u:new em,Q:new ex,q:new ef,M:new eg,L:new eb,w:new ew,I:new eN,d:new eD,D:new eS,E:new eT,e:new eE,c:new eP,i:new eL,a:new eO,b:new e$,B:new eI,h:new eR,H:new eY,K:new eF,k:new eA,m:new eW,s:new eH,S:new eB,X:new eq,x:new eQ,t:new eV,T:new eK},eG=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,eX=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,eJ=/^'([^]*?)'?$/,eZ=/''/g,e0=/\S/,e1=/[a-zA-Z]/;function e2(e){return e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function e4(e){return(!!e2(e)||"number"==typeof e)&&!isNaN(Number(M(e)))}function e3(e,t){return+M(e)<+M(t)}function e5(e){let t=M(e);return t.setHours(0,0,0,0),t}function e6(e,t){let r=e5(e),n=e5(t);return Math.round((+r-ez(r)-(+n-ez(n)))/864e5)}function e8(e){let t=M(e),r=T(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function e7(e,t){let r=Math.abs(e).toString().padStart(t,"0");return(e<0?"-":"")+r}let e9={y(e,t){let r=e.getFullYear(),n=r>0?r:1-r;return e7("yy"===t?n%100:n,t.length)},M(e,t){let r=e.getMonth();return"M"===t?String(r+1):e7(r+1,2)},d:(e,t)=>e7(e.getDate(),t.length),a(e,t){let r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>e7(e.getHours()%12||12,t.length),H:(e,t)=>e7(e.getHours(),t.length),m:(e,t)=>e7(e.getMinutes(),t.length),s:(e,t)=>e7(e.getSeconds(),t.length),S(e,t){let r=t.length;return e7(Math.trunc(e.getMilliseconds()*Math.pow(10,r-3)),t.length)}},te={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},tt={G:function(e,t,r){let n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){let t=e.getFullYear();return r.ordinalNumber(t>0?t:1-t,{unit:"year"})}return e9.y(e,t)},Y:function(e,t,r,n){let s=ed(e,n),a=s>0?s:1-s;return"YY"===t?e7(a%100,2):"Yo"===t?r.ordinalNumber(a,{unit:"year"}):e7(a,t.length)},R:function(e,t){return e7(ey(e),t.length)},u:function(e,t){return e7(e.getFullYear(),t.length)},Q:function(e,t,r){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return e7(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return e7(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){let n=e.getMonth();switch(t){case"M":case"MM":return e9.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){let n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return e7(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){let s=ev(e,n);return"wo"===t?r.ordinalNumber(s,{unit:"week"}):e7(s,t.length)},I:function(e,t,r){let n=ej(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):e7(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):e9.d(e,t)},D:function(e,t,r){let n=function(e){let t=M(e);return e6(t,e8(t))+1}(e);return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):e7(n,t.length)},E:function(e,t,r){let n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){let s=e.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return e7(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){let s=e.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return e7(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){let n=e.getDay(),s=0===n?7:n;switch(t){case"i":return String(s);case"ii":return e7(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){let n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){let n;let s=e.getHours();switch(n=12===s?te.noon:0===s?te.midnight:s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,r){let n;let s=e.getHours();switch(n=s>=17?te.evening:s>=12?te.afternoon:s>=4?te.morning:te.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return e9.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):e9.H(e,t)},K:function(e,t,r){let n=e.getHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):e7(n,t.length)},k:function(e,t,r){let n=e.getHours();return(0===n&&(n=24),"ko"===t)?r.ordinalNumber(n,{unit:"hour"}):e7(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):e9.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):e9.s(e,t)},S:function(e,t){return e9.S(e,t)},X:function(e,t,r){let n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return tn(n);case"XXXX":case"XX":return ts(n);default:return ts(n,":")}},x:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"x":return tn(n);case"xxxx":case"xx":return ts(n);default:return ts(n,":")}},O:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+tr(n,":");default:return"GMT"+ts(n,":")}},z:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+tr(n,":");default:return"GMT"+ts(n,":")}},t:function(e,t,r){return e7(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,r){return e7(e.getTime(),t.length)}};function tr(e,t=""){let r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),a=n%60;return 0===a?r+String(s):r+String(s)+t+e7(a,2)}function tn(e,t){return e%60==0?(e>0?"-":"+")+e7(Math.abs(e)/60,2):ts(e,t)}function ts(e,t=""){let r=Math.abs(e);return(e>0?"-":"+")+e7(Math.trunc(r/60),2)+t+e7(r%60,2)}let ta=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ti=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,to=/^'([^]*?)'?$/,tl=/''/g,tc=/[a-zA-Z]/;function td(e,t,r){let n=r?.locale??E.locale??Y,s=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??E.firstWeekContainsDate??E.locale?.options?.firstWeekContainsDate??1,a=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??E.weekStartsOn??E.locale?.options?.weekStartsOn??0,i=M(e);if(!e4(i))throw RangeError("Invalid time value");let o=t.match(ti).map(e=>{let t=e[0];return"p"===t||"P"===t?(0,W[t])(e,n.formatLong):e}).join("").match(ta).map(e=>{if("''"===e)return{isToken:!1,value:"'"};let t=e[0];if("'"===t)return{isToken:!1,value:function(e){let t=e.match(to);return t?t[1].replace(tl,"'"):e}(e)};if(tt[t])return{isToken:!0,value:e};if(t.match(tc))throw RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});n.localize.preprocessor&&(o=n.localize.preprocessor(i,o));let l={firstWeekContainsDate:s,weekStartsOn:a,locale:n};return o.map(s=>{if(!s.isToken)return s.value;let a=s.value;return(!r?.useAdditionalWeekYearTokens&&B.test(a)||!r?.useAdditionalDayOfYearTokens&&H.test(a))&&q(a,t,String(e)),(0,tt[a[0]])(i,a,n.localize,l)}).join("")}function tu(e,t){let r=M(e);return r.setHours(t),r}function tp(e,t){let r=M(e);return r.setMinutes(t),r}function th(e,t){let r=M(e);return r.setSeconds(t),r}function tm(e){let t=M(e);return t.setDate(1),t.setHours(0,0,0,0),t}function tx(e){let t=M(e),r=t.getMonth();return t.setMonth(r-r%3,1),t.setHours(0,0,0,0),t}function tf(e){let t=M(e);return t.setHours(23,59,59,999),t}function tg(e){let t=M(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function tb(e,t){let r=+M(e),[n,s]=[+M(t.start),+M(t.end)].sort((e,t)=>e-t);return r>=n&&r<=s}function tv(e,t){let r=M(e),n=r.getFullYear(),s=r.getDate(),a=T(e,0);a.setFullYear(n,t,15),a.setHours(0,0,0,0);let i=function(e){let t=M(e),r=t.getFullYear(),n=t.getMonth(),s=T(e,0);return s.setFullYear(r,n+1,0),s.setHours(0,0,0,0),s.getDate()}(a);return r.setMonth(t,Math.min(s,i)),r}function tw(e,t){let r=M(e),n=Math.trunc(r.getMonth()/3)+1;return tv(r,r.getMonth()+3*(t-n))}function ty(e){return M(e).getFullYear()}function tj(e){return M(e).getMonth()}function tN(e){let t=M(e),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}function t_(e){return Math.trunc(M(e).getMonth()/3)+1}function tk(e){return M(e).getHours()}function tD(e){return M(e).getMinutes()}function tS(e){return M(e).getSeconds()}function tC(e,t){let r=M(e);if(isNaN(t))return T(e,NaN);if(!t)return r;let n=r.getDate(),s=T(e,r.getTime());return(s.setMonth(r.getMonth()+t+1,0),n>=s.getDate())?s:(r.setFullYear(s.getFullYear(),s.getMonth(),n),r)}function tM(e,t){let r=M(e),n=M(t);return 12*(r.getFullYear()-n.getFullYear())+(r.getMonth()-n.getMonth())}function tT(e,t){let r=M(e),n=M(t);return 4*(r.getFullYear()-n.getFullYear())+(t_(r)-t_(n))}function tE(e,t){return tC(e,12*t)}function tP(e,t){let r=M(e),n=M(t);return r.getFullYear()-n.getFullYear()}function tL(e){let t;return e.forEach(e=>{let r=M(e);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function tO(e){let t;return e.forEach(function(e){let r=M(e);(void 0===t||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function t$(e,t){let r=+M(e);return T(e,r+t)}function tI(e,t){return t$(e,6e4*t)}function tR(e,t){let r=M(e),n=M(t);return r.getTime()>n.getTime()}function tY(e){return M(e).getDate()}function tF(e){return M(e).getTime()}function tA(e,t){let r=M(e);return isNaN(+r)?T(e,NaN):(r.setFullYear(t),r)}function tW(e,t){let r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}var tH="undefined"!=typeof document?c.useLayoutEffect:function(){};let tB={...d}.useInsertionEffect||(e=>e());function tz(){return"undefined"!=typeof window}function tq(e){return tK(e)?(e.nodeName||"").toLowerCase():"#document"}function tQ(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function tV(e){var t;return null==(t=(tK(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function tK(e){return!!tz()&&(e instanceof Node||e instanceof tQ(e).Node)}function tU(e){return!!tz()&&(e instanceof Element||e instanceof tQ(e).Element)}function tG(e){return!!tz()&&(e instanceof HTMLElement||e instanceof tQ(e).HTMLElement)}function tX(e){return!!tz()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof tQ(e).ShadowRoot)}let tJ=new Set(["inline","contents"]);function tZ(e){let{overflow:t,overflowX:r,overflowY:n,display:s}=re(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!tJ.has(s)}let t0=new Set(["table","td","th"]),t1=[":popover-open",":modal"];function t2(e){return t1.some(t=>{try{return e.matches(t)}catch(e){return!1}})}let t4=["transform","translate","scale","rotate","perspective"],t3=["transform","translate","scale","rotate","perspective","filter"],t5=["paint","layout","strict","content"];function t6(e){let t=t8(),r=tU(e)?re(e):e;return t4.some(e=>!!r[e]&&"none"!==r[e])||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||t3.some(e=>(r.willChange||"").includes(e))||t5.some(e=>(r.contain||"").includes(e))}function t8(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let t7=new Set(["html","body","#document"]);function t9(e){return t7.has(tq(e))}function re(e){return tQ(e).getComputedStyle(e)}function rt(e){return tU(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function rr(e){if("html"===tq(e))return e;let t=e.assignedSlot||e.parentNode||tX(e)&&e.host||tV(e);return tX(t)?t.host:t}function rn(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);let s=function e(t){let r=rr(t);return t9(r)?t.ownerDocument?t.ownerDocument.body:t.body:tG(r)&&tZ(r)?r:e(r)}(e),a=s===(null==(n=e.ownerDocument)?void 0:n.body),i=tQ(s);if(a){let e=rs(i);return t.concat(i,i.visualViewport||[],tZ(s)?s:[],e&&r?rn(e):[])}return t.concat(s,rn(s,[],r))}function rs(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}var ra=r(962),ri=r.n(ra);let ro=Math.min,rl=Math.max,rc=Math.round,rd=Math.floor,ru=e=>({x:e,y:e}),rp={left:"right",right:"left",bottom:"top",top:"bottom"},rh={start:"end",end:"start"};function rm(e,t){return"function"==typeof e?e(t):e}function rx(e){return e.split("-")[0]}function rf(e){return e.split("-")[1]}function rg(e){return"y"===e?"height":"width"}let rb=new Set(["top","bottom"]);function rv(e){return rb.has(rx(e))?"y":"x"}function rw(e){return"x"===rv(e)?"y":"x"}function ry(e){return e.replace(/start|end/g,e=>rh[e])}let rj=["left","right"],rN=["right","left"],r_=["top","bottom"],rk=["bottom","top"];function rD(e){return e.replace(/left|right|bottom|top/g,e=>rp[e])}function rS(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function rC(e){let{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function rM(e,t,r){let n,{reference:s,floating:a}=e,i=rv(t),o=rw(t),l=rg(o),c=rx(t),d="y"===i,u=s.x+s.width/2-a.width/2,p=s.y+s.height/2-a.height/2,h=s[l]/2-a[l]/2;switch(c){case"top":n={x:u,y:s.y-a.height};break;case"bottom":n={x:u,y:s.y+s.height};break;case"right":n={x:s.x+s.width,y:p};break;case"left":n={x:s.x-a.width,y:p};break;default:n={x:s.x,y:s.y}}switch(rf(t)){case"start":n[o]-=h*(r&&d?-1:1);break;case"end":n[o]+=h*(r&&d?-1:1)}return n}let rT=async(e,t,r)=>{let{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:i}=r,o=a.filter(Boolean),l=await (null==i.isRTL?void 0:i.isRTL(t)),c=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:u}=rM(c,n,l),p=n,h={},m=0;for(let r=0;r<o.length;r++){let{name:a,fn:x}=o[r],{x:f,y:g,data:b,reset:v}=await x({x:d,y:u,initialPlacement:n,placement:p,strategy:s,middlewareData:h,rects:c,platform:i,elements:{reference:e,floating:t}});d=null!=f?f:d,u=null!=g?g:u,h={...h,[a]:{...h[a],...b}},v&&m<=50&&(m++,"object"==typeof v&&(v.placement&&(p=v.placement),v.rects&&(c=!0===v.rects?await i.getElementRects({reference:e,floating:t,strategy:s}):v.rects),{x:d,y:u}=rM(c,p,l)),r=-1)}return{x:d,y:u,placement:p,strategy:s,middlewareData:h}};async function rE(e,t){var r;void 0===t&&(t={});let{x:n,y:s,platform:a,rects:i,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:p=!1,padding:h=0}=rm(t,e),m=rS(h),x=o[p?"floating"===u?"reference":"floating":u],f=rC(await a.getClippingRect({element:null==(r=await (null==a.isElement?void 0:a.isElement(x)))||r?x:x.contextElement||await (null==a.getDocumentElement?void 0:a.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),g="floating"===u?{x:n,y:s,width:i.floating.width,height:i.floating.height}:i.reference,b=await (null==a.getOffsetParent?void 0:a.getOffsetParent(o.floating)),v=await (null==a.isElement?void 0:a.isElement(b))&&await (null==a.getScale?void 0:a.getScale(b))||{x:1,y:1},w=rC(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:g,offsetParent:b,strategy:l}):g);return{top:(f.top-w.top+m.top)/v.y,bottom:(w.bottom-f.bottom+m.bottom)/v.y,left:(f.left-w.left+m.left)/v.x,right:(w.right-f.right+m.right)/v.x}}let rP=new Set(["left","top"]);async function rL(e,t){let{placement:r,platform:n,elements:s}=e,a=await (null==n.isRTL?void 0:n.isRTL(s.floating)),i=rx(r),o=rf(r),l="y"===rv(r),c=rP.has(i)?-1:1,d=a&&l?-1:1,u=rm(t,e),{mainAxis:p,crossAxis:h,alignmentAxis:m}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return o&&"number"==typeof m&&(h="end"===o?-1*m:m),l?{x:h*d,y:p*c}:{x:p*c,y:h*d}}function rO(e){let t=re(e),r=parseFloat(t.width)||0,n=parseFloat(t.height)||0,s=tG(e),a=s?e.offsetWidth:r,i=s?e.offsetHeight:n,o=rc(r)!==a||rc(n)!==i;return o&&(r=a,n=i),{width:r,height:n,$:o}}function r$(e){return tU(e)?e:e.contextElement}function rI(e){let t=r$(e);if(!tG(t))return ru(1);let r=t.getBoundingClientRect(),{width:n,height:s,$:a}=rO(t),i=(a?rc(r.width):r.width)/n,o=(a?rc(r.height):r.height)/s;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}let rR=ru(0);function rY(e){let t=tQ(e);return t8()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:rR}function rF(e,t,r,n){var s;void 0===t&&(t=!1),void 0===r&&(r=!1);let a=e.getBoundingClientRect(),i=r$(e),o=ru(1);t&&(n?tU(n)&&(o=rI(n)):o=rI(e));let l=(void 0===(s=r)&&(s=!1),n&&(!s||n===tQ(i))&&s)?rY(i):ru(0),c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,p=a.height/o.y;if(i){let e=tQ(i),t=n&&tU(n)?tQ(n):n,r=e,s=rs(r);for(;s&&n&&t!==r;){let e=rI(s),t=s.getBoundingClientRect(),n=re(s),a=t.left+(s.clientLeft+parseFloat(n.paddingLeft))*e.x,i=t.top+(s.clientTop+parseFloat(n.paddingTop))*e.y;c*=e.x,d*=e.y,u*=e.x,p*=e.y,c+=a,d+=i,s=rs(r=tQ(s))}}return rC({width:u,height:p,x:c,y:d})}function rA(e,t){let r=rt(e).scrollLeft;return t?t.left+r:rF(tV(e)).left+r}function rW(e,t,r){void 0===r&&(r=!1);let n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-(r?0:rA(e,n)),y:n.top+t.scrollTop}}let rH=new Set(["absolute","fixed"]);function rB(e,t,r){let n;if("viewport"===t)n=function(e,t){let r=tQ(e),n=tV(e),s=r.visualViewport,a=n.clientWidth,i=n.clientHeight,o=0,l=0;if(s){a=s.width,i=s.height;let e=t8();(!e||e&&"fixed"===t)&&(o=s.offsetLeft,l=s.offsetTop)}return{width:a,height:i,x:o,y:l}}(e,r);else if("document"===t)n=function(e){let t=tV(e),r=rt(e),n=e.ownerDocument.body,s=rl(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=rl(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight),i=-r.scrollLeft+rA(e),o=-r.scrollTop;return"rtl"===re(n).direction&&(i+=rl(t.clientWidth,n.clientWidth)-s),{width:s,height:a,x:i,y:o}}(tV(e));else if(tU(t))n=function(e,t){let r=rF(e,!0,"fixed"===t),n=r.top+e.clientTop,s=r.left+e.clientLeft,a=tG(e)?rI(e):ru(1),i=e.clientWidth*a.x;return{width:i,height:e.clientHeight*a.y,x:s*a.x,y:n*a.y}}(t,r);else{let r=rY(e);n={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return rC(n)}function rz(e){return"static"===re(e).position}function rq(e,t){if(!tG(e)||"fixed"===re(e).position)return null;if(t)return t(e);let r=e.offsetParent;return tV(e)===r&&(r=r.ownerDocument.body),r}function rQ(e,t){var r;let n=tQ(e);if(t2(e))return n;if(!tG(e)){let t=rr(e);for(;t&&!t9(t);){if(tU(t)&&!rz(t))return t;t=rr(t)}return n}let s=rq(e,t);for(;s&&(r=s,t0.has(tq(r)))&&rz(s);)s=rq(s,t);return s&&t9(s)&&rz(s)&&!t6(s)?n:s||function(e){let t=rr(e);for(;tG(t)&&!t9(t);){if(t6(t))return t;if(t2(t))break;t=rr(t)}return null}(e)||n}let rV=async function(e){let t=this.getOffsetParent||rQ,r=this.getDimensions,n=await r(e.floating);return{reference:function(e,t,r){let n=tG(t),s=tV(t),a="fixed"===r,i=rF(e,!0,a,t),o={scrollLeft:0,scrollTop:0},l=ru(0);if(n||!n&&!a){if(("body"!==tq(t)||tZ(s))&&(o=rt(t)),n){let e=rF(t,!0,a,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else s&&(l.x=rA(s))}a&&!n&&s&&(l.x=rA(s));let c=!s||n||a?ru(0):rW(s,o);return{x:i.left+o.scrollLeft-l.x-c.x,y:i.top+o.scrollTop-l.y-c.y,width:i.width,height:i.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},rK={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e,a="fixed"===s,i=tV(n),o=!!t&&t2(t.floating);if(n===i||o&&a)return r;let l={scrollLeft:0,scrollTop:0},c=ru(1),d=ru(0),u=tG(n);if((u||!u&&!a)&&(("body"!==tq(n)||tZ(i))&&(l=rt(n)),tG(n))){let e=rF(n);c=rI(n),d.x=e.x+n.clientLeft,d.y=e.y+n.clientTop}let p=!i||u||a?ru(0):rW(i,l,!0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+d.x+p.x,y:r.y*c.y-l.scrollTop*c.y+d.y+p.y}},getDocumentElement:tV,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e,a=[..."clippingAncestors"===r?t2(t)?[]:function(e,t){let r=t.get(e);if(r)return r;let n=rn(e,[],!1).filter(e=>tU(e)&&"body"!==tq(e)),s=null,a="fixed"===re(e).position,i=a?rr(e):e;for(;tU(i)&&!t9(i);){let t=re(i),r=t6(i);r||"fixed"!==t.position||(s=null),(a?!r&&!s:!r&&"static"===t.position&&!!s&&rH.has(s.position)||tZ(i)&&!r&&function e(t,r){let n=rr(t);return!(n===r||!tU(n)||t9(n))&&("fixed"===re(n).position||e(n,r))}(e,i))?n=n.filter(e=>e!==i):s=t,i=rr(i)}return t.set(e,n),n}(t,this._c):[].concat(r),n],i=a[0],o=a.reduce((e,r)=>{let n=rB(t,r,s);return e.top=rl(n.top,e.top),e.right=ro(n.right,e.right),e.bottom=ro(n.bottom,e.bottom),e.left=rl(n.left,e.left),e},rB(t,i,s));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:rQ,getElementRects:rV,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:r}=rO(e);return{width:t,height:r}},getScale:rI,isElement:tU,isRTL:function(e){return"rtl"===re(e).direction}};function rU(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function rG(e,t,r,n){let s;void 0===n&&(n={});let{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:c=!1}=n,d=r$(e),u=a||i?[...d?rn(d):[],...rn(t)]:[];u.forEach(e=>{a&&e.addEventListener("scroll",r,{passive:!0}),i&&e.addEventListener("resize",r)});let p=d&&l?function(e,t){let r,n=null,s=tV(e);function a(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return function i(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),a();let c=e.getBoundingClientRect(),{left:d,top:u,width:p,height:h}=c;if(o||t(),!p||!h)return;let m=rd(u),x=rd(s.clientWidth-(d+p)),f={rootMargin:-m+"px "+-x+"px "+-rd(s.clientHeight-(u+h))+"px "+-rd(d)+"px",threshold:rl(0,ro(1,l))||1},g=!0;function b(t){let n=t[0].intersectionRatio;if(n!==l){if(!g)return i();n?i(!1,n):r=setTimeout(()=>{i(!1,1e-7)},1e3)}1!==n||rU(c,e.getBoundingClientRect())||i(),g=!1}try{n=new IntersectionObserver(b,{...f,root:s.ownerDocument})}catch(e){n=new IntersectionObserver(b,f)}n.observe(e)}(!0),a}(d,r):null,h=-1,m=null;o&&(m=new ResizeObserver(e=>{let[n]=e;n&&n.target===d&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var e;null==(e=m)||e.observe(t)})),r()}),d&&!c&&m.observe(d),m.observe(t));let x=c?rF(e):null;return c&&function t(){let n=rF(e);x&&!rU(x,n)&&r(),x=n,s=requestAnimationFrame(t)}(),r(),()=>{var e;u.forEach(e=>{a&&e.removeEventListener("scroll",r),i&&e.removeEventListener("resize",r)}),null==p||p(),null==(e=m)||e.disconnect(),m=null,c&&cancelAnimationFrame(s)}}let rX=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:n,placement:s,rects:a,platform:i,elements:o,middlewareData:l}=t,{element:c,padding:d=0}=rm(e,t)||{};if(null==c)return{};let u=rS(d),p={x:r,y:n},h=rw(s),m=rg(h),x=await i.getDimensions(c),f="y"===h,g=f?"clientHeight":"clientWidth",b=a.reference[m]+a.reference[h]-p[h]-a.floating[m],v=p[h]-a.reference[h],w=await (null==i.getOffsetParent?void 0:i.getOffsetParent(c)),y=w?w[g]:0;y&&await (null==i.isElement?void 0:i.isElement(w))||(y=o.floating[g]||a.floating[m]);let j=y/2-x[m]/2-1,N=ro(u[f?"top":"left"],j),_=ro(u[f?"bottom":"right"],j),k=y-x[m]-_,D=y/2-x[m]/2+(b/2-v/2),S=rl(N,ro(D,k)),C=!l.arrow&&null!=rf(s)&&D!==S&&a.reference[m]/2-(D<N?N:_)-x[m]/2<0,M=C?D<N?D-N:D-k:0;return{[h]:p[h]+M,data:{[h]:S,centerOffset:D-S-M,...C&&{alignmentOffset:M}},reset:C}}}),rJ=(e,t,r)=>{let n=new Map,s={platform:rK,...r},a={...s.platform,_c:n};return rT(e,t,{...s,platform:a})};var rZ="undefined"!=typeof document?c.useLayoutEffect:function(){};function r0(e,t){let r,n,s;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(n=r;0!=n--;)if(!r0(e[n],t[n]))return!1;return!0}if((r=(s=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!({}).hasOwnProperty.call(t,s[n]))return!1;for(n=r;0!=n--;){let r=s[n];if(("_owner"!==r||!e.$$typeof)&&!r0(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function r1(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function r2(e,t){let r=r1(e);return Math.round(t*r)/r}function r4(e){let t=c.useRef(e);return rZ(()=>{t.current=e}),t}let r3=e=>({name:"arrow",options:e,fn(t){let{element:r,padding:n}="function"==typeof e?e(t):e;return r&&({}).hasOwnProperty.call(r,"current")?null!=r.current?rX({element:r.current,padding:n}).fn(t):{}:r?rX({element:r,padding:n}).fn(t):{}}}),r5=(e,t)=>({...function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,n;let{x:s,y:a,placement:i,middlewareData:o}=t,l=await rL(t,e);return i===(null==(r=o.offset)?void 0:r.placement)&&null!=(n=o.arrow)&&n.alignmentOffset?{}:{x:s+l.x,y:a+l.y,data:{...l,placement:i}}}}}(e),options:[e,t]}),r6=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,n,s,a,i;let{placement:o,middlewareData:l,rects:c,initialPlacement:d,platform:u,elements:p}=t,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:x,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:b=!0,...v}=rm(e,t);if(null!=(r=l.arrow)&&r.alignmentOffset)return{};let w=rx(o),y=rv(d),j=rx(d)===d,N=await (null==u.isRTL?void 0:u.isRTL(p.floating)),_=x||(j||!b?[rD(d)]:function(e){let t=rD(e);return[ry(e),t,ry(t)]}(d)),k="none"!==g;!x&&k&&_.push(...function(e,t,r,n){let s=rf(e),a=function(e,t,r){switch(e){case"top":case"bottom":if(r)return t?rN:rj;return t?rj:rN;case"left":case"right":return t?r_:rk;default:return[]}}(rx(e),"start"===r,n);return s&&(a=a.map(e=>e+"-"+s),t&&(a=a.concat(a.map(ry)))),a}(d,b,g,N));let D=[d,..._],S=await rE(t,v),C=[],M=(null==(n=l.flip)?void 0:n.overflows)||[];if(h&&C.push(S[w]),m){let e=function(e,t,r){void 0===r&&(r=!1);let n=rf(e),s=rw(e),a=rg(s),i="x"===s?n===(r?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=rD(i)),[i,rD(i)]}(o,c,N);C.push(S[e[0]],S[e[1]])}if(M=[...M,{placement:o,overflows:C}],!C.every(e=>e<=0)){let e=((null==(s=l.flip)?void 0:s.index)||0)+1,t=D[e];if(t&&(!("alignment"===m&&y!==rv(t))||M.every(e=>rv(e.placement)!==y||e.overflows[0]>0)))return{data:{index:e,overflows:M},reset:{placement:t}};let r=null==(a=M.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:a.placement;if(!r)switch(f){case"bestFit":{let e=null==(i=M.filter(e=>{if(k){let t=rv(e.placement);return t===y||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:i[0];e&&(r=e);break}case"initialPlacement":r=d}if(o!==r)return{reset:{placement:r}}}return{}}}}(e),options:[e,t]}),r8=(e,t)=>({...r3(e),options:[e,t]}),r7={...d},r9=!1,ne=0,nt=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+ne++,nr=r7.useId||function(){let[e,t]=c.useState(()=>r9?nt():void 0);return tH(()=>{null==e&&t(nt())},[]),c.useEffect(()=>{r9=!0},[]),e},nn=c.forwardRef(function(e,t){let{context:{placement:r,elements:{floating:n},middlewareData:{arrow:s,shift:a}},width:o=14,height:l=7,tipRadius:d=0,strokeWidth:u=0,staticOffset:p,stroke:h,d:m,style:{transform:x,...f}={},...g}=e,b=nr(),[v,w]=c.useState(!1);if(tH(()=>{n&&"rtl"===re(n).direction&&w(!0)},[n]),!n)return null;let[y,j]=r.split("-"),N="top"===y||"bottom"===y,_=p;(N&&null!=a&&a.x||!N&&null!=a&&a.y)&&(_=null);let k=2*u,D=k/2,S=o/2*(-(d/8)+1),C=l/2*d/4,M=!!m,T=_&&"end"===j?"bottom":"top",E=_&&"end"===j?"right":"left";_&&v&&(E="end"===j?"left":"right");let P=(null==s?void 0:s.x)!=null?_||s.x:"",L=(null==s?void 0:s.y)!=null?_||s.y:"",O=m||"M0,0 H"+o+" L"+(o-S)+","+(l-C)+(" Q"+o/2+","+l+" ")+S+","+(l-C)+" Z",$={top:M?"rotate(180deg)":"",left:M?"rotate(90deg)":"rotate(-90deg)",bottom:M?"":"rotate(180deg)",right:M?"rotate(-90deg)":"rotate(90deg)"}[y];return(0,i.jsxs)("svg",{...g,"aria-hidden":!0,ref:t,width:M?o:o+k,height:o,viewBox:"0 0 "+o+" "+(l>o?l:o),style:{position:"absolute",pointerEvents:"none",[E]:P,[T]:L,[y]:N||M?"100%":"calc(100% - "+k/2+"px)",transform:[$,x].filter(e=>!!e).join(" "),...f},children:[k>0&&(0,i.jsx)("path",{clipPath:"url(#"+b+")",fill:"none",stroke:h,strokeWidth:k+(m?0:1),d:O}),(0,i.jsx)("path",{stroke:k&&!m?g.fill:"none",d:O}),(0,i.jsx)("clipPath",{id:b,children:(0,i.jsx)("rect",{x:-D,y:D*(M?-1:1),width:o+k,height:o})})]})}),ns=c.createContext(null),na=c.createContext(null),ni=()=>{var e;return(null==(e=c.useContext(ns))?void 0:e.id)||null},no=()=>c.useContext(na),nl=()=>{},nc={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap},nd=e=>e&&(e.host||nd(e.parentNode));var nu=function(e,t){return(nu=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function np(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}nu(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var nh=function(){return(nh=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function nm(e,t,r){if(r||2==arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var nx=function(e){var t=e.showTimeSelectOnly,r=e.showTime,n=e.className,s=e.children;return u().createElement("div",{className:n,role:"dialog","aria-label":void 0!==t&&t?"Choose Time":"Choose Date".concat(void 0!==r&&r?" and Time":""),"aria-modal":"true"},s)},nf=function(e,t){var r=(0,c.useRef)(null),n=(0,c.useRef)(e);n.current=e;var s=(0,c.useCallback)(function(e){var s,a=e.composed&&e.composedPath&&e.composedPath().find(function(e){return e instanceof Node})||e.target;!r.current||r.current.contains(a)||t&&a instanceof HTMLElement&&a.classList.contains(t)||null===(s=n.current)||void 0===s||s.call(n,e)},[t]);return(0,c.useEffect)(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),r},ng=function(e){var t=e.children,r=e.onClickOutside,n=e.className,s=e.containerRef,a=e.style,i=nf(r,e.ignoreClass);return u().createElement("div",{className:n,style:a,ref:function(e){i.current=e,s&&(s.current=e)}},t)};function nb(){return"undefined"!=typeof window?window:globalThis}function nv(e){if(null==e)return new Date;var t="string"==typeof e?function(e,t){let r,n;let s=function(e){let t;let r={},n=e.split(y.dateTimeDelimiter);if(n.length>2)return r;if(/:/.test(n[0])?t=n[0]:(r.date=n[0],t=n[1],y.timeZoneDelimiter.test(r.date)&&(r.date=e.split(y.timeZoneDelimiter)[0],t=e.substr(r.date.length,e.length))),t){let e=y.timezone.exec(t);e?(r.time=t.replace(e[1],""),r.timezone=e[1]):r.time=t}return r}(e);if(s.date){let e=function(e,t){let r=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};let s=n[1]?parseInt(n[1]):null,a=n[2]?parseInt(n[2]):null;return{year:null===a?s:100*a,restDateString:e.slice((n[1]||n[2]).length)}}(s.date,(void 0)??2);r=function(e,t){if(null===t)return new Date(NaN);let r=e.match(j);if(!r)return new Date(NaN);let n=!!r[4],s=k(r[1]),a=k(r[2])-1,i=k(r[3]),o=k(r[4]),l=k(r[5])-1;if(n)return o>=1&&o<=53&&l>=0&&l<=6?function(e,t,r){let n=new Date(0);n.setUTCFullYear(e,0,4);let s=n.getUTCDay()||7;return n.setUTCDate(n.getUTCDate()+((t-1)*7+r+1-s)),n}(t,o,l):new Date(NaN);{let e=new Date(0);return a>=0&&a<=11&&i>=1&&i<=(S[a]||(C(t)?29:28))&&s>=1&&s<=(C(t)?366:365)?(e.setUTCFullYear(t,a,Math.max(s,i)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);let a=r.getTime(),i=0;if(s.time&&isNaN(i=function(e){let t=e.match(N);if(!t)return NaN;let r=D(t[1]),n=D(t[2]),s=D(t[3]);return(24===r?0===n&&0===s:s>=0&&s<60&&n>=0&&n<60&&r>=0&&r<25)?36e5*r+6e4*n+1e3*s:NaN}(s.time)))return new Date(NaN);if(s.timezone){if(isNaN(n=function(e){if("Z"===e)return 0;let t=e.match(_);if(!t)return 0;let r="+"===t[1]?-1:1,n=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return s>=0&&s<=59?r*(36e5*n+6e4*s):NaN}(s.timezone)))return new Date(NaN)}else{let e=new Date(a+i),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return new Date(a+i+n)}(e):M(e);return ny(t)?t:new Date}function nw(e,t,r,n,s){void 0===s&&(s=nv());for(var a=nL(r)||nL(nP()),i=Array.isArray(t)?t:[t],o=0;o<i.length;o++){var l=i[o],c=function(e,t,r,n){let s=Object.assign({},E),a=n?.locale??s.locale??Y,i=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0;if(""===t)return""===e?M(r):T(r,NaN);let l={firstWeekContainsDate:i,weekStartsOn:o,locale:a},c=[new K],d=t.match(eX).map(e=>{let t=e[0];return t in W?(0,W[t])(e,a.formatLong):e}).join("").match(eG),u=[];for(let s of d){var p,h;!n?.useAdditionalWeekYearTokens&&(p=s,B.test(p))&&q(s,t,e),!n?.useAdditionalDayOfYearTokens&&(h=s,H.test(h))&&q(s,t,e);let i=s[0],o=eU[i];if(o){let{incompatibleTokens:t}=o;if(Array.isArray(t)){let e=u.find(e=>t.includes(e.token)||e.token===i);if(e)throw RangeError(`The format string mustn't contain \`${e.fullToken}\` and \`${s}\` at the same time`)}else if("*"===o.incompatibleTokens&&u.length>0)throw RangeError(`The format string mustn't contain \`${s}\` and any other token at the same time`);u.push({token:i,fullToken:s});let n=o.run(e,s,a.match,l);if(!n)return T(r,NaN);c.push(n.setter),e=n.rest}else{if(i.match(e1))throw RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");if("''"===s?s="'":"'"===i&&(s=s.match(eJ)[1].replace(eZ,"'")),0!==e.indexOf(s))return T(r,NaN);e=e.slice(s.length)}}if(e.length>0&&e0.test(e))return T(r,NaN);let m=c.map(e=>e.priority).sort((e,t)=>t-e).filter((e,t,r)=>r.indexOf(e)===t).map(e=>c.filter(t=>t.priority===e).sort((e,t)=>t.subPriority-e.subPriority)).map(e=>e[0]),x=M(r);if(isNaN(x.getTime()))return T(r,NaN);let f={};for(let e of m){if(!e.validate(x,l))return T(r,NaN);let t=e.set(x,f,l);Array.isArray(t)?(x=t[0],Object.assign(f,t[1])):x=t}return T(r,x)}(e,l,s,{locale:a,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});if(ny(c)&&(!n||e===nj(c,l,r)))return c}return null}function ny(e,t){return e4(e)&&!e3(e,new Date("1/1/1800"))}function nj(e,t,r){if("en"===r)return td(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=r?nL(r):void 0;return r&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(r,'"].')),td(e,t,{locale:n=n||nL(nP()),useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function nN(e,t){var r=t.dateFormat,n=t.locale,s=Array.isArray(r)&&r.length>0?r[0]:r;return e&&nj(e,s,n)||""}function n_(e,t){var r=t.hour,n=t.minute,s=t.second;return tu(tp(th(e,void 0===s?0:s),void 0===n?0:n),void 0===r?0:r)}function nk(e,t,r){return ec(e,{locale:t?nL(t):nL(nP()),weekStartsOn:r})}function nD(e,t){return e&&t?function(e,t){let r=M(e),n=M(t);return r.getFullYear()===n.getFullYear()}(e,t):!e&&!t}function nS(e,t){return e&&t?function(e,t){let r=M(e),n=M(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}(e,t):!e&&!t}function nC(e,t){return e&&t?+tx(e)==+tx(t):!e&&!t}function nM(e,t){return e&&t?+e5(e)==+e5(t):!e&&!t}function nT(e,t){return e&&t?+M(e)==+M(t):!e&&!t}function nE(e,t,r){var n,s=e5(t),a=tf(r);try{n=tb(e,{start:s,end:a})}catch(e){n=!1}return n}function nP(){return nb().__localeId__}function nL(e){if("string"!=typeof e)return e;var t=nb();return t.__localeData__?t.__localeData__[e]:void 0}function nO(e,t){return nj(tv(nv(),e),"LLLL",t)}function n$(e,t){return nj(tv(nv(),e),"LLL",t)}function nI(e,t){var r=void 0===t?{}:t,n=r.minDate,s=r.maxDate,a=r.excludeDates,i=r.excludeDateIntervals,o=r.includeDates,l=r.includeDateIntervals,c=r.filterDate;return nz(e,{minDate:n,maxDate:s})||a&&a.some(function(t){return t instanceof Date?nM(e,t):nM(e,t.date)})||i&&i.some(function(t){return tb(e,{start:t.start,end:t.end})})||o&&!o.some(function(t){return nM(e,t)})||l&&!l.some(function(t){return tb(e,{start:t.start,end:t.end})})||c&&!c(nv(e))||!1}function nR(e,t){var r=void 0===t?{}:t,n=r.excludeDates,s=r.excludeDateIntervals;return s&&s.length>0?s.some(function(t){return tb(e,{start:t.start,end:t.end})}):n&&n.some(function(t){var r;return t instanceof Date?nM(e,t):nM(e,null!==(r=t.date)&&void 0!==r?r:new Date)})||!1}function nY(e,t){var r=void 0===t?{}:t,n=r.minDate,s=r.maxDate,a=r.excludeDates,i=r.includeDates,o=r.filterDate;return nz(e,{minDate:n?tm(n):void 0,maxDate:s?tg(s):void 0})||(null==a?void 0:a.some(function(t){return nS(e,t instanceof Date?t:t.date)}))||i&&!i.some(function(t){return nS(e,t)})||o&&!o(nv(e))||!1}function nF(e,t,r,n){var s=ty(e),a=tj(e),i=ty(t),o=tj(t),l=ty(n);return s===i&&s===l?a<=r&&r<=o:s<i&&(l===s&&a<=r||l===i&&o>=r||l<i&&l>s)}function nA(e,t){var r=void 0===t?{}:t,n=r.minDate,s=r.maxDate,a=r.excludeDates,i=r.includeDates,o=r.filterDate;return nz(e,{minDate:n,maxDate:s})||(null==a?void 0:a.some(function(t){return nC(e,t instanceof Date?t:t.date)}))||i&&!i.some(function(t){return nC(e,t)})||o&&!o(nv(e))||!1}function nW(e,t,r){if(!t||!r||!e4(t)||!e4(r))return!1;var n=ty(t),s=ty(r);return n<=e&&s>=e}function nH(e,t){var r=void 0===t?{}:t,n=r.minDate,s=r.maxDate,a=r.excludeDates,i=r.includeDates,o=r.filterDate,l=new Date(e,0,1);return nz(l,{minDate:n?e8(n):void 0,maxDate:s?tN(s):void 0})||(null==a?void 0:a.some(function(e){return nD(l,e instanceof Date?e:e.date)}))||i&&!i.some(function(e){return nD(l,e)})||o&&!o(nv(l))||!1}function nB(e,t,r,n){var s=ty(e),a=t_(e),i=ty(t),o=t_(t),l=ty(n);return s===i&&s===l?a<=r&&r<=o:s<i&&(l===s&&a<=r||l===i&&o>=r||l<i&&l>s)}function nz(e,t){var r,n=void 0===t?{}:t,s=n.minDate,a=n.maxDate;return null!==(r=s&&0>e6(e,s)||a&&e6(e,a)>0)&&void 0!==r&&r}function nq(e,t){return t.some(function(t){return tk(t)===tk(e)&&tD(t)===tD(e)&&tS(t)===tS(e)})}function nQ(e,t){var r=void 0===t?{}:t,n=r.excludeTimes,s=r.includeTimes,a=r.filterTime;return n&&nq(e,n)||s&&!nq(e,s)||a&&!a(e)||!1}function nV(e,t){var r,n=t.minTime,s=t.maxTime;if(!n||!s)throw Error("Both minTime and maxTime props required");var a=nv();a=th(a=tp(a=tu(a,tk(e)),tD(e)),tS(e));var i=nv();i=th(i=tp(i=tu(i,tk(n)),tD(n)),tS(n));var o=nv();o=th(o=tp(o=tu(o,tk(s)),tD(s)),tS(s));try{r=!tb(a,{start:i,end:o})}catch(e){r=!1}return r}function nK(e,t){var r=void 0===t?{}:t,n=r.minDate,s=r.includeDates,a=tC(e,-1);return n&&tM(n,a)>0||s&&s.every(function(e){return tM(e,a)>0})||!1}function nU(e,t){var r=void 0===t?{}:t,n=r.maxDate,s=r.includeDates,a=tC(e,1);return n&&tM(a,n)>0||s&&s.every(function(e){return tM(a,e)>0})||!1}function nG(e,t){var r=void 0===t?{}:t,n=r.minDate,s=r.includeDates,a=tE(e,-1);return n&&tP(n,a)>0||s&&s.every(function(e){return tP(e,a)>0})||!1}function nX(e,t){var r=void 0===t?{}:t,n=r.maxDate,s=r.includeDates,a=tE(e,1);return n&&tP(a,n)>0||s&&s.every(function(e){return tP(a,e)>0})||!1}function nJ(e){var t=e.minDate,r=e.includeDates;return r&&t?tL(r.filter(function(e){return e6(e,t)>=0})):r?tL(r):t}function nZ(e){var t=e.maxDate,r=e.includeDates;return r&&t?tO(r.filter(function(e){return 0>=e6(e,t)})):r?tO(r):t}function n0(e,t){void 0===e&&(e=[]),void 0===t&&(t="react-datepicker__day--highlighted");for(var r,n=new Map,s=0,a=e.length;s<a;s++){var i=e[s];if(e2(i)){var o=nj(i,"MM.dd.yyyy"),l=n.get(o)||[];l.includes(t)||(l.push(t),n.set(o,l))}else if("object"==typeof i){var c=null!==(r=Object.keys(i)[0])&&void 0!==r?r:"",d=i[c];if("string"==typeof c&&Array.isArray(d))for(var u=0,p=d.length;u<p;u++){var h=d[u];if(h){var o=nj(h,"MM.dd.yyyy"),l=n.get(o)||[];l.includes(c)||(l.push(c),n.set(o,l))}}}}return n}function n1(e){return e<10?"0".concat(e):"".concat(e)}function n2(e,t){void 0===t&&(t=12);var r=Math.ceil(ty(e)/t)*t;return{startPeriod:r-(t-1),endPeriod:r}}function n4(e){var t=e.getSeconds(),r=e.getMilliseconds();return M(e.getTime()-1e3*t-r)}function n3(e){if(!e2(e))throw Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function n5(e,t){if(!e2(e)||!e2(t))throw Error("Invalid date received");return e3(n3(e),n3(t))}function n6(e){return e.key===s.Space}!function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"}(s||(s={}));var n8=function(e){function t(t){var r=e.call(this,t)||this;return r.inputRef=u().createRef(),r.onTimeChange=function(e){r.setState({time:e});var t,n,s=r.props.date,a=s instanceof Date&&!isNaN(+s)?s:new Date;if(null==e?void 0:e.includes(":")){var i=e.split(":"),o=i[0],l=i[1];a.setHours(Number(o)),a.setMinutes(Number(l))}null===(n=(t=r.props).onChange)||void 0===n||n.call(t,a)},r.renderTimeInput=function(){var e=r.state.time,t=r.props,n=t.date,s=t.timeString,a=t.customTimeInput;return a?(0,c.cloneElement)(a,{date:n,value:e,onChange:r.onTimeChange}):u().createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:r.inputRef,onClick:function(){var e;null===(e=r.inputRef.current)||void 0===e||e.focus()},required:!0,value:e,onChange:function(e){r.onTimeChange(e.target.value||s)}})},r.state={time:r.props.timeString},r}return np(t,e),t.getDerivedStateFromProps=function(e,t){return e.timeString!==t.time?{time:e.timeString}:null},t.prototype.render=function(){return u().createElement("div",{className:"react-datepicker__input-time-container"},u().createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),u().createElement("div",{className:"react-datepicker-time__input-container"},u().createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(c.Component),n7=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dayEl=(0,c.createRef)(),t.handleClick=function(e){!t.isDisabled()&&t.props.onClick&&t.props.onClick(e)},t.handleMouseEnter=function(e){!t.isDisabled()&&t.props.onMouseEnter&&t.props.onMouseEnter(e)},t.handleOnKeyDown=function(e){var r,n;e.key===s.Space&&(e.preventDefault(),e.key=s.Enter),null===(n=(r=t.props).handleOnKeyDown)||void 0===n||n.call(r,e)},t.isSameDay=function(e){return nM(t.props.day,e)},t.isKeyboardSelected=function(){if(t.props.disabledKeyboardNavigation)return!1;var e,r=t.props.selectsMultiple?null===(e=t.props.selectedDates)||void 0===e?void 0:e.some(function(e){return t.isSameDayOrWeek(e)}):t.isSameDayOrWeek(t.props.selected),n=t.props.preSelection&&t.isDisabled(t.props.preSelection);return!r&&t.isSameDayOrWeek(t.props.preSelection)&&!n},t.isDisabled=function(e){return void 0===e&&(e=t.props.day),nI(e,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.isExcluded=function(){return nR(t.props.day,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.isStartOfWeek=function(){return nM(t.props.day,nk(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameWeek=function(e){return t.props.showWeekPicker&&nM(e,nk(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameDayOrWeek=function(e){return t.isSameDay(e)||t.isSameWeek(e)},t.getHighLightedClass=function(){var e=t.props,r=e.day,n=e.highlightDates;if(!n)return!1;var s=nj(r,"MM.dd.yyyy");return n.get(s)},t.getHolidaysClass=function(){var e,r=t.props,n=r.day,s=r.holidays;if(!s)return[void 0];var a=nj(n,"MM.dd.yyyy");return s.has(a)?[null===(e=s.get(a))||void 0===e?void 0:e.className]:[void 0]},t.isInRange=function(){var e=t.props,r=e.day,n=e.startDate,s=e.endDate;return!!n&&!!s&&nE(r,n,s)},t.isInSelectingRange=function(){var e,r=t.props,n=r.day,s=r.selectsStart,a=r.selectsEnd,i=r.selectsRange,o=r.selectsDisabledDaysInRange,l=r.startDate,c=r.endDate,d=null!==(e=t.props.selectingDate)&&void 0!==e?e:t.props.preSelection;return!(!(s||a||i)||!d||!o&&t.isDisabled())&&(s&&c&&(e3(d,c)||nT(d,c))?nE(n,d,c):!!(a&&l&&(tR(d,l)||nT(d,l))||i&&l&&!c&&(tR(d,l)||nT(d,l)))&&nE(n,l,d))},t.isSelectingRangeStart=function(){if(!t.isInSelectingRange())return!1;var e,r=t.props,n=r.day,s=r.startDate,a=r.selectsStart,i=null!==(e=t.props.selectingDate)&&void 0!==e?e:t.props.preSelection;return a?nM(n,i):nM(n,s)},t.isSelectingRangeEnd=function(){if(!t.isInSelectingRange())return!1;var e,r=t.props,n=r.day,s=r.endDate,a=r.selectsEnd,i=r.selectsRange,o=null!==(e=t.props.selectingDate)&&void 0!==e?e:t.props.preSelection;return a||i?nM(n,o):nM(n,s)},t.isRangeStart=function(){var e=t.props,r=e.day,n=e.startDate,s=e.endDate;return!!n&&!!s&&nM(n,r)},t.isRangeEnd=function(){var e=t.props,r=e.day,n=e.startDate,s=e.endDate;return!!n&&!!s&&nM(s,r)},t.isWeekend=function(){var e=M(t.props.day).getDay();return 0===e||6===e},t.isAfterMonth=function(){return void 0!==t.props.month&&(t.props.month+1)%12===tj(t.props.day)},t.isBeforeMonth=function(){return void 0!==t.props.month&&(tj(t.props.day)+1)%12===t.props.month},t.isCurrentDay=function(){return t.isSameDay(nv())},t.isSelected=function(){var e;return t.props.selectsMultiple?null===(e=t.props.selectedDates)||void 0===e?void 0:e.some(function(e){return t.isSameDayOrWeek(e)}):t.isSameDayOrWeek(t.props.selected)},t.getClassNames=function(e){return w("react-datepicker__day",t.props.dayClassName?t.props.dayClassName(e):void 0,"react-datepicker__day--"+nj(t.props.day,"ddd",void 0),{"react-datepicker__day--disabled":t.isDisabled(),"react-datepicker__day--excluded":t.isExcluded(),"react-datepicker__day--selected":t.isSelected(),"react-datepicker__day--keyboard-selected":t.isKeyboardSelected(),"react-datepicker__day--range-start":t.isRangeStart(),"react-datepicker__day--range-end":t.isRangeEnd(),"react-datepicker__day--in-range":t.isInRange(),"react-datepicker__day--in-selecting-range":t.isInSelectingRange(),"react-datepicker__day--selecting-range-start":t.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":t.isSelectingRangeEnd(),"react-datepicker__day--today":t.isCurrentDay(),"react-datepicker__day--weekend":t.isWeekend(),"react-datepicker__day--outside-month":t.isAfterMonth()||t.isBeforeMonth()},t.getHighLightedClass(),t.getHolidaysClass())},t.getAriaLabel=function(){var e=t.props,r=e.day,n=e.ariaLabelPrefixWhenEnabled,s=e.ariaLabelPrefixWhenDisabled,a=t.isDisabled()||t.isExcluded()?void 0===s?"Not available":s:void 0===n?"Choose":n;return"".concat(a," ").concat(nj(r,"PPPP",t.props.locale))},t.getTitle=function(){var e=t.props,r=e.day,n=e.holidays,s=void 0===n?new Map:n,a=e.excludeDates,i=nj(r,"MM.dd.yyyy"),o=[];return s.has(i)&&o.push.apply(o,s.get(i).holidayNames),t.isExcluded()&&o.push(null==a?void 0:a.filter(function(e){return e instanceof Date?nM(e,r):nM(null==e?void 0:e.date,r)}).map(function(e){if(!(e instanceof Date))return null==e?void 0:e.message})),o.join(", ")},t.getTabIndex=function(){var e=t.props.selected,r=t.props.preSelection;return!(t.props.showWeekPicker&&(t.props.showWeekNumber||!t.isStartOfWeek()))&&(t.isKeyboardSelected()||t.isSameDay(e)&&nM(r,e))?0:-1},t.handleFocusDay=function(){var e;t.shouldFocusDay()&&(null===(e=t.dayEl.current)||void 0===e||e.focus({preventScroll:!0}))},t.renderDayContents=function(){return t.props.monthShowsDuplicateDaysEnd&&t.isAfterMonth()||t.props.monthShowsDuplicateDaysStart&&t.isBeforeMonth()?null:t.props.renderDayContents?t.props.renderDayContents(tY(t.props.day),t.props.day):tY(t.props.day)},t.render=function(){return u().createElement("div",{ref:t.dayEl,className:t.getClassNames(t.props.day),onKeyDown:t.handleOnKeyDown,onClick:t.handleClick,onMouseEnter:t.props.usePointerEvent?void 0:t.handleMouseEnter,onPointerEnter:t.props.usePointerEvent?t.handleMouseEnter:void 0,tabIndex:t.getTabIndex(),"aria-label":t.getAriaLabel(),role:"option",title:t.getTitle(),"aria-disabled":t.isDisabled(),"aria-current":t.isCurrentDay()?"date":void 0,"aria-selected":t.isSelected()||t.isInRange()},t.renderDayContents(),""!==t.getTitle()&&u().createElement("span",{className:"overlay"},t.getTitle()))},t}return np(t,e),t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var e=!1;return 0===this.getTabIndex()&&this.isSameDay(this.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(e=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(e=!1),this.isDayActiveElement()&&(e=!0),this.isDuplicateDay()&&(e=!1)),e},t.prototype.isDayActiveElement=function(){var e,t,r;return(null===(t=null===(e=this.props.containerRef)||void 0===e?void 0:e.current)||void 0===t?void 0:t.contains(document.activeElement))&&(null===(r=document.activeElement)||void 0===r?void 0:r.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(c.Component),n9=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.weekNumberEl=(0,c.createRef)(),t.handleClick=function(e){t.props.onClick&&t.props.onClick(e)},t.handleOnKeyDown=function(e){var r,n;e.key===s.Space&&(e.preventDefault(),e.key=s.Enter),null===(n=(r=t.props).handleOnKeyDown)||void 0===n||n.call(r,e)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!nM(t.props.date,t.props.selected)&&nM(t.props.date,t.props.preSelection)},t.getTabIndex=function(){return t.props.showWeekPicker&&t.props.showWeekNumber&&(t.isKeyboardSelected()||nM(t.props.date,t.props.selected)&&nM(t.props.preSelection,t.props.selected))?0:-1},t.handleFocusWeekNumber=function(e){var r=!1;0===t.getTabIndex()&&!(null==e?void 0:e.isInputFocused)&&nM(t.props.date,t.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(r=!0),t.props.inline&&!t.props.shouldFocusDayInline&&(r=!1),t.props.containerRef&&t.props.containerRef.current&&t.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(r=!0)),r&&t.weekNumberEl.current&&t.weekNumberEl.current.focus({preventScroll:!0})},t}return np(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(e){this.handleFocusWeekNumber(e)},t.prototype.render=function(){var e=this.props,r=e.weekNumber,n=e.isWeekDisabled,s=e.ariaLabelPrefix,a=void 0===s?t.defaultProps.ariaLabelPrefix:s,i=e.onClick,o={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!i&&!n,"react-datepicker__week-number--selected":!!i&&nM(this.props.date,this.props.selected)};return u().createElement("div",{ref:this.weekNumberEl,className:w(o),"aria-label":"".concat(a," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},r)},t}(c.Component),se=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.isDisabled=function(e){return nI(e,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.handleDayClick=function(e,t){r.props.onDayClick&&r.props.onDayClick(e,t)},r.handleDayMouseEnter=function(e){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(e)},r.handleWeekClick=function(e,n,s){for(var a,i,o,l=new Date(e),c=0;c<7;c++){var d=new Date(e);if(d.setDate(d.getDate()+c),!r.isDisabled(d)){l=d;break}}"function"==typeof r.props.onWeekSelect&&r.props.onWeekSelect(l,n,s),r.props.showWeekPicker&&r.handleDayClick(l,s),(null!==(a=r.props.shouldCloseOnSelect)&&void 0!==a?a:t.defaultProps.shouldCloseOnSelect)&&(null===(o=(i=r.props).setOpen)||void 0===o||o.call(i,!1))},r.formatWeekNumber=function(e){return r.props.formatWeekNumber?r.props.formatWeekNumber(e):ej(e)},r.isWeekDisabled=function(){for(var e=r.startOfWeek(),t=eC(e,6),n=new Date(e);n<=t;){if(!r.isDisabled(n))return!1;n=eC(n,1)}return!0},r.renderDays=function(){var e=r.startOfWeek(),n=[],s=r.formatWeekNumber(e);if(r.props.showWeekNumber){var a=r.props.onWeekSelect||r.props.showWeekPicker?r.handleWeekClick.bind(r,e,s):void 0;n.push(u().createElement(n9,nh({key:"W"},t.defaultProps,r.props,{weekNumber:s,isWeekDisabled:r.isWeekDisabled(),date:e,onClick:a})))}return n.concat([0,1,2,3,4,5,6].map(function(n){var s=eC(e,n);return u().createElement(n7,nh({},t.defaultProps,r.props,{ariaLabelPrefixWhenEnabled:r.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:r.props.disabledDayAriaLabelPrefix,key:s.valueOf(),day:s,onClick:r.handleDayClick.bind(r,s),onMouseEnter:r.handleDayMouseEnter.bind(r,s)}))}))},r.startOfWeek=function(){return nk(r.props.day,r.props.locale,r.props.calendarStartDay)},r.isKeyboardSelected=function(){return!r.props.disabledKeyboardNavigation&&!nM(r.startOfWeek(),r.props.selected)&&nM(r.startOfWeek(),r.props.preSelection)},r}return np(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e={"react-datepicker__week":!0,"react-datepicker__week--selected":nM(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return u().createElement("div",{className:w(e)},this.renderDays())},t}(c.Component),st={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},sr=((a={})[st.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},a[st.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},a[st.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},a);function sn(e,t){return e?st.FOUR_COLUMNS:t?st.TWO_COLUMNS:st.THREE_COLUMNS}var ss=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MONTH_REFS=nm([],Array(12),!0).map(function(){return(0,c.createRef)()}),t.QUARTER_REFS=nm([],[,,,,],!0).map(function(){return(0,c.createRef)()}),t.isDisabled=function(e){return nI(e,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.isExcluded=function(e){return nR(e,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.handleDayClick=function(e,r){var n,s;null===(s=(n=t.props).onDayClick)||void 0===s||s.call(n,e,r,t.props.orderInDisplay)},t.handleDayMouseEnter=function(e){var r,n;null===(n=(r=t.props).onDayMouseEnter)||void 0===n||n.call(r,e)},t.handleMouseLeave=function(){var e,r;null===(r=(e=t.props).onMouseLeave)||void 0===r||r.call(e)},t.isRangeStartMonth=function(e){var r=t.props,n=r.day,s=r.startDate,a=r.endDate;return!!s&&!!a&&nS(tv(n,e),s)},t.isRangeStartQuarter=function(e){var r=t.props,n=r.day,s=r.startDate,a=r.endDate;return!!s&&!!a&&nC(tw(n,e),s)},t.isRangeEndMonth=function(e){var r=t.props,n=r.day,s=r.startDate,a=r.endDate;return!!s&&!!a&&nS(tv(n,e),a)},t.isRangeEndQuarter=function(e){var r=t.props,n=r.day,s=r.startDate,a=r.endDate;return!!s&&!!a&&nC(tw(n,e),a)},t.isInSelectingRangeMonth=function(e){var r,n=t.props,s=n.day,a=n.selectsStart,i=n.selectsEnd,o=n.selectsRange,l=n.startDate,c=n.endDate,d=null!==(r=t.props.selectingDate)&&void 0!==r?r:t.props.preSelection;return(!!a||!!i||!!o)&&!!d&&(a&&c?nF(d,c,e,s):(!!i&&!!l||!!o&&!!l&&!c)&&nF(l,d,e,s))},t.isSelectingMonthRangeStart=function(e){if(!t.isInSelectingRangeMonth(e))return!1;var r,n=t.props,s=n.day,a=n.startDate,i=n.selectsStart,o=tv(s,e),l=null!==(r=t.props.selectingDate)&&void 0!==r?r:t.props.preSelection;return i?nS(o,l):nS(o,a)},t.isSelectingMonthRangeEnd=function(e){if(!t.isInSelectingRangeMonth(e))return!1;var r,n=t.props,s=n.day,a=n.endDate,i=n.selectsEnd,o=n.selectsRange,l=tv(s,e),c=null!==(r=t.props.selectingDate)&&void 0!==r?r:t.props.preSelection;return i||o?nS(l,c):nS(l,a)},t.isInSelectingRangeQuarter=function(e){var r,n=t.props,s=n.day,a=n.selectsStart,i=n.selectsEnd,o=n.selectsRange,l=n.startDate,c=n.endDate,d=null!==(r=t.props.selectingDate)&&void 0!==r?r:t.props.preSelection;return(!!a||!!i||!!o)&&!!d&&(a&&c?nB(d,c,e,s):(!!i&&!!l||!!o&&!!l&&!c)&&nB(l,d,e,s))},t.isWeekInMonth=function(e){var r=t.props.day,n=eC(e,6);return nS(e,r)||nS(n,r)},t.isCurrentMonth=function(e,t){return ty(e)===ty(nv())&&t===tj(nv())},t.isCurrentQuarter=function(e,t){return ty(e)===ty(nv())&&t===t_(nv())},t.isSelectedMonth=function(e,t,r){return tj(r)===t&&ty(e)===ty(r)},t.isSelectMonthInList=function(e,r,n){return n.some(function(n){return t.isSelectedMonth(e,r,n)})},t.isSelectedQuarter=function(e,t,r){return t_(e)===t&&ty(e)===ty(r)},t.isMonthSelected=function(){var e=t.props,r=e.day,n=e.selected,s=e.selectedDates,a=e.selectsMultiple,i=tj(r);return a?null==s?void 0:s.some(function(e){return t.isSelectedMonth(r,i,e)}):!!n&&t.isSelectedMonth(r,i,n)},t.renderWeeks=function(){for(var e,r,n=[],s=t.props.fixedHeight,a=0,i=!1,o=nk(tm(t.props.day),t.props.locale,t.props.calendarStartDay),l=t.props.selected?(e=t.props.selected,t.props.showWeekPicker?nk(e,t.props.locale,t.props.calendarStartDay):t.props.selected):void 0,c=t.props.preSelection?(r=t.props.preSelection,t.props.showWeekPicker?nk(r,t.props.locale,t.props.calendarStartDay):t.props.preSelection):void 0;n.push(u().createElement(se,nh({},t.props,{ariaLabelPrefix:t.props.weekAriaLabelPrefix,key:a,day:o,month:tj(t.props.day),onDayClick:t.handleDayClick,onDayMouseEnter:t.handleDayMouseEnter,selected:l,preSelection:c,showWeekNumber:t.props.showWeekNumbers}))),!i;){a++,o=eC(o,7);var d=s&&a>=6,p=!s&&!t.isWeekInMonth(o);if(d||p){if(t.props.peekNextMonth)i=!0;else break}}return n},t.onMonthClick=function(e,r){var n=t.isMonthDisabledForLabelDate(r),s=n.isDisabled,a=n.labelDate;s||t.handleDayClick(tm(a),e)},t.onMonthMouseEnter=function(e){var r=t.isMonthDisabledForLabelDate(e),n=r.isDisabled,s=r.labelDate;n||t.handleDayMouseEnter(tm(s))},t.handleMonthNavigation=function(e,r){var n,s,a,i;null===(s=(n=t.props).setPreSelection)||void 0===s||s.call(n,r),null===(i=null===(a=t.MONTH_REFS[e])||void 0===a?void 0:a.current)||void 0===i||i.focus()},t.handleKeyboardNavigation=function(e,r,n){var a,i=t.props,o=i.selected,l=i.preSelection,c=i.setPreSelection,d=i.minDate,u=i.maxDate,p=i.showFourColumnMonthYearPicker,h=i.showTwoColumnMonthYearPicker;if(l){var m=sn(p,h),x=t.getVerticalOffset(m),f=null===(a=sr[m])||void 0===a?void 0:a.grid,g=function(e,t,r){var n,a,i=t,o=r;switch(e){case s.ArrowRight:i=tC(t,1),o=11===r?0:r+1;break;case s.ArrowLeft:i=tC(t,-1),o=0===r?11:r-1;break;case s.ArrowUp:i=tC(t,-x),o=(null===(n=null==f?void 0:f[0])||void 0===n?void 0:n.includes(r))?r+12-x:r-x;break;case s.ArrowDown:i=tC(t,x),o=(null===(a=null==f?void 0:f[f.length-1])||void 0===a?void 0:a.includes(r))?r-12+x:r+x}return{newCalculatedDate:i,newCalculatedMonth:o}};if(r===s.Enter){t.isMonthDisabled(n)||(t.onMonthClick(e,n),null==c||c(o));return}var b=function(e,r,n){for(var a=e,i=!1,o=0,l=g(a,r,n),c=l.newCalculatedDate,p=l.newCalculatedMonth;!i;){if(o>=40){c=r,p=n;break}if(d&&c<d){var h=g(a=s.ArrowRight,c,p);c=h.newCalculatedDate,p=h.newCalculatedMonth}if(u&&c>u){var h=g(a=s.ArrowLeft,c,p);c=h.newCalculatedDate,p=h.newCalculatedMonth}if(function(e,t){var r=void 0===t?{}:t,n=r.minDate,s=r.maxDate,a=r.excludeDates,i=r.includeDates;return nz(e,{minDate:n,maxDate:s})||a&&a.some(function(t){return nS(t instanceof Date?t:t.date,e)})||i&&!i.some(function(t){return nS(t,e)})||!1}(c,t.props)){var h=g(a,c,p);c=h.newCalculatedDate,p=h.newCalculatedMonth}else i=!0;o++}return{newCalculatedDate:c,newCalculatedMonth:p}}(r,l,n),v=b.newCalculatedDate,w=b.newCalculatedMonth;switch(r){case s.ArrowRight:case s.ArrowLeft:case s.ArrowUp:case s.ArrowDown:t.handleMonthNavigation(w,v)}}},t.getVerticalOffset=function(e){var t,r;return null!==(r=null===(t=sr[e])||void 0===t?void 0:t.verticalNavigationOffset)&&void 0!==r?r:0},t.onMonthKeyDown=function(e,r){var n=t.props,a=n.disabledKeyboardNavigation,i=n.handleOnMonthKeyDown,o=e.key;o!==s.Tab&&e.preventDefault(),a||t.handleKeyboardNavigation(e,o,r),i&&i(e)},t.onQuarterClick=function(e,r){var n=tw(t.props.day,r);nA(n,t.props)||t.handleDayClick(tx(n),e)},t.onQuarterMouseEnter=function(e){var r=tw(t.props.day,e);nA(r,t.props)||t.handleDayMouseEnter(tx(r))},t.handleQuarterNavigation=function(e,r){var n,s,a,i;t.isDisabled(r)||t.isExcluded(r)||(null===(s=(n=t.props).setPreSelection)||void 0===s||s.call(n,r),null===(i=null===(a=t.QUARTER_REFS[e-1])||void 0===a?void 0:a.current)||void 0===i||i.focus())},t.onQuarterKeyDown=function(e,r){var n,a,i=e.key;if(!t.props.disabledKeyboardNavigation)switch(i){case s.Enter:t.onQuarterClick(e,r),null===(a=(n=t.props).setPreSelection)||void 0===a||a.call(n,t.props.selected);break;case s.ArrowRight:if(!t.props.preSelection)break;t.handleQuarterNavigation(4===r?1:r+1,tC(t.props.preSelection,3));break;case s.ArrowLeft:if(!t.props.preSelection)break;t.handleQuarterNavigation(1===r?4:r-1,tC(t.props.preSelection,-3))}},t.isMonthDisabledForLabelDate=function(e){var r,n=t.props,s=n.day,a=n.minDate,i=n.maxDate,o=n.excludeDates,l=n.includeDates,c=tv(s,e);return{isDisabled:null!==(r=(a||i||o||l)&&nY(c,t.props))&&void 0!==r&&r,labelDate:c}},t.isMonthDisabled=function(e){return t.isMonthDisabledForLabelDate(e).isDisabled},t.getMonthClassNames=function(e){var r=t.props,n=r.day,s=r.startDate,a=r.endDate,i=r.preSelection,o=r.monthClassName,l=o?o(tv(n,e)):void 0,c=t.getSelection();return w("react-datepicker__month-text","react-datepicker__month-".concat(e),l,{"react-datepicker__month-text--disabled":t.isMonthDisabled(e),"react-datepicker__month-text--selected":c?t.isSelectMonthInList(n,e,c):void 0,"react-datepicker__month-text--keyboard-selected":!t.props.disabledKeyboardNavigation&&i&&t.isSelectedMonth(n,e,i)&&!t.isMonthSelected()&&!t.isMonthDisabled(e),"react-datepicker__month-text--in-selecting-range":t.isInSelectingRangeMonth(e),"react-datepicker__month-text--in-range":s&&a?nF(s,a,e,n):void 0,"react-datepicker__month-text--range-start":t.isRangeStartMonth(e),"react-datepicker__month-text--range-end":t.isRangeEndMonth(e),"react-datepicker__month-text--selecting-range-start":t.isSelectingMonthRangeStart(e),"react-datepicker__month-text--selecting-range-end":t.isSelectingMonthRangeEnd(e),"react-datepicker__month-text--today":t.isCurrentMonth(n,e)})},t.getTabIndex=function(e){if(null==t.props.preSelection)return"-1";var r=tj(t.props.preSelection),n=t.isMonthDisabledForLabelDate(r).isDisabled;return e!==r||n||t.props.disabledKeyboardNavigation?"-1":"0"},t.getQuarterTabIndex=function(e){if(null==t.props.preSelection)return"-1";var r=t_(t.props.preSelection),n=nA(t.props.day,t.props);return e!==r||n||t.props.disabledKeyboardNavigation?"-1":"0"},t.getAriaLabel=function(e){var r=t.props,n=r.chooseDayAriaLabelPrefix,s=r.disabledDayAriaLabelPrefix,a=r.day,i=r.locale,o=tv(a,e),l=t.isDisabled(o)||t.isExcluded(o)?void 0===s?"Not available":s:void 0===n?"Choose":n;return"".concat(l," ").concat(nj(o,"MMMM yyyy",i))},t.getQuarterClassNames=function(e){var r=t.props,n=r.day,s=r.startDate,a=r.endDate,i=r.selected,o=r.minDate,l=r.maxDate,c=r.excludeDates,d=r.includeDates,u=r.filterDate,p=r.preSelection,h=r.disabledKeyboardNavigation,m=(o||l||c||d||u)&&nA(tw(n,e),t.props);return w("react-datepicker__quarter-text","react-datepicker__quarter-".concat(e),{"react-datepicker__quarter-text--disabled":m,"react-datepicker__quarter-text--selected":i?t.isSelectedQuarter(n,e,i):void 0,"react-datepicker__quarter-text--keyboard-selected":!h&&p&&t.isSelectedQuarter(n,e,p)&&!m,"react-datepicker__quarter-text--in-selecting-range":t.isInSelectingRangeQuarter(e),"react-datepicker__quarter-text--in-range":s&&a?nB(s,a,e,n):void 0,"react-datepicker__quarter-text--range-start":t.isRangeStartQuarter(e),"react-datepicker__quarter-text--range-end":t.isRangeEndQuarter(e),"react-datepicker__quarter-text--today":t.isCurrentQuarter(n,e)})},t.getMonthContent=function(e){var r=t.props,n=r.showFullMonthYearPicker,s=r.renderMonthContent,a=r.locale,i=r.day,o=n$(e,a),l=nO(e,a);return s?s(e,o,l,i):n?l:o},t.getQuarterContent=function(e){var r,n=t.props,s=n.renderQuarterContent,a=n.locale,i=nj(tw(nv(),e),"QQQ",a);return null!==(r=null==s?void 0:s(e,i))&&void 0!==r?r:i},t.renderMonths=function(){var e,r=t.props,n=r.showTwoColumnMonthYearPicker,a=r.showFourColumnMonthYearPicker,i=r.day,o=r.selected,l=null===(e=sr[sn(a,n)])||void 0===e?void 0:e.grid;return null==l?void 0:l.map(function(e,r){return u().createElement("div",{className:"react-datepicker__month-wrapper",key:r},e.map(function(e,r){return u().createElement("div",{ref:t.MONTH_REFS[e],key:r,onClick:function(r){t.onMonthClick(r,e)},onKeyDown:function(r){n6(r)&&(r.preventDefault(),r.key=s.Enter),t.onMonthKeyDown(r,e)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onMonthMouseEnter(e)},onPointerEnter:t.props.usePointerEvent?function(){return t.onMonthMouseEnter(e)}:void 0,tabIndex:Number(t.getTabIndex(e)),className:t.getMonthClassNames(e),"aria-disabled":t.isMonthDisabled(e),role:"option","aria-label":t.getAriaLabel(e),"aria-current":t.isCurrentMonth(i,e)?"date":void 0,"aria-selected":o?t.isSelectedMonth(i,e,o):void 0},t.getMonthContent(e))}))})},t.renderQuarters=function(){var e=t.props,r=e.day,n=e.selected;return u().createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map(function(e,s){return u().createElement("div",{key:s,ref:t.QUARTER_REFS[s],role:"option",onClick:function(r){t.onQuarterClick(r,e)},onKeyDown:function(r){t.onQuarterKeyDown(r,e)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onQuarterMouseEnter(e)},onPointerEnter:t.props.usePointerEvent?function(){return t.onQuarterMouseEnter(e)}:void 0,className:t.getQuarterClassNames(e),"aria-selected":n?t.isSelectedQuarter(r,e,n):void 0,tabIndex:Number(t.getQuarterTabIndex(e)),"aria-current":t.isCurrentQuarter(r,e)?"date":void 0},t.getQuarterContent(e))}))},t.getClassNames=function(){var e=t.props,r=e.selectingDate,n=e.selectsStart,s=e.selectsEnd;return w("react-datepicker__month",{"react-datepicker__month--selecting-range":r&&(n||s)},{"react-datepicker__monthPicker":e.showMonthYearPicker},{"react-datepicker__quarterPicker":e.showQuarterYearPicker},{"react-datepicker__weekPicker":e.showWeekPicker})},t}return np(t,e),t.prototype.getSelection=function(){var e=this.props,t=e.selected,r=e.selectedDates;return e.selectsMultiple?r:t?[t]:void 0},t.prototype.render=function(){var e=this.props,t=e.showMonthYearPicker,r=e.showQuarterYearPicker,n=e.day,s=e.ariaLabelPrefix,a=void 0===s?"Month ":s,i=a?a.trim()+" ":"";return u().createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(i).concat(nj(n,"MMMM, yyyy",this.props.locale)),role:"listbox"},t?this.renderMonths():r?this.renderQuarters():this.renderWeeks())},t}(c.Component),sa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isSelectedMonth=function(e){return t.props.month===e},t.renderOptions=function(){return t.props.monthNames.map(function(e,r){return u().createElement("div",{className:t.isSelectedMonth(r)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:e,onClick:t.onChange.bind(t,r),"aria-selected":t.isSelectedMonth(r)?"true":void 0},t.isSelectedMonth(r)?u().createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",e)})},t.onChange=function(e){return t.props.onChange(e)},t.handleClickOutside=function(){return t.props.onCancel()},t}return np(t,e),t.prototype.render=function(){return u().createElement(ng,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(c.Component),si=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(e){return e.map(function(e,t){return u().createElement("option",{key:e,value:t},e)})},t.renderSelectMode=function(e){return u().createElement("select",{value:t.props.month,className:"react-datepicker__month-select",onChange:function(e){return t.onChange(parseInt(e.target.value))}},t.renderSelectOptions(e))},t.renderReadView=function(e,r){return u().createElement("div",{key:"read",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:t.toggleDropdown},u().createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),u().createElement("span",{className:"react-datepicker__month-read-view--selected-month"},r[t.props.month]))},t.renderDropdown=function(e){return u().createElement(sa,nh({key:"dropdown"},t.props,{monthNames:e,onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(e){var r=t.state.dropdownVisible,n=[t.renderReadView(!r,e)];return r&&n.unshift(t.renderDropdown(e)),n},t.onChange=function(e){t.toggleDropdown(),e!==t.props.month&&t.props.onChange(e)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return np(t,e),t.prototype.render=function(){var e,t=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(e){return n$(e,t.props.locale)}:function(e){return nO(e,t.props.locale)});switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode(r);break;case"select":e=this.renderSelectMode(r)}return u().createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},e)},t}(c.Component),so=function(e){function t(t){var r=e.call(this,t)||this;return r.renderOptions=function(){return r.state.monthYearsList.map(function(e){var t=tF(e),n=nD(r.props.date,e)&&nS(r.props.date,e);return u().createElement("div",{className:n?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:t,onClick:r.onChange.bind(r,t),"aria-selected":n?"true":void 0},n?u().createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",nj(e,r.props.dateFormat,r.props.locale))})},r.onChange=function(e){return r.props.onChange(e)},r.handleClickOutside=function(){r.props.onCancel()},r.state={monthYearsList:function(e,t){for(var r=[],n=tm(e),s=tm(t);!tR(n,s);)r.push(nv(n)),n=tC(n,1);return r}(r.props.minDate,r.props.maxDate)},r}return np(t,e),t.prototype.render=function(){var e=w({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return u().createElement(ng,{className:e,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(c.Component),sl=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var e=tm(t.props.minDate),r=tm(t.props.maxDate),n=[];!tR(e,r);){var s=tF(e);n.push(u().createElement("option",{key:s,value:s},nj(e,t.props.dateFormat,t.props.locale))),e=tC(e,1)}return n},t.onSelectChange=function(e){t.onChange(parseInt(e.target.value))},t.renderSelectMode=function(){return u().createElement("select",{value:tF(tm(t.props.date)),className:"react-datepicker__month-year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(e){var r=nj(t.props.date,t.props.dateFormat,t.props.locale);return u().createElement("div",{key:"read",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:t.toggleDropdown},u().createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),u().createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},r))},t.renderDropdown=function(){return u().createElement(so,nh({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var e=t.state.dropdownVisible,r=[t.renderReadView(!e)];return e&&r.unshift(t.renderDropdown()),r},t.onChange=function(e){t.toggleDropdown();var r=nv(e);nD(t.props.date,r)&&nS(t.props.date,r)||t.props.onChange(r)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return np(t,e),t.prototype.render=function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return u().createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},e)},t}(c.Component),sc=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.state={height:null},r.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var e,n,s;r.list&&(r.list.scrollTop=null!==(s=r.centerLi&&t.calcCenterPosition(r.props.monthRef?r.props.monthRef.clientHeight-(null!==(n=null===(e=r.header)||void 0===e?void 0:e.clientHeight)&&void 0!==n?n:0):r.list.clientHeight,r.centerLi))&&void 0!==s?s:0)})},r.handleClick=function(e){var t,n;(r.props.minTime||r.props.maxTime)&&nV(e,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&nQ(e,r.props)||null===(n=(t=r.props).onChange)||void 0===n||n.call(t,e)},r.isSelectedTime=function(e){return r.props.selected&&n4(r.props.selected).getTime()===n4(e).getTime()},r.isDisabledTime=function(e){return(r.props.minTime||r.props.maxTime)&&nV(e,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&nQ(e,r.props)},r.liClasses=function(e){var n,s=["react-datepicker__time-list-item",r.props.timeClassName?r.props.timeClassName(e):void 0];return r.isSelectedTime(e)&&s.push("react-datepicker__time-list-item--selected"),r.isDisabledTime(e)&&s.push("react-datepicker__time-list-item--disabled"),r.props.injectTimes&&(3600*tk(e)+60*tD(e)+tS(e))%((null!==(n=r.props.intervals)&&void 0!==n?n:t.defaultProps.intervals)*60)!=0&&s.push("react-datepicker__time-list-item--injected"),s.join(" ")},r.handleOnKeyDown=function(e,t){var n,a;e.key===s.Space&&(e.preventDefault(),e.key=s.Enter),(e.key===s.ArrowUp||e.key===s.ArrowLeft)&&e.target instanceof HTMLElement&&e.target.previousSibling&&(e.preventDefault(),e.target.previousSibling instanceof HTMLElement&&e.target.previousSibling.focus()),(e.key===s.ArrowDown||e.key===s.ArrowRight)&&e.target instanceof HTMLElement&&e.target.nextSibling&&(e.preventDefault(),e.target.nextSibling instanceof HTMLElement&&e.target.nextSibling.focus()),e.key===s.Enter&&r.handleClick(t),null===(a=(n=r.props).handleOnKeyDown)||void 0===a||a.call(n,e)},r.renderTimes=function(){for(var e,n,s=[],a="string"==typeof r.props.format?r.props.format:"p",i=null!==(n=r.props.intervals)&&void 0!==n?n:t.defaultProps.intervals,o=r.props.selected||r.props.openToDate||nv(),l=e5(o),c=r.props.injectTimes&&r.props.injectTimes.sort(function(e,t){return e.getTime()-t.getTime()}),d=60*(e=new Date(o.getFullYear(),o.getMonth(),o.getDate()),Math.round((+new Date(o.getFullYear(),o.getMonth(),o.getDate(),24)-+e)/36e5))/i,p=0;p<d;p++){var h=tI(l,p*i);if(s.push(h),c){var m=function(e,t,r,n,s){for(var a=s.length,i=[],o=0;o<a;o++){var l=e,c=s[o];c&&(l=tI(l=t$(l,36e5*tk(c)),tD(c)),l=t$(l,1e3*tS(c)));var d=tI(e,(r+1)*n);tR(l,t)&&e3(l,d)&&void 0!=c&&i.push(c)}return i}(l,h,p,i,c);s=s.concat(m)}}var x=s.reduce(function(e,t){return t.getTime()<=o.getTime()?t:e},s[0]);return s.map(function(e){return u().createElement("li",{key:e.valueOf(),onClick:r.handleClick.bind(r,e),className:r.liClasses(e),ref:function(t){e===x&&(r.centerLi=t)},onKeyDown:function(t){r.handleOnKeyDown(t,e)},tabIndex:e===x?0:-1,role:"option","aria-selected":r.isSelectedTime(e)?"true":void 0,"aria-disabled":r.isDisabledTime(e)?"true":void 0},nj(e,a,r.props.locale))})},r.renderTimeCaption=function(){return!1===r.props.showTimeCaption?u().createElement(u().Fragment,null):u().createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(r.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(e){r.header=e}},u().createElement("div",{className:"react-datepicker-time__header"},r.props.timeCaption))},r}return np(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var e;null===(e=this.resizeObserver)||void 0===e||e.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var e=this,t=this.props.monthRef;this.updateContainerHeight(),t&&(this.resizeObserver=new ResizeObserver(function(){e.updateContainerHeight()}),this.resizeObserver.observe(t))},t.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var e,r=this,n=this.state.height;return u().createElement("div",{className:"react-datepicker__time-container ".concat((null!==(e=this.props.todayButton)&&void 0!==e?e:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),u().createElement("div",{className:"react-datepicker__time"},u().createElement("div",{className:"react-datepicker__time-box"},u().createElement("ul",{className:"react-datepicker__time-list",ref:function(e){r.list=e},style:n?{height:n}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(e,t){return t.offsetTop-(e/2-t.clientHeight/2)},t}(c.Component),sd=function(e){function t(t){var r=e.call(this,t)||this;return r.YEAR_REFS=nm([],Array(r.props.yearItemNumber),!0).map(function(){return(0,c.createRef)()}),r.isDisabled=function(e){return nI(e,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(e){return nR(e,{excludeDates:r.props.excludeDates})},r.selectingDate=function(){var e;return null!==(e=r.props.selectingDate)&&void 0!==e?e:r.props.preSelection},r.updateFocusOnPaginate=function(e){window.requestAnimationFrame(function(){var t,n;null===(n=null===(t=r.YEAR_REFS[e])||void 0===t?void 0:t.current)||void 0===n||n.focus()})},r.handleYearClick=function(e,t){r.props.onDayClick&&r.props.onDayClick(e,t)},r.handleYearNavigation=function(e,t){var n,s,a,i,o=r.props,l=o.date,c=o.yearItemNumber;if(void 0!==l&&void 0!==c){var d=n2(l,c).startPeriod;r.isDisabled(t)||r.isExcluded(t)||(null===(s=(n=r.props).setPreSelection)||void 0===s||s.call(n,t),e-d<0?r.updateFocusOnPaginate(c-(d-e)):e-d>=c?r.updateFocusOnPaginate(Math.abs(c-(e-d))):null===(i=null===(a=r.YEAR_REFS[e-d])||void 0===a?void 0:a.current)||void 0===i||i.focus())}},r.isSameDay=function(e,t){return nM(e,t)},r.isCurrentYear=function(e){return e===ty(nv())},r.isRangeStart=function(e){return r.props.startDate&&r.props.endDate&&nD(tA(nv(),e),r.props.startDate)},r.isRangeEnd=function(e){return r.props.startDate&&r.props.endDate&&nD(tA(nv(),e),r.props.endDate)},r.isInRange=function(e){return nW(e,r.props.startDate,r.props.endDate)},r.isInSelectingRange=function(e){var t=r.props,n=t.selectsStart,s=t.selectsEnd,a=t.selectsRange,i=t.startDate,o=t.endDate;return!!((n||s||a)&&r.selectingDate())&&(n&&o?nW(e,r.selectingDate(),o):(!!s&&!!i||!!a&&!!i&&!o)&&nW(e,i,r.selectingDate()))},r.isSelectingRangeStart=function(e){if(!r.isInSelectingRange(e))return!1;var t,n=r.props,s=n.startDate,a=n.selectsStart,i=tA(nv(),e);return a?nD(i,null!==(t=r.selectingDate())&&void 0!==t?t:null):nD(i,null!=s?s:null)},r.isSelectingRangeEnd=function(e){if(!r.isInSelectingRange(e))return!1;var t,n=r.props,s=n.endDate,a=n.selectsEnd,i=n.selectsRange,o=tA(nv(),e);return a||i?nD(o,null!==(t=r.selectingDate())&&void 0!==t?t:null):nD(o,null!=s?s:null)},r.isKeyboardSelected=function(e){if(void 0!==r.props.date&&null!=r.props.selected&&null!=r.props.preSelection){var t=r.props,n=t.minDate,s=t.maxDate,a=t.excludeDates,i=t.includeDates,o=t.filterDate,l=e8(tA(r.props.date,e)),c=(n||s||a||i||o)&&nH(e,r.props);return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!nM(l,e8(r.props.selected))&&nM(l,e8(r.props.preSelection))&&!c}},r.isSelectedYear=function(e){var t=r.props,n=t.selectsMultiple,s=t.selected,a=t.selectedDates;return n?null==a?void 0:a.some(function(t){return e===ty(t)}):!!s&&e===ty(s)},r.onYearClick=function(e,t){var n=r.props.date;void 0!==n&&r.handleYearClick(e8(tA(n,t)),e)},r.onYearKeyDown=function(e,t){var n,a,i=e.key,o=r.props,l=o.date,c=o.yearItemNumber,d=o.handleOnKeyDown;if(i!==s.Tab&&e.preventDefault(),!r.props.disabledKeyboardNavigation)switch(i){case s.Enter:if(null==r.props.selected)break;r.onYearClick(e,t),null===(a=(n=r.props).setPreSelection)||void 0===a||a.call(n,r.props.selected);break;case s.ArrowRight:if(null==r.props.preSelection)break;r.handleYearNavigation(t+1,tE(r.props.preSelection,1));break;case s.ArrowLeft:if(null==r.props.preSelection)break;r.handleYearNavigation(t-1,tE(r.props.preSelection,-1));break;case s.ArrowUp:if(void 0===l||void 0===c||null==r.props.preSelection)break;var u=n2(l,c).startPeriod,p=3,h=t-3;if(h<u){var m=c%p;t>=u&&t<u+m?p=m:p+=m,h=t-p}r.handleYearNavigation(h,tE(r.props.preSelection,-p));break;case s.ArrowDown:if(void 0===l||void 0===c||null==r.props.preSelection)break;var x=n2(l,c).endPeriod,p=3,h=t+3;if(h>x){var m=c%p;t<=x&&t>x-m?p=m:p+=m,h=t+p}r.handleYearNavigation(h,tE(r.props.preSelection,p))}d&&d(e)},r.getYearClassNames=function(e){var t=r.props,n=t.date,s=t.minDate,a=t.maxDate,i=t.excludeDates,o=t.includeDates,l=t.filterDate,c=t.yearClassName;return w("react-datepicker__year-text","react-datepicker__year-".concat(e),n?null==c?void 0:c(tA(n,e)):void 0,{"react-datepicker__year-text--selected":r.isSelectedYear(e),"react-datepicker__year-text--disabled":(s||a||i||o||l)&&nH(e,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(e),"react-datepicker__year-text--range-start":r.isRangeStart(e),"react-datepicker__year-text--range-end":r.isRangeEnd(e),"react-datepicker__year-text--in-range":r.isInRange(e),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(e),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(e),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(e),"react-datepicker__year-text--today":r.isCurrentYear(e)})},r.getYearTabIndex=function(e){if(r.props.disabledKeyboardNavigation||null==r.props.preSelection)return"-1";var t=ty(r.props.preSelection),n=nH(e,r.props);return e!==t||n?"-1":"0"},r.getYearContent=function(e){return r.props.renderYearContent?r.props.renderYearContent(e):e},r}return np(t,e),t.prototype.render=function(){var e=this,t=[],r=this.props,n=r.date,a=r.yearItemNumber,i=r.onYearMouseEnter,o=r.onYearMouseLeave;if(void 0===n)return null;for(var l=n2(n,a),c=l.startPeriod,d=l.endPeriod,p=function(r){t.push(u().createElement("div",{ref:h.YEAR_REFS[r-c],onClick:function(t){e.onYearClick(t,r)},onKeyDown:function(t){n6(t)&&(t.preventDefault(),t.key=s.Enter),e.onYearKeyDown(t,r)},tabIndex:Number(h.getYearTabIndex(r)),className:h.getYearClassNames(r),onMouseEnter:h.props.usePointerEvent?void 0:function(e){return i(e,r)},onPointerEnter:h.props.usePointerEvent?function(e){return i(e,r)}:void 0,onMouseLeave:h.props.usePointerEvent?void 0:function(e){return o(e,r)},onPointerLeave:h.props.usePointerEvent?function(e){return o(e,r)}:void 0,key:r,"aria-current":h.isCurrentYear(r)?"date":void 0},h.getYearContent(r)))},h=this,m=c;m<=d;m++)p(m);return u().createElement("div",{className:"react-datepicker__year"},u().createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},t))},t}(c.Component),su=function(e){function t(t){var r=e.call(this,t)||this;r.renderOptions=function(){var e=r.props.year,t=r.state.yearsList.map(function(t){return u().createElement("div",{className:e===t?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:t,onClick:r.onChange.bind(r,t),"aria-selected":e===t?"true":void 0},e===t?u().createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",t)}),n=r.props.minDate?ty(r.props.minDate):null,s=r.props.maxDate?ty(r.props.maxDate):null;return s&&r.state.yearsList.find(function(e){return e===s})||t.unshift(u().createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},u().createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),n&&r.state.yearsList.find(function(e){return e===n})||t.push(u().createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},u().createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),t},r.onChange=function(e){r.props.onChange(e)},r.handleClickOutside=function(){r.props.onCancel()},r.shiftYears=function(e){var t=r.state.yearsList.map(function(t){return t+e});r.setState({yearsList:t})},r.incrementYears=function(){return r.shiftYears(1)},r.decrementYears=function(){return r.shiftYears(-1)};var n=t.yearDropdownItemNumber,s=t.scrollableYearDropdown;return r.state={yearsList:function(e,t,r,n){for(var s=[],a=0;a<2*t+1;a++){var i=e+t-a,o=!0;r&&(o=ty(r)<=i),n&&o&&(o=ty(n)>=i),o&&s.push(i)}return s}(r.props.year,n||(s?10:5),r.props.minDate,r.props.maxDate)},r.dropdownRef=(0,c.createRef)(),r}return np(t,e),t.prototype.componentDidMount=function(){var e=this.dropdownRef.current;if(e){var t=e.children?Array.from(e.children):null,r=t?t.find(function(e){return e.ariaSelected}):null;e.scrollTop=r&&r instanceof HTMLElement?r.offsetTop+(r.clientHeight-e.clientHeight)/2:(e.scrollHeight-e.clientHeight)/2}},t.prototype.render=function(){var e=w({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return u().createElement(ng,{className:e,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(c.Component),sp=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var e=t.props.minDate?ty(t.props.minDate):1900,r=t.props.maxDate?ty(t.props.maxDate):2100,n=[],s=e;s<=r;s++)n.push(u().createElement("option",{key:s,value:s},s));return n},t.onSelectChange=function(e){t.onChange(parseInt(e.target.value))},t.renderSelectMode=function(){return u().createElement("select",{value:t.props.year,className:"react-datepicker__year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(e){return u().createElement("div",{key:"read",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(e){return t.toggleDropdown(e)}},u().createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),u().createElement("span",{className:"react-datepicker__year-read-view--selected-year"},t.props.year))},t.renderDropdown=function(){return u().createElement(su,nh({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var e=t.state.dropdownVisible,r=[t.renderReadView(!e)];return e&&r.unshift(t.renderDropdown()),r},t.onChange=function(e){t.toggleDropdown(),e!==t.props.year&&t.props.onChange(e)},t.toggleDropdown=function(e){t.setState({dropdownVisible:!t.state.dropdownVisible},function(){t.props.adjustDateOnChange&&t.handleYearChange(t.props.date,e)})},t.handleYearChange=function(e,r){var n;null===(n=t.onSelect)||void 0===n||n.call(t,e,r),t.setOpen()},t.onSelect=function(e,r){var n,s;null===(s=(n=t.props).onSelect)||void 0===s||s.call(n,e,r)},t.setOpen=function(){var e,r;null===(r=(e=t.props).setOpen)||void 0===r||r.call(e,!0)},t}return np(t,e),t.prototype.render=function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return u().createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},e)},t}(c.Component),sh=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],sm=function(e){var t=(e.className||"").split(/\s+/);return sh.some(function(e){return t.indexOf(e)>=0})},sx=function(e){function t(r){var n=e.call(this,r)||this;return n.monthContainer=void 0,n.handleClickOutside=function(e){n.props.onClickOutside(e)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(e){var t,r;sm(e.target)&&(null===(r=(t=n.props).onDropdownFocus)||void 0===r||r.call(t,e))},n.getDateInView=function(){var e=n.props,t=e.preSelection,r=e.selected,s=e.openToDate,a=nJ(n.props),i=nZ(n.props),o=nv(),l=s||r||t;return l||(a&&e3(o,a)?a:i&&tR(o,i)?i:o)},n.increaseMonth=function(){n.setState(function(e){return{date:tC(e.date,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(e){return{date:tC(e.date,-1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(e,t,r){n.props.onSelect(e,t,r),n.props.setPreSelection&&n.props.setPreSelection(e)},n.handleDayMouseEnter=function(e){n.setState({selectingDate:e}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(e)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(e,t){n.setState({selectingDate:tA(nv(),t)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(e,t)},n.handleYearMouseLeave=function(e,t){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(e,t)},n.handleYearChange=function(e){var t,r,s,a;null===(r=(t=n.props).onYearChange)||void 0===r||r.call(t,e),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(e),null===(a=(s=n.props).setOpen)||void 0===a||a.call(s,!0)),n.props.setPreSelection&&n.props.setPreSelection(e)},n.getEnabledPreSelectionDateForMonth=function(e){if(!nI(e,n.props))return e;for(var t=tm(e),r=function(e,t){let r=M(e),n=M(t),s=tW(r,n),a=Math.abs(e6(r,n));r.setDate(r.getDate()-s*a);let i=Number(tW(r,n)===-s),o=s*(a-i);return 0===o?0:o}(tg(e),t),s=null,a=0;a<=r;a++){var i=eC(t,a);if(!nI(i,n.props)){s=i;break}}return s},n.handleMonthChange=function(e){var t,r,s,a=null!==(t=n.getEnabledPreSelectionDateForMonth(e))&&void 0!==t?t:e;n.handleCustomMonthChange(a),n.props.adjustDateOnChange&&(n.props.onSelect(a),null===(s=(r=n.props).setOpen)||void 0===s||s.call(r,!0)),n.props.setPreSelection&&n.props.setPreSelection(a)},n.handleCustomMonthChange=function(e){var t,r;null===(r=(t=n.props).onMonthChange)||void 0===r||r.call(t,e),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(e){n.handleYearChange(e),n.handleMonthChange(e)},n.changeYear=function(e){n.setState(function(t){return{date:tA(t.date,Number(e))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(e){n.setState(function(t){return{date:tv(t.date,Number(e))}},function(){return n.handleMonthChange(n.state.date)})},n.changeMonthYear=function(e){n.setState(function(t){return{date:tA(tv(t.date,tj(e)),ty(e))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(e){void 0===e&&(e=n.state.date);var t=nk(e,n.props.locale,n.props.calendarStartDay),r=[];return n.props.showWeekNumbers&&r.push(u().createElement("div",{key:"W",className:"react-datepicker__day-name"},n.props.weekLabel||"#")),r.concat([0,1,2,3,4,5,6].map(function(e){var r=eC(t,e),s=n.formatWeekday(r,n.props.locale),a=n.props.weekDayClassName?n.props.weekDayClassName(r):void 0;return u().createElement("div",{key:e,"aria-label":nj(r,"EEEE",n.props.locale),className:w("react-datepicker__day-name",a)},s)}))},n.formatWeekday=function(e,t){return n.props.formatWeekDay?(0,n.props.formatWeekDay)(nj(e,"EEEE",t)):n.props.useWeekdaysShort?nj(e,"EEE",t):nj(e,"EEEEEE",t)},n.decreaseYear=function(){n.setState(function(e){var r;return{date:tE(e.date,-(n.props.showYearPicker?null!==(r=n.props.yearItemNumber)&&void 0!==r?r:t.defaultProps.yearItemNumber:1))}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){if(!n.props.renderCustomHeader){var e,r,s,a,i,o,l,c,d,p,h,m,x,f,g,b,v,w,y=null!==(g=n.props.monthsShown)&&void 0!==g?g:t.defaultProps.monthsShown,j=n.props.showPreviousMonths?y-1:0,N=null!==(b=n.props.monthSelectedIn)&&void 0!==b?b:j,_=tC(n.state.date,-N);switch(!0){case n.props.showMonthYearPicker:w=nG(n.state.date,n.props);break;case n.props.showYearPicker:e=n.state.date,a=(s=void 0===(r=n.props)?{}:r).minDate,l=n2(e8(tE(e,-(o=void 0===(i=s.yearItemNumber)?12:i))),o).endPeriod,w=(c=a&&ty(a))&&c>l||!1;break;case n.props.showQuarterYearPicker:d=n.state.date,m=(h=void 0===(p=n.props)?{}:p).minDate,x=h.includeDates,f=tC(e8(d),-3),w=m&&tT(m,f)>0||x&&x.every(function(e){return tT(e,f)>0})||!1;break;default:w=nK(_,n.props)}if(((null!==(v=n.props.forceShowMonthNavigation)&&void 0!==v?v:t.defaultProps.forceShowMonthNavigation)||n.props.showDisabledMonthNavigation||!w)&&!n.props.showTimeSelectOnly){var k=["react-datepicker__navigation","react-datepicker__navigation--previous"],D=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(D=n.decreaseYear),w&&n.props.showDisabledMonthNavigation&&(k.push("react-datepicker__navigation--previous--disabled"),D=void 0);var S=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,C=n.props,M=C.previousMonthButtonLabel,T=void 0===M?t.defaultProps.previousMonthButtonLabel:M,E=C.previousYearButtonLabel,P=void 0===E?t.defaultProps.previousYearButtonLabel:E,L=n.props,O=L.previousMonthAriaLabel,$=void 0===O?"string"==typeof T?T:"Previous Month":O,I=L.previousYearAriaLabel,R=void 0===I?"string"==typeof P?P:"Previous Year":I;return u().createElement("button",{type:"button",className:k.join(" "),onClick:D,onKeyDown:n.props.handleOnKeyDown,"aria-label":S?R:$},u().createElement("span",{className:"react-datepicker__navigation-icon react-datepicker__navigation-icon--previous"},S?P:T))}}},n.increaseYear=function(){n.setState(function(e){var r;return{date:tE(e.date,n.props.showYearPicker?null!==(r=n.props.yearItemNumber)&&void 0!==r?r:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){if(!n.props.renderCustomHeader){switch(!0){case n.props.showMonthYearPicker:b=nX(n.state.date,n.props);break;case n.props.showYearPicker:e=n.state.date,a=(s=void 0===(r=n.props)?{}:r).maxDate,l=n2(tE(e,o=void 0===(i=s.yearItemNumber)?12:i),o).startPeriod,b=(c=a&&ty(a))&&c<l||!1;break;case n.props.showQuarterYearPicker:d=n.state.date,m=(h=void 0===(p=n.props)?{}:p).maxDate,x=h.includeDates,f=tC(tN(d),3),b=m&&tT(f,m)>0||x&&x.every(function(e){return tT(f,e)>0})||!1;break;default:b=nU(n.state.date,n.props)}if(((null!==(g=n.props.forceShowMonthNavigation)&&void 0!==g?g:t.defaultProps.forceShowMonthNavigation)||n.props.showDisabledMonthNavigation||!b)&&!n.props.showTimeSelectOnly){var e,r,s,a,i,o,l,c,d,p,h,m,x,f,g,b,v=["react-datepicker__navigation","react-datepicker__navigation--next"];n.props.showTimeSelect&&v.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&v.push("react-datepicker__navigation--next--with-today-button");var w=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(w=n.increaseYear),b&&n.props.showDisabledMonthNavigation&&(v.push("react-datepicker__navigation--next--disabled"),w=void 0);var y=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,j=n.props,N=j.nextMonthButtonLabel,_=void 0===N?t.defaultProps.nextMonthButtonLabel:N,k=j.nextYearButtonLabel,D=void 0===k?t.defaultProps.nextYearButtonLabel:k,S=n.props,C=S.nextMonthAriaLabel,M=void 0===C?"string"==typeof _?_:"Next Month":C,T=S.nextYearAriaLabel,E=void 0===T?"string"==typeof D?D:"Next Year":T;return u().createElement("button",{type:"button",className:v.join(" "),onClick:w,onKeyDown:n.props.handleOnKeyDown,"aria-label":y?E:M},u().createElement("span",{className:"react-datepicker__navigation-icon react-datepicker__navigation-icon--next"},y?D:_))}}},n.renderCurrentMonth=function(e){void 0===e&&(e=n.state.date);var t=["react-datepicker__current-month"];return n.props.showYearDropdown&&t.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&t.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&t.push("react-datepicker__current-month--hasMonthYearDropdown"),u().createElement("h2",{className:t.join(" ")},nj(e,n.props.dateFormat,n.props.locale))},n.renderYearDropdown=function(e){if(void 0===e&&(e=!1),n.props.showYearDropdown&&!e)return u().createElement(sp,nh({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:ty(n.state.date)}))},n.renderMonthDropdown=function(e){if(void 0===e&&(e=!1),n.props.showMonthDropdown&&!e)return u().createElement(si,nh({},t.defaultProps,n.props,{month:tj(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(e){if(void 0===e&&(e=!1),n.props.showMonthYearDropdown&&!e)return u().createElement(sl,nh({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(e){n.props.onSelect(e5(nv()),e),n.props.setPreSelection&&n.props.setPreSelection(e5(nv()))},n.renderTodayButton=function(){if(n.props.todayButton&&!n.props.showTimeSelectOnly)return u().createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDefaultHeader=function(e){var t=e.monthDate,r=e.i;return u().createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(t),u().createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(0!==r),n.renderMonthYearDropdown(0!==r),n.renderYearDropdown(0!==r)),u().createElement("div",{className:"react-datepicker__day-names"},n.header(t)))},n.renderCustomHeader=function(e){var t,r,s=e.monthDate,a=e.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var i=nK(n.state.date,n.props),o=nU(n.state.date,n.props),l=nG(n.state.date,n.props),c=nX(n.state.date,n.props),d=!n.props.showMonthYearPicker&&!n.props.showQuarterYearPicker&&!n.props.showYearPicker;return u().createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},null===(r=(t=n.props).renderCustomHeader)||void 0===r?void 0:r.call(t,nh(nh({},n.state),{customHeaderCount:a,monthDate:s,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:i,nextMonthButtonDisabled:o,prevYearButtonDisabled:l,nextYearButtonDisabled:c})),d&&u().createElement("div",{className:"react-datepicker__day-names"},n.header(s)))},n.renderYearHeader=function(e){var r=e.monthDate,s=n.props,a=s.showYearPicker,i=s.yearItemNumber,o=n2(r,void 0===i?t.defaultProps.yearItemNumber:i),l=o.startPeriod,c=o.endPeriod;return u().createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},a?"".concat(l," - ").concat(c):ty(r))},n.renderHeader=function(e){var t=e.monthDate,r=e.i,s={monthDate:t,i:void 0===r?0:r};switch(!0){case void 0!==n.props.renderCustomHeader:return n.renderCustomHeader(s);case n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker:return n.renderYearHeader(s);default:return n.renderDefaultHeader(s)}},n.renderMonths=function(){if(!n.props.showTimeSelectOnly&&!n.props.showYearPicker){for(var e,r,s=[],a=null!==(e=n.props.monthsShown)&&void 0!==e?e:t.defaultProps.monthsShown,i=n.props.showPreviousMonths?a-1:0,o=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?tE(n.state.date,i):tC(n.state.date,-i),l=null!==(r=n.props.monthSelectedIn)&&void 0!==r?r:i,c=0;c<a;++c){var d=c-l+i,p=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?tE(o,d):tC(o,d),h="month-".concat(c),m=c<a-1,x=c>0;s.push(u().createElement("div",{key:h,ref:function(e){n.monthContainer=null!=e?e:void 0},className:"react-datepicker__month-container"},n.renderHeader({monthDate:p,i:c}),u().createElement(ss,nh({},t.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:p,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:c,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:m,monthShowsDuplicateDaysStart:x}))))}return s}},n.renderYears=function(){if(!n.props.showTimeSelectOnly&&n.props.showYearPicker)return u().createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),u().createElement(sd,nh({},t.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave})))},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return u().createElement(sc,nh({},t.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var e=n.props.selected?new Date(n.props.selected):void 0,r=e&&ny(e)&&n.props.selected?"".concat(n1(e.getHours()),":").concat(n1(e.getMinutes())):"";if(n.props.showTimeInput)return u().createElement(n8,nh({},t.defaultProps,n.props,{date:e,timeString:r,onChange:n.props.onTimeChange}))},n.renderAriaLiveRegion=function(){var e,r,s=n2(n.state.date,null!==(e=n.props.yearItemNumber)&&void 0!==e?e:t.defaultProps.yearItemNumber),a=s.startPeriod,i=s.endPeriod;return r=n.props.showYearPicker?"".concat(a," - ").concat(i):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?ty(n.state.date):"".concat(nO(tj(n.state.date),n.props.locale)," ").concat(ty(n.state.date)),u().createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&r)},n.renderChildren=function(){if(n.props.children)return u().createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=(0,c.createRef)(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return np(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:12}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.props.showTimeSelect&&(this.assignMonthContainer=void this.setState({monthContainer:this.monthContainer}))},t.prototype.componentDidUpdate=function(e){var t=this;if(this.props.preSelection&&(!nM(this.props.preSelection,e.preSelection)||this.props.monthSelectedIn!==e.monthSelectedIn)){var r=!nS(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return r&&t.handleCustomMonthChange(t.state.date)})}else this.props.openToDate&&!nM(this.props.openToDate,e.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var e=this.props.container||nx;return u().createElement(ng,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},u().createElement("div",{style:{display:"contents"},ref:this.containerRef},u().createElement(e,{className:w("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t}(c.Component),sf=function(e){var t=e.icon,r=e.className,n=void 0===r?"":r,s=e.onClick,a="react-datepicker__calendar-icon";return"string"==typeof t?u().createElement("i",{className:"".concat(a," ").concat(t," ").concat(n),"aria-hidden":"true",onClick:s}):u().isValidElement(t)?u().cloneElement(t,{className:"".concat(t.props.className||""," ").concat(a," ").concat(n),onClick:function(e){"function"==typeof t.props.onClick&&t.props.onClick(e),"function"==typeof s&&s(e)}}):u().createElement("svg",{className:"".concat(a," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},u().createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},sg=function(e){function t(t){var r=e.call(this,t)||this;return r.portalRoot=null,r.el=document.createElement("div"),r}return np(t,e),t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return ri().createPortal(this.props.children,this.el)},t}(c.Component),sb=function(e){return e instanceof HTMLAnchorElement?-1!==e.tabIndex:!e.disabled&&-1!==e.tabIndex},sv=function(e){function t(t){var r=e.call(this,t)||this;return r.getTabChildren=function(){var e;return Array.prototype.slice.call(null===(e=r.tabLoopRef.current)||void 0===e?void 0:e.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(sb)},r.handleFocusStart=function(){var e=r.getTabChildren();e&&e.length>1&&e[e.length-1].focus()},r.handleFocusEnd=function(){var e=r.getTabChildren();e&&e.length>1&&e[0].focus()},r.tabLoopRef=(0,c.createRef)(),r}return np(t,e),t.prototype.render=function(){var e;return(null!==(e=this.props.enableTabLoop)&&void 0!==e?e:t.defaultProps.enableTabLoop)?u().createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},u().createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,u().createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(c.Component),sw=(n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return np(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this.props,r=e.className,n=e.wrapperClassName,s=e.hidePopper,a=void 0===s?t.defaultProps.hidePopper:s,i=e.popperComponent,o=e.targetComponent,l=e.enableTabLoop,d=e.popperOnKeyDown,p=e.portalId,h=e.portalHost,m=e.popperProps,x=e.showArrow,f=void 0;if(!a){var g=w("react-datepicker-popper",r);f=u().createElement(sv,{enableTabLoop:l},u().createElement("div",{ref:m.refs.setFloating,style:m.floatingStyles,className:g,"data-placement":m.placement,onKeyDown:d},i,x&&u().createElement(nn,{ref:m.arrowRef,context:m.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(f=(0,c.createElement)(this.props.popperContainer,{},f)),p&&!a&&(f=u().createElement(sg,{portalId:p,portalHost:h},f));var b=w("react-datepicker-wrapper",n);return u().createElement(u().Fragment,null,u().createElement("div",{ref:m.refs.setReference,className:b},o),f)},t}(c.Component),function(e){var t,r="boolean"!=typeof e.hidePopper||e.hidePopper,s=(0,c.useRef)(null),a=function(e){void 0===e&&(e={});let{nodeId:t}=e,r=function(e){let{open:t=!1,onOpenChange:r,elements:n}=e,s=nr(),a=c.useRef({}),[i]=c.useState(()=>(function(){let e=new Map;return{emit(t,r){var n;null==(n=e.get(t))||n.forEach(e=>e(r))},on(t,r){e.has(t)||e.set(t,new Set),e.get(t).add(r)},off(t,r){var n;null==(n=e.get(t))||n.delete(r)}}})()),o=null!=ni(),[l,d]=c.useState(n.reference),u=function(e){let t=c.useRef(()=>{});return tB(()=>{t.current=e}),c.useCallback(function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==t.current?void 0:t.current(...r)},[])}((e,t,n)=>{a.current.openEvent=e?t:void 0,i.emit("openchange",{open:e,event:t,reason:n,nested:o}),null==r||r(e,t,n)}),p=c.useMemo(()=>({setPositionReference:d}),[]),h=c.useMemo(()=>({reference:l||n.reference||null,floating:n.floating||null,domReference:n.reference}),[l,n.reference,n.floating]);return c.useMemo(()=>({dataRef:a,open:t,onOpenChange:u,elements:h,events:i,floatingId:s,refs:p}),[t,u,h,i,s,p])}({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||r,s=n.elements,[a,i]=c.useState(null),[o,l]=c.useState(null),d=(null==s?void 0:s.domReference)||a,u=c.useRef(null),p=no();tH(()=>{d&&(u.current=d)},[d]);let h=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:a,floating:i}={},transform:o=!0,whileElementsMounted:l,open:d}=e,[u,p]=c.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=c.useState(n);r0(h,n)||m(n);let[x,f]=c.useState(null),[g,b]=c.useState(null),v=c.useCallback(e=>{e!==N.current&&(N.current=e,f(e))},[]),w=c.useCallback(e=>{e!==_.current&&(_.current=e,b(e))},[]),y=a||x,j=i||g,N=c.useRef(null),_=c.useRef(null),k=c.useRef(u),D=null!=l,S=r4(l),C=r4(s),M=r4(d),T=c.useCallback(()=>{if(!N.current||!_.current)return;let e={placement:t,strategy:r,middleware:h};C.current&&(e.platform=C.current),rJ(N.current,_.current,e).then(e=>{let t={...e,isPositioned:!1!==M.current};E.current&&!r0(k.current,t)&&(k.current=t,ra.flushSync(()=>{p(t)}))})},[h,t,r,C,M]);rZ(()=>{!1===d&&k.current.isPositioned&&(k.current.isPositioned=!1,p(e=>({...e,isPositioned:!1})))},[d]);let E=c.useRef(!1);rZ(()=>(E.current=!0,()=>{E.current=!1}),[]),rZ(()=>{if(y&&(N.current=y),j&&(_.current=j),y&&j){if(S.current)return S.current(y,j,T);T()}},[y,j,T,S,D]);let P=c.useMemo(()=>({reference:N,floating:_,setReference:v,setFloating:w}),[v,w]),L=c.useMemo(()=>({reference:y,floating:j}),[y,j]),O=c.useMemo(()=>{let e={position:r,left:0,top:0};if(!L.floating)return e;let t=r2(L.floating,u.x),n=r2(L.floating,u.y);return o?{...e,transform:"translate("+t+"px, "+n+"px)",...r1(L.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}},[r,o,L.floating,u.x,u.y]);return c.useMemo(()=>({...u,update:T,refs:P,elements:L,floatingStyles:O}),[u,T,P,L,O])}({...e,elements:{...s,...o&&{reference:o}}}),m=c.useCallback(e=>{let t=tU(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),getClientRects:()=>e.getClientRects(),contextElement:e}:e;l(t),h.refs.setReference(t)},[h.refs]),x=c.useCallback(e=>{(tU(e)||null===e)&&(u.current=e,i(e)),(tU(h.refs.reference.current)||null===h.refs.reference.current||null!==e&&!tU(e))&&h.refs.setReference(e)},[h.refs]),f=c.useMemo(()=>({...h.refs,setReference:x,setPositionReference:m,domReference:u}),[h.refs,x,m]),g=c.useMemo(()=>({...h.elements,domReference:d}),[h.elements,d]),b=c.useMemo(()=>({...h,...n,refs:f,elements:g,nodeId:t}),[h,f,g,t,n]);return tH(()=>{n.dataRef.current.floatingContext=b;let e=null==p?void 0:p.nodesRef.current.find(e=>e.id===t);e&&(e.context=b)}),c.useMemo(()=>({...h,context:b,refs:f,elements:g}),[h,f,g,b])}(nh({open:!r,whileElementsMounted:rG,placement:e.popperPlacement,middleware:nm([r6({padding:15}),r5(10),r8({element:s})],null!==(t=e.popperModifiers)&&void 0!==t?t:[],!0)},e.popperProps)),i=nh(nh({},e),{hidePopper:r,popperProps:nh(nh({},a),{arrowRef:s})});return u().createElement(n,nh({},i))}),sy="react-datepicker-ignore-onclickoutside",sj="Date input not valid.",sN=function(e){function t(r){var n=e.call(this,r)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:nv()},n.modifyHolidays=function(){var e;return null===(e=n.props.holidays)||void 0===e?void 0:e.reduce(function(e,t){var r=new Date(t.date);return ny(r)?nm(nm([],e,!0),[nh(nh({},t),{date:r})],!1):e},[])},n.calcInitialState=function(){var e,t=n.getPreSelection(),r=nJ(n.props),s=nZ(n.props),a=r&&e3(t,e5(r))?r:s&&tR(t,tf(s))?s:t;return{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:null!==(e=n.props.selectsRange?n.props.startDate:n.props.selected)&&void 0!==e?e:a,highlightDates:n0(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.resetHiddenStatus=function(){n.setState(nh(nh({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState(nh(nh({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){"hidden"===document.visibilityState&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var e,t;null===(t=null===(e=n.input)||void 0===e?void 0:e.focus)||void 0===t||t.call(e,{preventScroll:!0})},n.setBlur=function(){var e,t;null===(t=null===(e=n.input)||void 0===e?void 0:e.blur)||void 0===t||t.call(e),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(e,t){void 0===t&&(t=!1),n.setState({open:e,preSelection:e&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:sk},function(){e||n.setState(function(e){return{focused:!!t&&e.focused}},function(){t||n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return e2(n.state.preSelection)},n.isCalendarOpen=function(){return void 0===n.props.open?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(e){var t,r,s=n.state.wasHidden,a=!s||n.state.open;s&&n.resetHiddenStatus(),n.state.preventFocus||(null===(r=(t=n.props).onFocus)||void 0===r||r.call(t,e),!a||n.props.preventOpenOnFocus||n.props.readOnly||n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.handleBlur=function(e){var t,r;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&(null===(r=(t=n.props).onBlur)||void 0===r||r.call(t,e)),n.state.open&&!1===n.props.open&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(e){var t,r;n.props.inline||n.setOpen(!1),null===(r=(t=n.props).onClickOutside)||void 0===r||r.call(t,e),n.props.withPortal&&e.preventDefault()},n.handleChange=function(){for(var e,r,s,a,i,o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];var c=o[0];if(!(n.props.onChangeRaw&&(n.props.onChangeRaw.apply(n,o),!c||"function"!=typeof c.isDefaultPrevented||c.isDefaultPrevented()))){n.setState({inputValue:(null==c?void 0:c.target)instanceof HTMLInputElement?c.target.value:null,lastPreSelectChange:s_});var d=n.props,u=d.selectsRange,p=d.startDate,h=d.endDate,m=null!==(e=n.props.dateFormat)&&void 0!==e?e:t.defaultProps.dateFormat,x=null!==(r=n.props.strictParsing)&&void 0!==r?r:t.defaultProps.strictParsing,f=(null==c?void 0:c.target)instanceof HTMLInputElement?c.target.value:"";if(u){var g=f.split(m.includes("-")?" - ":"-",2).map(function(e){return e.trim()}),b=g[0],v=g[1],w=nw(null!=b?b:"",m,n.props.locale,x),y=nw(null!=v?v:"",m,n.props.locale,x),j=(null==p?void 0:p.getTime())!==(null==w?void 0:w.getTime()),N=(null==h?void 0:h.getTime())!==(null==y?void 0:y.getTime());if(!j&&!N||w&&nI(w,n.props)||y&&nI(y,n.props))return;null===(a=(s=n.props).onChange)||void 0===a||a.call(s,[w,y],c)}else{var _=nw(f,m,n.props.locale,x,null!==(i=n.props.selected)&&void 0!==i?i:void 0);(_||!f)&&n.setSelected(_,c,!0)}}},n.handleSelect=function(e,t,r){if(!n.props.readOnly){if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&n.sendFocusBackToInput(),n.props.onChangeRaw&&n.props.onChangeRaw(t),n.setSelected(e,t,!1,r),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect)n.setPreSelection(e);else if(!n.props.inline){n.props.selectsRange||n.setOpen(!1);var s=n.props,a=s.startDate,i=s.endDate;a&&!i&&(n.props.swapRange||!n5(e,a))&&n.setOpen(!1)}}},n.setSelected=function(e,t,r,s){var a,i,o=e;if(n.props.showYearPicker){if(null!==o&&nH(ty(o),n.props))return}else if(n.props.showMonthYearPicker){if(null!==o&&nY(o,n.props))return}else if(null!==o&&nI(o,n.props))return;var l=n.props,c=l.onChange,d=l.selectsRange,u=l.startDate,p=l.endDate,h=l.selectsMultiple,m=l.selectedDates,x=l.minTime,f=l.swapRange;if(!nT(n.props.selected,o)||n.props.allowSameDay||d||h){if(null===o||(!n.props.selected||r&&(n.props.showTimeSelect||n.props.showTimeSelectOnly||n.props.showTimeInput)||(o=n_(o,{hour:tk(n.props.selected),minute:tD(n.props.selected),second:tS(n.props.selected)})),!r&&(n.props.showTimeSelect||n.props.showTimeSelectOnly)&&x&&(o=n_(o,{hour:x.getHours(),minute:x.getMinutes(),second:x.getSeconds()})),n.props.inline||n.setState({preSelection:o}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:s})),d){var g=!u&&!p,b=u&&!p,v=u&&p;g?null==c||c([o,null],t):b&&(null===o?null==c||c([null,null],t):n5(o,u)?f?null==c||c([o,u],t):null==c||c([o,null],t):null==c||c([u,o],t)),v&&(null==c||c([o,null],t))}else if(h){if(null!==o){if(null==m?void 0:m.length){if(m.some(function(e){return nM(e,o)})){var w=m.filter(function(e){return!nM(e,o)});null==c||c(w,t)}else null==c||c(nm(nm([],m,!0),[o],!1),t)}else null==c||c([o],t)}}else null==c||c(o,t)}r||(null===(i=(a=n.props).onSelect)||void 0===i||i.call(a,o,t),n.setState({inputValue:null}))},n.setPreSelection=function(e){if(!n.props.readOnly){var t=e2(n.props.minDate),r=e2(n.props.maxDate),s=!0;if(e){var a=e5(e);if(t&&r)s=nE(e,n.props.minDate,n.props.maxDate);else if(t){var i=e5(n.props.minDate);s=tR(e,i)||nT(a,i)}else if(r){var o=tf(n.props.maxDate);s=e3(e,o)||nT(a,o)}}s&&n.setState({preSelection:e})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(e){if(!n.props.selectsRange&&!n.props.selectsMultiple){var t,r,s=n.props.selected?n.props.selected:n.getPreSelection(),a=n.props.selected?e:n_(s,{hour:tk(e),minute:tD(e)});n.setState({preSelection:a}),null===(r=(t=n.props).onChange)||void 0===r||r.call(t,a),n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var e,t;n.props.disabled||n.props.readOnly||n.setOpen(!0),null===(t=(e=n.props).onInputClick)||void 0===t||t.call(e)},n.onInputKeyDown=function(e){null===(r=(t=n.props).onKeyDown)||void 0===r||r.call(t,e);var t,r,a,i,o,l,c=e.key;if(!n.state.open&&!n.props.inline&&!n.props.preventOpenOnFocus){(c===s.ArrowDown||c===s.ArrowUp||c===s.Enter)&&(null===(a=n.onInputClick)||void 0===a||a.call(n));return}if(n.state.open){if(c===s.ArrowDown||c===s.ArrowUp){e.preventDefault();var d=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',u=(null===(i=n.calendar)||void 0===i?void 0:i.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(d);u instanceof HTMLElement&&u.focus({preventScroll:!0});return}var p=nv(n.state.preSelection);c===s.Enter?(e.preventDefault(),e.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===sk?(n.handleSelect(p,e),n.props.shouldCloseOnSelect||n.setPreSelection(p)):n.setOpen(!1)):c===s.Escape?(e.preventDefault(),e.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):c===s.Tab&&n.setOpen(!1),n.inputOk()||null===(l=(o=n.props).onInputError)||void 0===l||l.call(o,{code:1,msg:sj})}},n.onPortalKeyDown=function(e){e.key===s.Escape&&(e.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(e){var t,r,a,i,o,l,c=n.props,d=c.minDate,u=c.maxDate,p=c.disabledKeyboardNavigation,h=c.showWeekPicker,m=c.shouldCloseOnSelect,x=c.locale,f=c.calendarStartDay,g=c.adjustDateOnChange,b=c.inline;if(null===(r=(t=n.props).onKeyDown)||void 0===r||r.call(t,e),!p){var v=e.key,w=e.shiftKey,y=nv(n.state.preSelection),j=function(e,t){var r=t;switch(e){case s.ArrowRight:r=h?eC(t,7):eC(t,1);break;case s.ArrowLeft:r=h?eC(t,-7):eC(t,-1);break;case s.ArrowUp:r=eC(t,-7);break;case s.ArrowDown:r=eC(t,7);break;case s.PageUp:r=w?tE(t,-1):tC(t,-1);break;case s.PageDown:r=w?tE(t,1):tC(t,1);break;case s.Home:r=nk(t,x,f);break;case s.End:r=function(e,t){let r=(void 0)??void 0??E.weekStartsOn??E.locale?.options?.weekStartsOn??0,n=M(e),s=n.getDay();return n.setDate(n.getDate()+((s<r?-7:0)+6-(s-r))),n.setHours(23,59,59,999),n}(t)}return r};if(v===s.Enter){e.preventDefault(),n.handleSelect(y,e),m||n.setPreSelection(y);return}if(v===s.Escape){e.preventDefault(),n.setOpen(!1),n.inputOk()||null===(i=(a=n.props).onInputError)||void 0===i||i.call(a,{code:1,msg:sj});return}var N=null;switch(v){case s.ArrowLeft:case s.ArrowRight:case s.ArrowUp:case s.ArrowDown:case s.PageUp:case s.PageDown:case s.Home:case s.End:N=function(e,t){for(var r=e,a=!1,i=0,o=j(e,t);!a;){if(i>=40){o=t;break}d&&o<d&&(r=s.ArrowRight,o=nI(d,n.props)?j(r,o):d),u&&o>u&&(r=s.ArrowLeft,o=nI(u,n.props)?j(r,o):u),nI(o,n.props)?((r===s.PageUp||r===s.Home)&&(r=s.ArrowRight),(r===s.PageDown||r===s.End)&&(r=s.ArrowLeft),o=j(r,o)):a=!0,i++}return o}(v,y)}if(!N){null===(l=(o=n.props).onInputError)||void 0===l||l.call(o,{code:1,msg:sj});return}if(e.preventDefault(),n.setState({lastPreSelectChange:sk}),g&&n.setSelected(N),n.setPreSelection(N),b){var _=tj(y),k=tj(N),D=ty(y),S=ty(N);_!==k||D!==S?n.setState({shouldFocusDayInline:!0}):n.setState({shouldFocusDayInline:!1})}}},n.onPopperKeyDown=function(e){e.key===s.Escape&&(e.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(e){e&&e.preventDefault&&e.preventDefault(),n.sendFocusBackToInput();var t=n.props,r=t.selectsRange,s=t.onChange;r?null==s||s([null,null],e):null==s||s(null,e),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(e){"boolean"==typeof n.props.closeOnScroll&&n.props.closeOnScroll?(e.target===document||e.target===document.documentElement||e.target===document.body)&&n.setOpen(!1):"function"==typeof n.props.closeOnScroll&&n.props.closeOnScroll(e)&&n.setOpen(!1)},n.renderCalendar=function(){var e,r,s,a,i;return n.props.inline||n.isCalendarOpen()?u().createElement(sx,nh({showMonthYearDropdown:void 0,ref:function(e){n.calendar=e}},n.props,n.state,{setOpen:n.setOpen,dateFormat:null!==(e=n.props.dateFormatCalendar)&&void 0!==e?e:t.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:(void 0===(s=n.modifyHolidays())&&(s=[]),void 0===a&&(a="react-datepicker__day--holidays"),i=new Map,s.forEach(function(e){var t,r,n=e.date,s=e.holidayName;if(e2(n)){var o=nj(n,"MM.dd.yyyy"),l=i.get(o)||{className:"",holidayNames:[]};if(!("className"in l&&l.className===a&&(t=l.holidayNames,r=[s],t.length===r.length&&t.every(function(e,t){return e===r[t]})))){l.className=a;var c=l.holidayNames;l.holidayNames=c?nm(nm([],c,!0),[s],!1):[s],i.set(o,l)}}}),i),outsideClickIgnoreClass:sy,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:null!==(r=n.props.dropdownMode)&&void 0!==r?r:t.defaultProps.dropdownMode}),n.props.children):null},n.renderAriaLiveRegion=function(){var e,r=n.props,s=r.dateFormat,a=void 0===s?t.defaultProps.dateFormat:s,i=r.locale,o=n.props.showTimeInput||n.props.showTimeSelect?"PPPPp":"PPPP";return e=n.props.selectsRange?"Selected start date: ".concat(nN(n.props.startDate,{dateFormat:o,locale:i}),". ").concat(n.props.endDate?"End date: "+nN(n.props.endDate,{dateFormat:o,locale:i}):""):n.props.showTimeSelectOnly?"Selected time: ".concat(nN(n.props.selected,{dateFormat:a,locale:i})):n.props.showYearPicker?"Selected year: ".concat(nN(n.props.selected,{dateFormat:"yyyy",locale:i})):n.props.showMonthYearPicker?"Selected month: ".concat(nN(n.props.selected,{dateFormat:"MMMM yyyy",locale:i})):n.props.showQuarterYearPicker?"Selected quarter: ".concat(nN(n.props.selected,{dateFormat:"yyyy, QQQ",locale:i})):"Selected date: ".concat(nN(n.props.selected,{dateFormat:o,locale:i})),u().createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},e)},n.renderDateInput=function(){var e,r,s,a=w(n.props.className,((e={})[sy]=n.state.open,e)),i=n.props.customInput||u().createElement("input",{type:"text"}),o=n.props.customInputRef||"ref",l=n.props,d=l.dateFormat,p=void 0===d?t.defaultProps.dateFormat:d,h=l.locale,m="string"==typeof n.props.value?n.props.value:"string"==typeof n.state.inputValue?n.state.inputValue:n.props.selectsRange?function(e,t,r){if(!e)return"";var n=nN(e,r),s=t?nN(t,r):"";return"".concat(n).concat(" - ").concat(s)}(n.props.startDate,n.props.endDate,{dateFormat:p,locale:h}):n.props.selectsMultiple?function(e,t){if(!(null==e?void 0:e.length))return"";var r=e[0]?nN(e[0],t):"";if(1===e.length)return r;if(2===e.length&&e[1]){var n=nN(e[1],t);return"".concat(r,", ").concat(n)}var s=e.length-1;return"".concat(r," (+").concat(s,")")}(null!==(s=n.props.selectedDates)&&void 0!==s?s:[],{dateFormat:p,locale:h}):nN(n.props.selected,{dateFormat:p,locale:h});return(0,c.cloneElement)(i,((r={})[o]=function(e){n.input=e},r.value=m,r.onBlur=n.handleBlur,r.onChange=n.handleChange,r.onClick=n.onInputClick,r.onFocus=n.handleFocus,r.onKeyDown=n.onInputKeyDown,r.id=n.props.id,r.name=n.props.name,r.form=n.props.form,r.autoFocus=n.props.autoFocus,r.placeholder=n.props.placeholderText,r.disabled=n.props.disabled,r.autoComplete=n.props.autoComplete,r.className=w(i.props.className,a),r.title=n.props.title,r.readOnly=n.props.readOnly,r.required=n.props.required,r.tabIndex=n.props.tabIndex,r["aria-describedby"]=n.props.ariaDescribedBy,r["aria-invalid"]=n.props.ariaInvalid,r["aria-labelledby"]=n.props.ariaLabelledBy,r["aria-required"]=n.props.ariaRequired,r))},n.renderClearButton=function(){var e=n.props,t=e.isClearable,r=e.disabled,s=e.selected,a=e.startDate,i=e.endDate,o=e.clearButtonTitle,l=e.clearButtonClassName,c=e.ariaLabelClose,d=e.selectedDates,p=e.readOnly;return t&&!p&&(null!=s||null!=a||null!=i||(null==d?void 0:d.length))?u().createElement("button",{type:"button",className:w("react-datepicker__close-icon",void 0===l?"":l,{"react-datepicker__close-icon--disabled":r}),disabled:r,"aria-label":void 0===c?"Close":c,onClick:n.onClearClick,title:o,tabIndex:-1}):null},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return np(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:12,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(e,t){var r,n,s,a,i,o;e.inline&&(i=e.selected,o=this.props.selected,i&&o?tj(i)!==tj(o)||ty(i)!==ty(o):i!==o)&&this.setPreSelection(this.props.selected),void 0!==this.state.monthSelectedIn&&e.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),e.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:n0(this.props.highlightDates)}),t.focused||nT(e.selected,this.props.selected)||this.setState({inputValue:null}),t.open!==this.state.open&&(!1===t.open&&!0===this.state.open&&(null===(n=(r=this.props).onCalendarOpen)||void 0===n||n.call(r)),!0===t.open&&!1===this.state.open&&(null===(a=(s=this.props).onCalendarClose)||void 0===a||a.call(s)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var e=this.props,t=e.showIcon,r=e.icon,n=e.calendarIconClassname,s=e.calendarIconClassName,a=e.toggleCalendarOnIconClick,i=this.state.open;return n&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),u().createElement("div",{className:"react-datepicker__input-container".concat(t?" react-datepicker__view-calendar-icon":"")},t&&u().createElement(sf,nh({icon:r,className:w(s,!s&&n,i&&"react-datepicker-ignore-onclickoutside")},a?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var e=this.renderCalendar();if(this.props.inline)return e;if(this.props.withPortal){var t=this.state.open?u().createElement(sv,{enableTabLoop:this.props.enableTabLoop},u().createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},e)):null;return this.state.open&&this.props.portalId&&(t=u().createElement(sg,nh({portalId:this.props.portalId},this.props),t)),u().createElement("div",null,this.renderInputContainer(),t)}return u().createElement(sw,nh({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:e,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t}(c.Component),s_="input",sk="navigate";function sD({isOpen:e,onClose:t,onTaskCreated:r}){let[n,s]=(0,c.useState)("select_condition"),[a,o]=(0,c.useState)([]),[l,d]=(0,c.useState)(null),[u,p]=(0,c.useState)(0),[h,x]=(0,c.useState)({startTime:null,endTime:null}),[f,g]=(0,c.useState)(!1),[b,v]=(0,c.useState)(0),[w,y]=(0,c.useState)(!1),[j,N]=(0,c.useState)(!1),[_,k]=(0,c.useState)([]),[D,S]=(0,c.useState)(!0),[C,M]=(0,c.useState)("发起任务-"),[T,E]=(0,c.useState)(null),P=async e=>{let t;d(e),g(!1),x({startTime:null,endTime:null}),N(!0),a.find(t=>t.id===e.id);let r=Y(a);if("car_model"===e.type)t="product";else if("customer_level"===e.type)t="type";else if("visit_status"===e.type)t="arrive";else if("last_follow_time"===e.type||"first_follow_time"===e.type||"next_follow_time"===e.type){let t={...e},r=a.find(t=>t.id===e.id);r&&(t.value=r.value),d(t),N(!1);return}try{let n=await m.LM.getFilteredCount(r,t||void 0);if("success"===n.status&&n.data){console.log("API返回数据:",n.data);let t=(e,t,r)=>{if(console.log("updateOptionsWithCount 被调用:",{conditionType:r,apiData:t,options:e}),"car_model"===r){if(Array.isArray(t))return console.log("处理车型数组格式:",t),e.map(e=>{let r=t.find(t=>t.category===e.value);return{...e,count:r?.count||0}});if(t.by_product)return e.map(e=>({...e,count:t.by_product.find(t=>t.category===e.value)?.count||0}))}else if("customer_level"===r){if(Array.isArray(t))return console.log("处理客户等级数组格式:",t),e.map(e=>{let r=t.find(t=>t.category===e.value);return{...e,count:r?.count||0}});if(t.by_type)return e.map(e=>({...e,count:t.by_type.find(t=>t.category===e.value)?.count||0}))}else if("visit_status"===r){if(Array.isArray(t))return console.log("处理是否到店数组格式:",t),t.map(e=>{let t=e.category;return{value:"已到店"===e.category?"visited":"未到店"===e.category?"not_visited":e.category.toLowerCase().replace(/\s+/g,"_"),label:t,count:e.count}});if(t.by_arrive)return t.by_arrive.map(e=>{let t=e.category;return{value:"已到店"===e.category?"visited":"未到店"===e.category?"not_visited":e.category.toLowerCase().replace(/\s+/g,"_"),label:t,count:e.count}})}else if("last_follow_time"===r||"first_follow_time"===r||"next_follow_time"===r){let r=t.total_count||0;return e.map(t=>({...t,count:"custom"===t.value?0:Math.floor(r/(e.length-1))}))}return e};k(r=>r.map(r=>r.id===e.id?{...r,options:t(r.options,n.data,e.type)}:r));let r={...e,options:t(e.options,n.data,e.type)},s=a.find(t=>t.id===e.id);s&&(r.value=s.value),d(r)}}catch(e){console.error("获取筛选条件选项数量失败:",e)}finally{N(!1)}},L=async e=>{if(!l)return;if("custom"===e&&l.hasCustom){g(!0);return}let t=a.findIndex(e=>e.id===l.id);if(-1!==t){let r=a[t],n=e;if(r.value.includes(",")){let t=r.value.split(",");if(t.includes(e)){let r=t.filter(t=>t!==e);n=r.length>0?r.join(","):""}else n=r.value+","+e}else n=r.value===e?"":r.value+","+e;let s=[...a];""===n?s.splice(t,1):s[t]={...l,value:n},o(s),("last_follow_time"===l.type||"first_follow_time"===l.type||"next_follow_time"===l.type)&&setTimeout(()=>{let e=new Event("filterChanged");window.dispatchEvent(e)},100)}else o([...a,{...l,value:e}]),("last_follow_time"===l.type||"first_follow_time"===l.type||"next_follow_time"===l.type)&&setTimeout(()=>{let e=new Event("filterChanged");window.dispatchEvent(e)},100)},O=async e=>{let t=a.filter(t=>t.id!==e);o(t),k(e=>e.map(e=>t.some(t=>t.id===e.id)?e:{...e,options:e.options.map(e=>({...e,count:0}))})),l?.id===e&&d(null)},$=async()=>{s("creating_task"),p(0);try{let e=Y(a);console.log("构建的筛选条件数据:",e),console.log("选中的条件:",a),a.forEach((e,t)=>{console.log(`条件 ${t+1}:`,{id:e.id,type:e.type,label:e.label,value:e.value,options:e.options})});let t={task_name:C,script_id:"",size_desc:e};console.log("提交的API数据:",t);let n=await m.Md.createCallTask(t),i=setInterval(()=>{p(e=>{if(e>=100){clearInterval(i),s("task_complete");let e={id:n.data.task_id,name:n.data.task_name,conditions:a,filteredCount:n.data.leads_count,filters:Y(a),organization_id:n.data.organization_id,create_name:n.data.create_name,script_id:"",selectedScene:null,apiResponse:n};return E(e),r&&setTimeout(()=>{r(e)},0),100}return e+10})},200)}catch(e){console.error("创建任务失败:",e),s("select_condition"),alert("创建任务失败，请重试")}},I=()=>{s("select_condition"),o([]),d(null),p(0),g(!1),x({startTime:null,endTime:null}),M("发起任务-"),E(null),t()},R=e=>{let t=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate());switch(e){case"today":return{start:r.toISOString().split("T")[0],end:r.toISOString().split("T")[0]};case"yesterday":let n=new Date(t);n.setDate(n.getDate()-1);let s=new Date(n.getFullYear(),n.getMonth(),n.getDate());return{start:s.toISOString().split("T")[0],end:s.toISOString().split("T")[0]};case"this_week":let a=new Date(t);a.setDate(t.getDate()-t.getDay());let i=new Date(a);return i.setDate(a.getDate()+6),{start:a.toISOString().split("T")[0],end:i.toISOString().split("T")[0]};case"last_week":let o=new Date(t);o.setDate(t.getDate()-t.getDay()-7);let l=new Date(o);return l.setDate(o.getDate()+6),{start:o.toISOString().split("T")[0],end:l.toISOString().split("T")[0]};case"this_month":let c=new Date(t.getFullYear(),t.getMonth(),1),d=new Date(t.getFullYear(),t.getMonth()+1,0);return{start:c.toISOString().split("T")[0],end:d.toISOString().split("T")[0]};case"last_month":let u=new Date(t.getFullYear(),t.getMonth()-1,1),p=new Date(t.getFullYear(),t.getMonth(),0);return{start:u.toISOString().split("T")[0],end:p.toISOString().split("T")[0]};case"next_week":let h=new Date(t);h.setDate(t.getDate()-t.getDay()+7);let m=new Date(h);return m.setDate(h.getDate()+6),{start:h.toISOString().split("T")[0],end:m.toISOString().split("T")[0]};case"next_month":let x=new Date(t.getFullYear(),t.getMonth()+1,1),f=new Date(t.getFullYear(),t.getMonth()+2,0);return{start:x.toISOString().split("T")[0],end:f.toISOString().split("T")[0]};default:return null}},Y=e=>{let t={leads_type:[],leads_product:[]};return console.log("buildCurrentFilters 开始处理条件:",e),e.forEach(e=>{if(console.log("处理条件:",e),e.value&&""!==e.value){if(e.value.startsWith("custom:")){console.log("处理自定义时间条件:",e);let[r,n]=e.value.replace("custom:","").split("_");"first_follow_time"===e.type?(r&&(t.first_follow_start=r),n&&(t.first_follow_end=n)):"last_follow_time"===e.type?(r&&(t.latest_follow_start=r),n&&(t.latest_follow_end=n)):"next_follow_time"===e.type&&(r&&(t.next_follow_start=r),n&&(t.next_follow_end=n)),console.log("自定义时间处理结果:",{startTime:r,endTime:n,filters:t})}else if("car_model"===e.type)e.value.includes(",")?t.leads_product=e.value.split(","):t.leads_product=[e.value];else if("customer_level"===e.type)e.value.includes(",")?t.leads_type=e.value.split(","):t.leads_type=[e.value];else if("visit_status"===e.type){if(e.value.includes(",")){let r=e.value.split(","),n=[];r.forEach(e=>{if("visited"===e||"1"===e)n.push(1);else if("not_visited"===e||"0"===e)n.push(0);else{let t=parseInt(e);isNaN(t)||n.push(t)}}),n.length>0&&(t.is_arrive=n)}else if("visited"===e.value||"1"===e.value)t.is_arrive=[1];else if("not_visited"===e.value||"0"===e.value)t.is_arrive=[0];else{let r=parseInt(e.value);isNaN(r)||(t.is_arrive=[r])}}else if("last_follow_time"===e.type||"first_follow_time"===e.type||"next_follow_time"===e.type){if(console.log("处理预设时间条件:",e),e.value.includes(",")){let r=e.value.split(",");console.log("多选时间值:",r);let n=[];if(r.forEach(e=>{let t=R(e);console.log("时间值:",e,"对应时间范围:",t),t&&n.push(t)}),n.length>0){let r=n.map(e=>`${e.start}_${e.end}`);if("first_follow_time"===e.type){t.first_follow_ranges=r;let e=n.reduce((e,t)=>t.start<e.start?t:e).start,s=n.reduce((e,t)=>t.end>e.end?t:e).end;t.first_follow_start=e,t.first_follow_end=s}else if("last_follow_time"===e.type){t.latest_follow_ranges=r;let e=n.reduce((e,t)=>t.start<e.start?t:e).start,s=n.reduce((e,t)=>t.end>e.end?t:e).end;t.latest_follow_start=e,t.latest_follow_end=s}else if("next_follow_time"===e.type){t.next_follow_ranges=r;let e=n.reduce((e,t)=>t.start<e.start?t:e).start,s=n.reduce((e,t)=>t.end>e.end?t:e).end;t.next_follow_start=e,t.next_follow_end=s}console.log("多选时间处理结果:",{timeRanges:n,timeRangeStrings:r,earliestStart:t[`${"first_follow_time"===e.type?"first":"last_follow_time"===e.type?"latest":"next"}_follow_start`],latestEnd:t[`${"first_follow_time"===e.type?"first":"last_follow_time"===e.type?"latest":"next"}_follow_end`]})}}else{console.log("单选时间值:",e.value);let r=R(e.value);console.log("单选时间范围:",r),r&&("first_follow_time"===e.type?(t.first_follow_start=r.start,t.first_follow_end=r.end):"last_follow_time"===e.type?(t.latest_follow_start=r.start,t.latest_follow_end=r.end):"next_follow_time"===e.type&&(t.next_follow_start=r.start,t.next_follow_end=r.end))}}}}),console.log("buildCurrentFilters 最终结果:",t),t};return e?i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-start justify-center z-50 pt-4",onClick:t,children:(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl max-w-7xl w-full mx-4 h-[70vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[i.jsx("div",{className:"flex-1 overflow-y-auto p-6 pb-0",children:"select_condition"===n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"任务Agent - 筛选条件设置"}),i.jsx("p",{className:"text-gray-300",children:"选择筛选条件类型，逐步设置筛选条件"})]}),i.jsx("button",{onClick:I,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),a.length>0&&(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"任务名称"}),i.jsx("input",{type:"text",value:C,onChange:e=>M(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholder:"请输入任务名称"})]}),i.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"已设置的筛选条件"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(e=>{let t="",r="last_follow_time"===e.type||"first_follow_time"===e.type||"next_follow_time"===e.type;if(e.value.startsWith("custom:")){let[r,n]=e.value.replace("custom:","").split("_");t=r&&n?`${r} 至 ${n}`:r?`从「${r}」开始`:n?`到「${n}」结束`:"请选择时间"}else if(r){if(e.value.includes(","))t=e.value.split(",").map(t=>{let r=R(t);if(r)return`${r.start} 至 ${r.end}`;{let r=e.options.find(e=>e.value===t);return r?.label||t}}).join("；");else{let r=R(e.value);if(r)t=`${r.start} 至 ${r.end}`;else{let r=e.options.find(t=>t.value===e.value);t=r?.label||""}}}else if(e.value.includes(","))t=e.value.split(",").map(t=>e.options.find(e=>e.value===t)?.label||t).join("、");else{let r=e.options.find(t=>t.value===e.value);t=r?.label||""}return(0,i.jsxs)("div",{className:"flex items-center bg-blue-500/20 border border-blue-500/30 rounded-lg px-3 py-2",children:[(0,i.jsxs)("span",{className:"text-blue-300 text-sm mr-2",children:[e.label,":"]}),i.jsx("span",{className:"text-white text-sm mr-2",children:t}),i.jsx("button",{onClick:()=>O(e.id),className:"text-blue-400 hover:text-blue-300 transition-colors",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]},e.id)})})]}),a.length>0&&i.jsx("div",{className:"mb-6 p-4 bg-green-500/20 border border-green-500/30 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("svg",{className:"w-5 h-5 text-green-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{className:"text-green-200 font-medium",children:"符合条件的线索数"})]}),i.jsx("div",{className:"text-right",children:w?(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-green-400",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i.jsx("span",{className:"text-green-400 text-sm",children:"计算中..."})]}):i.jsx("div",{className:"text-green-400 font-bold text-lg",children:b})})]})}),(0,i.jsxs)("div",{className:"flex h-[500px]",children:[(0,i.jsxs)("div",{className:"w-1/3 pr-4 border-r border-white/10",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"筛选条件"}),i.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:_.map(e=>{let t=a.some(t=>t.id===e.id),r=l?.id===e.id;return i.jsx("div",{onClick:()=>P(e),className:`p-3 rounded-lg cursor-pointer transition-all duration-300 ${r?"bg-blue-500/30 border border-blue-500/50":t?"bg-green-500/20 border border-green-500/30":"bg-white/5 border border-white/10 hover:bg-white/10"}`,children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex-1",children:[i.jsx("h4",{className:`font-medium text-sm ${r?"text-blue-300":t?"text-green-300":"text-white"}`,children:e.label}),t&&(0,i.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["已设置: ",(()=>{let t=a.find(t=>t.id===e.id);return t?t.value.includes(",")?t.value.split(",").map(t=>e.options.find(e=>e.value===t)?.label||t).join("、"):e.options.find(e=>e.value===t.value)?.label||"":""})()]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[t&&i.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),i.jsx("svg",{className:`w-4 h-4 ${r?"text-blue-400":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})},e.id)})})]}),i.jsx("div",{className:"flex-1 pl-4",children:l?(0,i.jsxs)("div",{children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:(0,i.jsxs)("h3",{className:"text-lg font-semibold text-white",children:[l.label," 数据"]})}),j?i.jsx("div",{className:"flex items-center justify-center py-12",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-6 w-6 text-blue-400",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i.jsx("span",{className:"text-blue-300",children:"正在获取数据..."})]})}):i.jsx("div",{className:"space-y-3 mb-4",children:l.options.map((e,t)=>{let r="last_follow_time"===l.type||"first_follow_time"===l.type||"next_follow_time"===l.type,n=a.find(e=>e.id===l.id),s=n&&(n.value===e.value||n.value.includes(","+e.value)||n.value.startsWith(e.value+",")||n.value.endsWith(","+e.value));if(r&&"custom"!==e.value){let r=R(e.value);return i.jsx("div",{className:`border rounded-lg p-3 transition-colors cursor-pointer ${s?"bg-blue-500/30 border-blue-500/50":"bg-white/5 border-white/10 hover:bg-white/10"}`,onClick:()=>L(e.value),children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${s?"bg-blue-500 border-blue-500":"border-gray-400"}`,children:s&&i.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,i.jsxs)("div",{children:[i.jsx("h4",{className:"text-white font-medium text-sm",children:e.label}),i.jsx("p",{className:"text-gray-400 text-xs mt-1",children:r?`${r.start} 至 ${r.end}`:""})]})]}),(0,i.jsxs)("div",{className:"text-right",children:[i.jsx("div",{className:"text-blue-400 font-bold text-sm",children:"时间筛选"}),i.jsx("div",{className:"text-gray-400 text-xs",children:"选择后刷新"})]})]})},`${l.id}-${e.value}-${t}`)}return r&&"custom"===e.value?i.jsx("div",{className:`border rounded-lg p-3 transition-colors cursor-pointer ${s?"bg-blue-500/30 border-blue-500/50":"bg-white/5 border-white/10 hover:bg-white/10"}`,onClick:()=>L(e.value),children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${s?"bg-blue-500 border-blue-500":"border-gray-400"}`,children:s&&i.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,i.jsxs)("div",{children:[i.jsx("h4",{className:"text-white font-medium text-sm",children:e.label}),i.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"自定义时间范围"})]})]}),(0,i.jsxs)("div",{className:"text-right",children:[i.jsx("div",{className:"text-blue-400 font-bold text-sm",children:"时间筛选"}),i.jsx("div",{className:"text-gray-400 text-xs",children:"选择后刷新"})]})]})},`${l.id}-${e.value}-${t}`):i.jsx("div",{className:`border rounded-lg p-3 transition-colors cursor-pointer ${s?"bg-blue-500/30 border-blue-500/50":"bg-white/5 border-white/10 hover:bg-white/10"}`,onClick:()=>L(e.value),children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${s?"bg-blue-500 border-blue-500":"border-gray-400"}`,children:s&&i.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,i.jsxs)("div",{children:[i.jsx("h4",{className:"text-white font-medium text-sm",children:e.label}),i.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"包含线索"})]})]}),(0,i.jsxs)("div",{className:"text-right",children:[i.jsx("div",{className:"text-blue-400 font-bold text-sm",children:e.count||0}),i.jsx("div",{className:"text-gray-400 text-xs",children:"线索数"})]})]})},`${l.id}-${e.value}-${t}`)})}),f&&l&&(0,i.jsxs)("div",{className:"mt-6 p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[i.jsx("h4",{className:"text-white font-medium mb-4",children:"自定义时间范围"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"开始时间"}),i.jsx(sN,{selected:h.startTime,onChange:e=>x(t=>({...t,startTime:e})),selectsStart:!0,startDate:h.startTime||void 0,endDate:h.endTime||void 0,className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholderText:"选择开始时间",dateFormat:"yyyy-MM-dd"})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"结束时间"}),i.jsx(sN,{selected:h.endTime,onChange:e=>x(t=>({...t,endTime:e})),selectsEnd:!0,startDate:h.startTime||void 0,endDate:h.endTime||void 0,minDate:h.startTime||void 0,className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholderText:"选择结束时间",dateFormat:"yyyy-MM-dd"})]})]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-3",children:[i.jsx("button",{onClick:()=>{g(!1),x({startTime:null,endTime:null})},className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"取消"}),i.jsx("button",{onClick:()=>{let e;if(!l)return;let t="";if(h.startTime&&h.endTime){let e=h.startTime.toISOString().split("T")[0],r=h.endTime.toISOString().split("T")[0];t=`custom:${e}_${r}`}else if(h.startTime){let e=h.startTime.toISOString().split("T")[0];t=`custom:${e}_`}else{if(!h.endTime)return;let e=h.endTime.toISOString().split("T")[0];t=`custom:_${e}`}let r={...l,value:t},n=a.findIndex(e=>e.id===l.id);-1!==n?(e=[...a])[n]=r:e=[...a,r],o(e),k(t=>t.map(t=>e.some(e=>e.id===t.id)?t:{...t,options:t.options.map(e=>({...e,count:0}))})),s("select_condition"),d(null),g(!1),x({startTime:null,endTime:null})},disabled:!h.startTime&&!h.endTime,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"确定"})]})]})]})]}):i.jsx("div",{className:"flex items-center justify-center h-full",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),i.jsx("p",{className:"text-gray-400",children:"请从左侧选择筛选条件"})]})})})]})]}):"creating_task"===n?i.jsx(i.Fragment,{children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"正在创建任务"}),i.jsx("p",{className:"text-gray-300",children:"系统正在处理您的筛选条件"})]}),(0,i.jsxs)("div",{className:"mb-8",children:[i.jsx("div",{className:"relative w-32 h-32 mx-auto mb-4",children:i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsxs)("svg",{className:"w-16 h-16 text-blue-400 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})}),i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 mb-4",children:i.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${u}%`}})}),i.jsx("p",{className:"text-gray-300 text-sm",children:u>=100?"任务创建完成":"正在创建任务..."})]})]})}):"task_complete"===n?i.jsx(i.Fragment,{children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"任务创建成功！"}),i.jsx("p",{className:"text-gray-300",children:"外呼任务已创建，可以开始配置话术"})]}),(0,i.jsxs)("div",{className:"mb-8",children:[i.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-green-500/20 rounded-full flex items-center justify-center",children:i.jsx("svg",{className:"w-12 h-12 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),T&&(0,i.jsxs)("div",{className:"space-y-4 text-left max-w-md mx-auto",children:[(0,i.jsxs)("div",{className:"bg-blue-500/20 border border-blue-500/30 rounded-lg p-4",children:[(0,i.jsxs)("div",{className:"flex items-center mb-2",children:[i.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full mr-2 animate-pulse"}),i.jsx("span",{className:"text-blue-300 font-medium",children:"任务信息"})]}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-300",children:"任务ID:"}),i.jsx("span",{className:"text-white font-medium",children:T.id})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-300",children:"任务名称:"}),i.jsx("span",{className:"text-white font-medium",children:T.name})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-300",children:"线索数量:"}),i.jsx("span",{className:"text-green-400 font-bold",children:T.filteredCount})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-300",children:"创建人:"}),i.jsx("span",{className:"text-white",children:T.create_name})]})]})]}),(0,i.jsxs)("div",{className:"bg-purple-500/20 border border-purple-500/30 rounded-lg p-4",children:[(0,i.jsxs)("div",{className:"flex items-center mb-2",children:[i.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full mr-2"}),i.jsx("span",{className:"text-purple-300 font-medium",children:"下一步"})]}),i.jsx("p",{className:"text-gray-300 text-sm",children:'点击"话术生成Agent"配置个性化话术'})]})]})]})]})}):null}),(0,i.jsxs)("div",{className:"p-6 pt-0 border-t border-white/10",children:["select_condition"===n&&(0,i.jsxs)("div",{className:"flex justify-end space-x-3",children:[i.jsx("button",{onClick:I,className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"取消"}),i.jsx("button",{onClick:()=>{a.length>0?$():alert("请至少选择一个筛选条件")},disabled:0===a.length,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-medium rounded-lg transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500/50 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:"创建任务"})]}),"task_complete"===n&&i.jsx("div",{className:"flex justify-center",children:i.jsx("button",{onClick:I,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-medium rounded-lg transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500/50",children:"完成"})})]})]})}):null}r(2094),r(435);let sS={leads_product:"线索产品",leads_type:"线索等级",first_follow:"首次跟进时间区间",latest_follow:"最近跟进时间区间",next_follow:"下次跟进时间区间",first_arrive:"首次到店时间区间",is_arrive:"是否到店"};function sC({isOpen:e,onClose:t,tasks:r=[],onViewTaskDetails:n}){let[s,a]=(0,c.useState)(!1),[o,l]=(0,c.useState)(r),[d,u]=(0,c.useState)(!1),p=e=>{switch(e){case 1:return{text:"已创建",color:"bg-blue-500/20 text-blue-300"};case 2:return{text:"开始外呼",color:"bg-green-500/20 text-green-300"};case 3:return{text:"外呼完成",color:"bg-purple-500/20 text-purple-300"};case 4:return{text:"已删除",color:"bg-red-500/20 text-red-300"};default:return{text:"未知状态",color:"bg-gray-500/20 text-gray-300"}}},h=(e,t)=>{if(e&&e.length>0)return e.map((e,t)=>{if("string"==typeof e)return e;let r=e.label||e.key||"",n=e.value||e.val||"",s=sS[r]||r;return`${s}: ${n}`});if(t){let e=[],r={};return Object.entries(t).forEach(([t,n])=>{let s=sS[t]||t;if(t.includes("_start")||t.includes("_end")){let e=t.replace(/_start$|_end$/,"");r[e]||(r[e]={label:sS[e]||e,start:void 0,end:void 0}),t.endsWith("_start")?r[e].start=String(n):t.endsWith("_end")&&(r[e].end=String(n))}else if("is_arrive"===t){let t="1"===n||1===n||!0===n?"是":"否";e.push(`${s}: ${t}`)}else e.push(`${s}: ${String(n)}`)}),Object.values(r).forEach(t=>{(t.start||t.end)&&(t.start&&t.end?e.push(`${t.label}: ${t.start} 至 ${t.end}`):t.start?e.push(`${t.label}: ${t.start} 起`):t.end&&e.push(`${t.label}: 至 ${t.end}`))}),e}return[]},x=async e=>{try{u(!0);let t=await m.Md.getCallTaskDetails(e);"success"===t.status&&t.data?n?.(t.data):alert("获取任务详情失败："+(t.message||"未知错误"))}catch(e){console.error("获取任务详情失败:",e),alert("获取任务详情失败，请重试")}finally{u(!1)}};return e?(0,i.jsxs)(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-start justify-center z-50 pt-4",onClick:t,children:i.jsx("div",{className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl max-w-7xl w-full mx-4 h-[70vh] flex flex-col",onClick:e=>e.stopPropagation(),children:(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 pb-0",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"任务Agent"}),i.jsx("p",{className:"text-gray-300",children:"管理和查看已创建的任务"})]}),i.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"mb-6",children:i.jsx("button",{onClick:()=>a(!0),className:"w-full px-6 py-4 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-medium rounded-lg transition-all duration-200 hover:shadow-lg hover:scale-105",children:(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[i.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"创建新任务"]})})}),0===o.length?(0,i.jsxs)("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-gray-400 mb-4",children:i.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),i.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"暂无任务"}),i.jsx("p",{className:"text-gray-400",children:"点击上方按钮创建您的第一个任务"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(e=>{let t=h(e.conditions,e.size_desc);return(0,i.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 hover:bg-white/10 transition-colors",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-white font-medium",children:e.name}),i.jsx("div",{className:`px-2 py-1 rounded-full text-xs ${p(e.task_type).color}`,children:p(e.task_type).text})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"text-sm text-gray-300",children:[i.jsx("span",{className:"font-medium",children:"筛选条件:"}),i.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.length>0?t.map((e,t)=>i.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-300 text-xs rounded",children:e},`condition-${t}-${e}`)):i.jsx("span",{className:"text-gray-400 text-xs",children:"无筛选条件"})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-gray-300",children:"目标线索:"}),i.jsx("span",{className:"text-green-400 font-bold",children:e.filteredCount})]}),(0,i.jsxs)("div",{className:"text-xs text-gray-400",children:["创建时间: ",e.createdAt]})]}),(0,i.jsxs)("div",{className:"flex space-x-2 mt-3",children:[i.jsx("button",{onClick:()=>x(e.id),disabled:d,className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white text-xs rounded transition-colors",children:d?"加载中...":"查看详情"}),i.jsx("button",{className:"px-3 py-1.5 bg-red-600 hover:bg-red-500 text-white text-xs rounded transition-colors",children:"删除"})]})]},e.id)})})]})})}),i.jsx(sD,{isOpen:s,onClose:()=>a(!1),onTaskCreated:e=>{let t={id:e.id?.toString()||`task-${Date.now()}`,name:e.name,createdAt:new Date().toLocaleString(),conditions:e.conditions||[],filteredCount:e.filteredCount||0,status:"pending"};l(e=>[t,...e]),a(!1),console.log("任务创建完成:",e),alert(`任务创建成功！
任务ID: ${e.id}
任务名称: ${e.name}
线索数量: ${e.filteredCount}`)}})]}):null}let sM={leads_product:"线索产品",leads_type:"线索等级",first_follow:"首次跟进时间区间",latest_follow:"最近跟进时间区间",next_follow:"下次跟进时间区间",first_arrive:"首次到店时间区间",is_arrive:"是否到店"};function sT({isOpen:e,onClose:t,onTaskSelect:r,tasks:n=[]}){let s=e=>{switch(e){case 1:return{text:"已创建",color:"bg-blue-500/20 text-blue-300"};case 2:return{text:"开始外呼",color:"bg-green-500/20 text-green-300"};case 3:return{text:"外呼完成",color:"bg-purple-500/20 text-purple-300"};case 4:return{text:"已删除",color:"bg-red-500/20 text-red-300"};default:return{text:"未知状态",color:"bg-gray-500/20 text-gray-300"}}},a=n.filter(e=>1===e.task_type),o=(e,t)=>{if(e&&e.length>0)return e.map((e,t)=>{if("string"==typeof e)return e;let r=e.label||e.key||"",n=e.value||e.val||"",s=sM[r]||r;return`${s}: ${n}`});if(t){let e=[],r={};return Object.entries(t).forEach(([t,n])=>{if(null===n)return;let s=sM[t]||t;if(t.includes("_start")||t.includes("_end")){let e=t.replace(/_start$|_end$/,"");r[e]||(r[e]={label:sM[e]||e,start:void 0,end:void 0}),t.endsWith("_start")?r[e].start=String(n):t.endsWith("_end")&&(r[e].end=String(n))}else if(t.includes("_ranges")&&Array.isArray(n)){let e=t.replace(/_ranges$/,"");r[e]||(r[e]={label:sM[e]||e,ranges:[]}),r[e].ranges=n}else if("is_arrive"===t){let t="1"===n||1===n||!0===n?"是":"否";e.push(`${s}: ${t}`)}else Array.isArray(n)?n.length>0&&e.push(`${s}: ${n.join("、")}`):e.push(`${s}: ${String(n)}`)}),Object.values(r).forEach(t=>{if(t.ranges&&t.ranges.length>0){let r=t.ranges.map(e=>{let[t,r]=e.split("_");return`${t} 至 ${r}`});e.push(`${t.label}: ${r.join("、")}`)}else(t.start||t.end)&&(t.start&&t.end?e.push(`${t.label}: ${t.start} 至 ${t.end}`):t.start?e.push(`${t.label}: ${t.start} 起`):t.end&&e.push(`${t.label}: 至 ${t.end}`))}),e}return[]};return e?i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-start justify-center z-50 pt-4",onClick:t,children:(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl max-w-7xl w-full mx-4 h-[70vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 pb-0",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"话术生成Agent"}),i.jsx("p",{className:"text-gray-300",children:"选择已创建的任务，配置个性化话术"})]}),i.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(e=>{let t=o(e.conditions,e.size_desc);return(0,i.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 hover:bg-white/10 transition-colors cursor-pointer",onClick:()=>r(e),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-white font-medium",children:e.name}),i.jsx("div",{className:`px-2 py-1 rounded-full text-xs ${s(e.task_type).color}`,children:s(e.task_type).text})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"text-sm text-gray-300",children:[i.jsx("span",{className:"font-medium",children:"筛选条件:"}),i.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.length>0?t.map((e,t)=>i.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-300 text-xs rounded",children:e},`condition-${t}-${e}`)):i.jsx("span",{className:"text-gray-400 text-xs",children:"无筛选条件"})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-gray-300",children:"目标线索:"}),i.jsx("span",{className:"text-green-400 font-bold",children:e.targetCount})]}),(0,i.jsxs)("div",{className:"text-xs text-gray-400",children:["创建时间: ",e.createdAt]})]})]},e.id)})}),0===a.length&&(0,i.jsxs)("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-gray-400 mb-4",children:i.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),i.jsx("p",{className:"text-gray-300 mb-2",children:"暂无已创建的任务"}),i.jsx("p",{className:"text-gray-400 text-sm",children:'请先使用"任务Agent"创建任务'})]})]}),i.jsx("div",{className:"p-6 pt-0 border-t border-white/10",children:i.jsx("div",{className:"flex justify-end space-x-3",children:i.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"取消"})})})]})}):null}let sE={leads_product:"线索产品",leads_type:"线索等级",first_follow:"首次跟进时间区间",latest_follow:"最近跟进时间区间",next_follow:"下次跟进时间区间",first_arrive:"首次到店时间区间",is_arrive:"是否到店"};function sP({isOpen:e,onClose:t,selectedTask:r,onBackToTaskDetail:n,onScriptConfigured:s}){let[a,o]=(0,c.useState)("script_config"),[l,d]=(0,c.useState)(r),[u,p]=(0,c.useState)("official_scenes"),[h,x]=(0,c.useState)({name:"",description:"",dialogue_target:"",dialogue_opening_prompt:"",dialogue_bg:"",dialogue_skill:"",dialogue_flow:"",dialogue_constraint:"",bot_name:"",bot_post:"电销专员",bot_age:"",bot_style:""}),[f,g]=(0,c.useState)([]),[b,v]=(0,c.useState)(null),[w,y]=(0,c.useState)(!1),[j,N]=(0,c.useState)(null),[_,k]=(0,c.useState)(!1),[D,S]=(0,c.useState)({customerName:"",gender:"male",age:"",company:"",position:"",industry:"",region:"",productInterest:"",budget:"",urgency:"",decisionMaker:!1,previousContact:!1,contactHistory:"",objections:"",goals:"",skills:"",painPoints:"",competitorInfo:"",referralSource:"",customNotes:""}),[C,M]=(0,c.useState)([{id:"1",name:"电销专员",description:"专业的电话销售专员"},{id:"2",name:"DCC经理",description:"数字客户中心经理"},{id:"3",name:"销售顾问",description:"专业的销售顾问"}]),[T,E]=(0,c.useState)("1"),[P,L]=(0,c.useState)(""),[O,$]=(0,c.useState)([{id:"1",name:"亲切",description:"亲切友好的沟通风格"},{id:"2",name:"自然",description:"自然流畅的沟通风格"},{id:"3",name:"口语化",description:"口语化的表达方式"},{id:"4",name:"专业",description:"专业严谨的沟通风格"},{id:"5",name:"活泼",description:"活泼开朗的沟通风格"},{id:"6",name:"严肃",description:"严肃认真的沟通风格"}]),[I,R]=(0,c.useState)([]),[Y,F]=(0,c.useState)(""),[A,W]=(0,c.useState)([{id:"1",name:"专业顾问",description:"以专业知识和经验为客户提供建议"},{id:"2",name:"朋友式销售",description:"以朋友的身份与客户建立信任关系"},{id:"3",name:"问题解决者",description:"专注于解决客户的具体问题和需求"},{id:"4",name:"价值创造者",description:"帮助客户发现和创造新的价值机会"}]),[H,B]=(0,c.useState)([{id:"1",name:"正式专业",description:"使用正式的语言和专业的表达方式"},{id:"2",name:"轻松友好",description:"使用轻松友好的语言建立亲近感"},{id:"3",name:"直接简洁",description:"直接表达重点，避免冗长的描述"},{id:"4",name:"故事化",description:"通过故事和案例来传达信息"}]),[z,q]=(0,c.useState)(""),[Q,V]=(0,c.useState)(""),[K,U]=(0,c.useState)(""),[G,X]=(0,c.useState)(""),[J,Z]=(0,c.useState)([]),[ee,et]=(0,c.useState)(0),[er,en]=(0,c.useState)(""),es=(e,t)=>{if(e&&e.length>0)return e.map(e=>{let t=e.split(":");if(2===t.length){let e=t[0].trim(),r=t[1].trim(),n=sE[e]||e;return`${n}: ${r}`}return e});if(t){let e=[],r={};return Object.entries(t).forEach(([t,n])=>{if(null==n||""===n)return;let s=sE[t]||t;if(t.includes("_start")||t.includes("_end")){let e=t.replace(/_start$|_end$/,"");r[e]||(r[e]={label:sE[e]||e,start:void 0,end:void 0}),t.endsWith("_start")?r[e].start=String(n):t.endsWith("_end")&&(r[e].end=String(n))}else if(t.includes("_ranges")&&Array.isArray(n)){let e=t.replace(/_ranges$/,"");r[e]||(r[e]={label:sE[e]||e,ranges:[]}),r[e].ranges=n}else if("is_arrive"===t){let t="1"===n||1===n||!0===n?"是":"否";e.push(`${s}: ${t}`)}else if(Array.isArray(n))n.length>0&&e.push(`${s}: ${n.join("、")}`);else if("string"==typeof n&&n.includes(",")){let t=n.split(",").map(e=>e.trim()).filter(e=>e);t.length>0&&e.push(`${s}: ${t.join("、")}`)}else e.push(`${s}: ${String(n)}`)}),Object.values(r).forEach(t=>{if(t.ranges&&t.ranges.length>0){let r=t.ranges.map(e=>{let[t,r]=e.split("_");return`${t} 至 ${r}`});e.push(`${t.label}: ${r.join("、")}`)}else(t.start||t.end)&&(t.start&&t.end?e.push(`${t.label}: ${t.start} 至 ${t.end}`):t.start?e.push(`${t.label}: ${t.start} 起`):t.end&&e.push(`${t.label}: 至 ${t.end}`))}),e}return[]},ea=()=>{o("generating_script"),et(0);let e=setInterval(()=>{et(t=>t>=100?(clearInterval(e),o("script_complete"),s&&b&&setTimeout(()=>{s(b)},0),en(`
# 个性化话术生成结果

## 场景信息
${b?`
- 场景名称: ${b.scene_name}
- 场景类型: ${ef(b.scene_type)}
- 机器人姓名: ${b.bot_name}
- 机器人职位: ${b.bot_post}
- 机器人年龄: ${b.bot_age}岁
- 机器人风格: ${b.bot_style||"未设置"}
`:`
- 场景名称: ${h.name}
- 场景描述: ${h.description}
`}

## 筛选条件
${es(l?.conditions,l?.size_desc).map(e=>`- ${e}`).join("\n")}

## 销售身份
${A.find(e=>e.id===z)?.name||"专业顾问"}

## 沟通风格
${H.find(e=>e.id===Q)?.name||"正式专业"}

## 个性化话术
基于您选择的场景和配置信息，我为您生成了以下个性化话术：

**开场白：**
${b?b.dialogue_opening_prompt:"您好，我是[公司名称]的[姓名]。我想了解一下，您目前在这个领域遇到了哪些挑战？"}

**对话目标：**
${b?b.dialogue_target:"深入了解客户需求，提供合适的解决方案"}

**对话背景：**
${b?b.dialogue_bg:"基于客户的具体情况和需求进行个性化沟通"}

**对话流程：**
${b?b.dialogue_flow:"1. 开场白和自我介绍\n2. 需求挖掘和痛点分析\n3. 价值展示和方案介绍\n4. 异议处理和问题解答\n5. 成交促成和后续跟进"}

**对话约束：**
${b?b.dialogue_constraint:"1. 保持专业和友好的沟通态度\n2. 根据客户反应灵活调整话术内容\n3. 重点突出与客户需求相关的产品特性\n4. 准备应对常见的异议和疑问"}

## 关键标签
${b&&b.scene_tags?b.scene_tags.map(e=>`- ${e.tag_name}: ${e.tags}`).join("\n"):J.map(e=>`- ${e.name}: ${e.values.join(", ")}`).join("\n")}

## 注意事项
1. 根据客户反应灵活调整话术内容
2. 重点突出与客户需求相关的产品特性
3. 准备应对常见的异议和疑问
4. 保持专业和友好的沟通态度
5. 遵循场景设定的对话流程和约束条件
          `),100):t+15*Math.random()+5)},200)},ei=()=>{o("script_config"),et(0),en(""),p(""),k(!1),x({name:"",description:"",dialogue_target:"",dialogue_opening_prompt:"",dialogue_bg:"",dialogue_skill:"",dialogue_flow:"",dialogue_constraint:"",bot_name:"",bot_post:"电销专员",bot_age:"",bot_style:""}),E("1"),L(""),R([]),F(""),v(null),S({customerName:"",gender:"male",age:"",company:"",position:"",industry:"",region:"",productInterest:"",budget:"",urgency:"",decisionMaker:!1,previousContact:!1,contactHistory:"",objections:"",goals:"",skills:"",painPoints:"",competitorInfo:"",referralSource:"",customNotes:""}),q(""),V(""),U(""),X(""),Z([]),t()},eo=e=>{E(e);let t=C.find(t=>t.id===e);t&&x(e=>({...e,bot_post:t.name}))},el=e=>{R(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]);let t=(I.includes(e)?I.filter(t=>t!==e):[...I,e]).map(e=>{let t=O.find(t=>t.id===e);return t?t.name:""}).filter(e=>e);x(e=>({...e,bot_style:t.join("; ")}))},ec=(e,t,r)=>{Z(n=>n.map(n=>n.id===e?{...n,[t]:r}:n))},ed=(e,t)=>{t.trim()&&Z(r=>r.map(r=>r.id===e?{...r,values:[...r.values,t.trim()]}:r))},eu=(e,t)=>{Z(r=>r.map(r=>r.id===e?{...r,values:r.values.filter((e,r)=>r!==t)}:r))},ep=e=>{Z(t=>t.filter(t=>t.id!==e))},eh=async()=>{let e=[];if(h.name.trim()||e.push("场景名称"),h.bot_name.trim()||e.push("机器人姓名"),h.dialogue_target.trim()||e.push("对话目的"),h.dialogue_opening_prompt.trim()||e.push("开场白"),h.dialogue_flow.trim()||e.push("对话流程"),0===J.length&&e.push("标签组（至少添加一个标签组）"),e.length>0){alert(`请填写以下必填项：
${e.join("\n")}`);return}try{let e={scene_name:h.name,scene_detail:h.description,scene_type:2,bot_name:h.bot_name,bot_sex:h.bot_age?1:void 0,bot_age:parseInt(h.bot_age)||void 0,bot_post:h.bot_post,bot_style:h.bot_style,dialogue_target:h.dialogue_target,dialogue_bg:h.dialogue_bg,dialogue_skill:h.dialogue_skill,dialogue_flow:h.dialogue_flow,dialogue_constraint:h.dialogue_constraint,dialogue_opening_prompt:h.dialogue_opening_prompt,scene_tags:J.map(e=>({tag_name:e.name,tag_detail:e.description,tags:e.values.join("; ")}))},t=await m.F.createScene(e);if("success"===t.status){if(alert(_?"场景更新成功！":"自定义场景创建成功！"),_)v(e=>e?{...e,scene_name:h.name,scene_detail:h.description,dialogue_target:h.dialogue_target,dialogue_opening_prompt:h.dialogue_opening_prompt,dialogue_bg:h.dialogue_bg,dialogue_skill:h.dialogue_skill,dialogue_flow:h.dialogue_flow,dialogue_constraint:h.dialogue_constraint,bot_name:h.bot_name,bot_post:h.bot_post,bot_age:parseInt(h.bot_age)||0,bot_style:h.bot_style}:null),k(!1);else{let e={id:Date.now(),script_id:t.data.script_id,scene_name:h.name,scene_detail:h.description,scene_status:1,scene_type:2,scene_create_user_id:"",scene_create_user_name:"",scene_create_org_id:"",scene_create_time:new Date().toISOString(),bot_name:h.bot_name,bot_sex:null,bot_age:parseInt(h.bot_age)||0,bot_post:h.bot_post,bot_style:h.bot_style,dialogue_target:h.dialogue_target,dialogue_bg:h.dialogue_bg,dialogue_skill:h.dialogue_skill,dialogue_flow:h.dialogue_flow,dialogue_constraint:h.dialogue_constraint,dialogue_opening_prompt:h.dialogue_opening_prompt,scene_tags:J.map(e=>({id:Date.now()+Math.random(),script_id:t.data.script_id,tag_name:e.name,tag_detail:e.description,tags:e.values.join("; ")}))};v(e),p("scene_selected"),x({name:"",description:"",dialogue_target:"",dialogue_opening_prompt:"",dialogue_bg:"",dialogue_skill:"",dialogue_flow:"",dialogue_constraint:"",bot_name:"",bot_post:"电销专员",bot_age:"",bot_style:""}),R([]),E("1"),Z([])}}else alert("创建场景失败："+t.message)}catch(e){console.error("创建场景错误:",e),alert("创建场景失败，请重试")}},em=e=>{v(e),p("scene_selected"),k(!1),S(t=>({...t,customerName:e.bot_name,age:e.bot_age?.toString()||"",goals:e.dialogue_target,skills:e.dialogue_skill||"",customNotes:`场景背景: ${e.dialogue_bg}
对话流程: ${e.dialogue_flow}
对话约束: ${e.dialogue_constraint}`}))},ex=(e,t)=>{t.stopPropagation();let r={scene_name:`${e.scene_name} - 副本`,scene_detail:e.scene_detail,scene_type:2,bot_name:e.bot_name,bot_sex:e.bot_sex?parseInt(e.bot_sex):void 0,bot_age:e.bot_age,bot_post:e.bot_post,bot_style:e.bot_style,dialogue_target:e.dialogue_target,dialogue_bg:e.dialogue_bg,dialogue_skill:e.dialogue_skill,dialogue_flow:e.dialogue_flow,dialogue_constraint:e.dialogue_constraint,dialogue_opening_prompt:e.dialogue_opening_prompt,scene_tags:e.scene_tags?.map(e=>({tag_name:e.tag_name,tag_detail:e.tag_detail,tags:e.tags}))||[]},n=[];e.bot_style&&(n=e.bot_style.split(";").map(e=>e.trim()).filter(e=>e));let s=O.filter(e=>n.includes(e.name)).map(e=>e.id),a=C.find(t=>t.name===e.bot_post),i=a?a.id:"1",o=(e.scene_tags||[]).map((e,t)=>({id:`tag_${t}`,name:e.tag_name,description:e.tag_detail,values:e.tags?e.tags.split(";").map(e=>e.trim()).filter(e=>e):[]}));x({name:r.scene_name,description:r.scene_detail,dialogue_target:r.dialogue_target,dialogue_opening_prompt:r.dialogue_opening_prompt,dialogue_bg:r.dialogue_bg,dialogue_skill:r.dialogue_skill||"",dialogue_flow:r.dialogue_flow,dialogue_constraint:r.dialogue_constraint,bot_name:r.bot_name,bot_post:r.bot_post,bot_age:r.bot_age?.toString()||"",bot_style:r.bot_style||""}),R(s),E(i),Z(o),p("create_custom"),k(!1)},ef=e=>1===e?"官方场景":"自定义场景",eg=e=>1===e?"启用":"禁用";return e?i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-start justify-center z-50 pt-4",onClick:t,children:(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl max-w-7xl w-full mx-4 h-[90vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 pb-0",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"话术生成Agent"}),i.jsx("p",{className:"text-gray-300",children:"为任务配置个性化话术参数"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[n&&i.jsx("button",{onClick:n,className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"返回任务详情"}),i.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]}),"script_config"===a&&(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"mb-6 p-4 bg-blue-500/20 border border-blue-500/30 rounded-lg",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"任务摘要"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-300",children:"筛选条件:"}),i.jsx("div",{className:"text-white mt-1",children:es(l?.conditions,l?.size_desc).map((e,t)=>i.jsx("div",{className:"text-sm",children:e},`condition-${t}-${e}`))})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-300",children:"目标线索数:"}),i.jsx("div",{className:"text-white text-lg font-bold mt-1",children:l?.targetCount})]})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[i.jsx("div",{className:"mb-6",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsx("button",{onClick:()=>p("official_scenes"),className:`p-3 rounded-lg transition-all duration-300 border ${"official_scenes"===u?"bg-blue-500/20 border-blue-500/50 text-blue-300 shadow-lg":"bg-white/5 border-white/10 text-gray-300 hover:bg-white/10 hover:border-white/20"}`,children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm font-semibold mb-1",children:"官方场景"}),i.jsx("div",{className:"text-xs opacity-75",children:"使用预设的标准化场景"})]})}),i.jsx("button",{onClick:()=>p("custom_scenes"),className:`p-3 rounded-lg transition-all duration-300 border ${"custom_scenes"===u?"bg-green-500/20 border-green-500/50 text-green-300 shadow-lg":"bg-white/5 border-white/10 text-gray-300 hover:bg-white/10 hover:border-white/20"}`,children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm font-semibold mb-1",children:"自定义场景"}),i.jsx("div",{className:"text-xs opacity-75",children:"选择并编辑已有场景"})]})}),i.jsx("button",{onClick:()=>p("create_custom"),className:`p-3 rounded-lg transition-all duration-300 border ${"create_custom"===u?"bg-purple-500/20 border-purple-500/50 text-purple-300 shadow-lg":"bg-white/5 border-white/10 text-gray-300 hover:bg-white/10 hover:border-white/20"}`,children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm font-semibold mb-1",children:"创建新场景"}),i.jsx("div",{className:"text-xs opacity-75",children:"创建全新的个性化场景"})]})})]})}),("official_scenes"===u||"custom_scenes"===u)&&(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"official_scenes"===u?"官方场景列表":"自定义场景列表"}),w&&(0,i.jsxs)("div",{className:"flex items-center justify-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400"}),i.jsx("span",{className:"ml-3 text-gray-300",children:"加载场景中..."})]}),j&&i.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-4",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("svg",{className:"w-5 h-5 text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{className:"text-red-300",children:j})]})}),!w&&!j&&i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:f.filter(e=>"official_scenes"===u?1===e.scene_type:"custom_scenes"!==u||1!==e.scene_type).map(e=>(0,i.jsxs)("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors relative ${b?.id===e.id?"bg-blue-500/20 border-blue-500/50":"bg-white/5 border-white/10 hover:bg-white/10"}`,onClick:()=>em(e),children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[i.jsx("h4",{className:"text-white font-medium",children:e.scene_name}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${1===e.scene_type?"bg-blue-500/20 text-blue-300":"bg-green-500/20 text-green-300"}`,children:ef(e.scene_type)}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${1===e.scene_status?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:eg(e.scene_status)}),1===e.scene_type&&i.jsx("button",{onClick:t=>ex(e,t),className:"p-1.5 bg-blue-500/20 hover:bg-blue-500/30 text-blue-300 hover:text-blue-200 rounded-lg transition-colors",title:"复制场景",children:i.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"机器人:"}),(0,i.jsxs)("span",{className:"text-white ml-1",children:[e.bot_name," (",e.bot_post,")"]})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"目标:"}),i.jsx("p",{className:"text-white mt-1 line-clamp-2",children:e.dialogue_target})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"开场白:"}),i.jsx("p",{className:"text-white mt-1 line-clamp-2",children:e.dialogue_opening_prompt})]}),e.scene_tags&&e.scene_tags.length>0&&(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"标签:"}),i.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.scene_tags.map((e,t)=>i.jsx("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-300 text-xs rounded",children:e.tag_name},`tag-${t}-${e.tag_name}`))})]})]})]},e.id))}),!w&&!j&&0===f.filter(e=>"official_scenes"===u?1===e.scene_type:"custom_scenes"!==u||1!==e.scene_type).length&&(0,i.jsxs)("div",{className:"text-center py-8",children:[i.jsx("div",{className:"text-gray-400 mb-2",children:"暂无可用场景"}),i.jsx("p",{className:"text-gray-500 text-sm",children:"请选择其他类型或创建新场景"})]})]}),("create_custom"===u||_)&&(0,i.jsxs)("div",{className:"p-4 bg-purple-500/10 border border-purple-500/30 rounded-lg",children:[i.jsx("h4",{className:"text-white font-medium mb-4",children:_?"编辑场景":"创建新场景配置"}),i.jsx("div",{className:"mb-4 p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:(0,i.jsxs)("p",{className:"text-yellow-300 text-sm",children:[i.jsx("span",{className:"text-red-400",children:"*"})," 为必填项，请确保填写完整"]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["场景名称 ",i.jsx("span",{className:"text-red-400",children:"*"})]}),i.jsx("input",{type:"text",value:h.name,onChange:e=>x(t=>({...t,name:e.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500/50",placeholder:"请输入场景名称"})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"场景描述"}),i.jsx("input",{type:"text",value:h.description,onChange:e=>x(t=>({...t,description:e.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500/50",placeholder:"请输入场景描述"})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[i.jsx("h5",{className:"text-white font-medium mb-3",children:"机器人信息"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["机器人姓名 ",i.jsx("span",{className:"text-red-400",children:"*"})]}),i.jsx("input",{type:"text",value:h.bot_name,onChange:e=>x(t=>({...t,bot_name:e.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500/50",placeholder:"请输入机器人姓名"})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"机器人职位"}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx("div",{className:"flex flex-wrap gap-2",children:C.map(e=>i.jsx("button",{onClick:()=>eo(e.id),className:`px-3 py-1 rounded-full text-sm transition-colors ${T===e.id?"bg-blue-500 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:e.name},e.id))}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"text",value:P,onChange:e=>L(e.target.value),className:"flex-1 px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500/50",placeholder:"自定义职位"}),i.jsx("button",{onClick:()=>{if(P.trim()){let e={id:Date.now().toString(),name:P,description:"自定义机器人职位"};M(t=>[...t,e]),E(e.id),x(e=>({...e,bot_post:P})),L("")}},className:"px-3 py-2 bg-purple-500/20 text-purple-300 hover:bg-purple-500/30 rounded-lg text-sm transition-colors",children:"添加"})]})]})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"机器人年龄"}),i.jsx("input",{type:"number",value:h.bot_age,onChange:e=>x(t=>({...t,bot_age:e.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500/50",placeholder:"请输入机器人年龄"})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"机器人沟通风格"}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx("div",{className:"flex flex-wrap gap-2",children:O.map(e=>i.jsx("button",{onClick:()=>el(e.id),className:`px-3 py-1 rounded-full text-sm transition-colors ${I.includes(e.id)?"bg-green-500 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:e.name},e.id))}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"text",value:Y,onChange:e=>F(e.target.value),className:"flex-1 px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500/50",placeholder:"自定义风格"}),i.jsx("button",{onClick:()=>{if(Y.trim()){let e={id:Date.now().toString(),name:Y,description:"自定义沟通风格"};$(t=>[...t,e]),R(t=>[...t,e.id]),x(e=>({...e,bot_style:e.bot_style?`${e.bot_style}; ${Y}`:Y})),F("")}},className:"px-3 py-2 bg-purple-500/20 text-purple-300 hover:bg-purple-500/30 rounded-lg text-sm transition-colors",children:"添加"})]})]})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["对话目的 ",i.jsx("span",{className:"text-red-400",children:"*"})]}),i.jsx("textarea",{value:h.dialogue_target,onChange:e=>x(t=>({...t,dialogue_target:e.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500/50",placeholder:"请输入对话目的",rows:3})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["开场白 ",i.jsx("span",{className:"text-red-400",children:"*"})]}),i.jsx("textarea",{value:h.dialogue_opening_prompt,onChange:e=>x(t=>({...t,dialogue_opening_prompt:e.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500/50",placeholder:"请输入开场白",rows:3})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"对话场景"}),i.jsx("textarea",{value:h.dialogue_bg,onChange:e=>x(t=>({...t,dialogue_bg:e.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500/50",placeholder:"请输入对话场景",rows:3})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"对话技能"}),i.jsx("textarea",{value:h.dialogue_skill,onChange:e=>x(t=>({...t,dialogue_skill:e.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500/50",placeholder:"请输入对话技能",rows:3})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["对话流程 ",i.jsx("span",{className:"text-red-400",children:"*"})]}),i.jsx("textarea",{value:h.dialogue_flow,onChange:e=>x(t=>({...t,dialogue_flow:e.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500/50",placeholder:"请输入对话流程",rows:3})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"对话约束"}),i.jsx("textarea",{value:h.dialogue_constraint,onChange:e=>x(t=>({...t,dialogue_constraint:e.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500/50",placeholder:"请输入对话约束",rows:3})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsxs)("h5",{className:"text-white font-medium",children:["标签组 ",i.jsx("span",{className:"text-red-400",children:"*"})]}),i.jsx("button",{onClick:()=>{let e={id:Date.now().toString(),name:"",description:"",values:[]};Z(t=>[...t,e])},className:"px-3 py-1 bg-purple-500/20 text-purple-300 hover:bg-purple-500/30 rounded-lg text-sm transition-colors",children:"+ 添加标签组"})]}),0===J.length?(0,i.jsxs)("div",{className:"text-center py-8 bg-white/5 border border-white/10 rounded-lg",children:[i.jsx("div",{className:"text-gray-400 mb-2",children:"暂无标签组"}),i.jsx("p",{className:"text-gray-500 text-sm",children:'点击"添加标签组"按钮来创建新的标签组'})]}):i.jsx("div",{className:"space-y-4",children:J.map(e=>(0,i.jsxs)("div",{className:"p-4 bg-white/5 border border-white/10 rounded-lg",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("input",{type:"text",value:e.name,onChange:t=>ec(e.id,"name",t.target.value),className:"flex-1 px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500/50 mr-2",placeholder:"标签名称"}),i.jsx("button",{onClick:()=>ep(e.id),className:"text-red-400 hover:text-red-300 transition-colors",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),i.jsx("div",{className:"mb-3",children:i.jsx("input",{type:"text",value:e.description,onChange:t=>ec(e.id,"description",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500/50",placeholder:"标签描述"})}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"text",placeholder:"添加标签值",className:"flex-1 px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500/50",onKeyPress:t=>{if("Enter"===t.key){let r=t.target;ed(e.id,r.value),r.value=""}}}),i.jsx("button",{onClick:()=>{let t=document.querySelector(`input[placeholder="添加标签值"]`);t&&(ed(e.id,t.value),t.value="")},className:"px-3 py-2 bg-purple-500/20 text-purple-300 hover:bg-purple-500/30 rounded-lg text-sm transition-colors",children:"添加"})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:e.values.map((t,r)=>(0,i.jsxs)("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-300 rounded-lg text-sm flex items-center",children:[t,i.jsx("button",{onClick:()=>eu(e.id,r),className:"ml-1 text-purple-400 hover:text-purple-300",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]},`value-${r}-${t}`))})]})]},e.id))})]})]}),b&&"scene_selected"===u&&(0,i.jsxs)("div",{className:`p-4 border rounded-lg ${1===b.scene_type?"bg-blue-500/10 border-blue-500/30":"bg-green-500/10 border-green-500/30"}`,children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsxs)("h4",{className:"text-white font-medium",children:["已选择场景: ",b.scene_name]}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${1===b.scene_type?"bg-blue-500/20 text-blue-300":"bg-green-500/20 text-green-300"}`,children:ef(b.scene_type)}),1===b.scene_type&&i.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-gray-500/20 text-gray-300",children:"只读模式"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[1!==b.scene_type&&i.jsx("button",{onClick:()=>{b&&1!==b.scene_type&&(k(!0),x({name:b.scene_name,description:b.scene_detail,dialogue_target:b.dialogue_target,dialogue_opening_prompt:b.dialogue_opening_prompt,dialogue_bg:b.dialogue_bg,dialogue_skill:b.dialogue_skill||"",dialogue_flow:b.dialogue_flow,dialogue_constraint:b.dialogue_constraint,bot_name:b.bot_name,bot_post:b.bot_post,bot_age:b.bot_age?.toString()||"",bot_style:b.bot_style||""}))},className:"px-3 py-1 bg-green-500/20 text-green-300 hover:bg-green-500/30 rounded-lg text-sm transition-colors",children:"编辑场景"}),i.jsx("button",{onClick:()=>{v(null),p(1===b.scene_type?"official_scenes":"custom_scenes"),k(!1)},className:"text-gray-400 hover:text-white transition-colors",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"机器人信息:"}),(0,i.jsxs)("div",{className:"text-white mt-1",children:[(0,i.jsxs)("div",{children:["姓名: ",b.bot_name]}),(0,i.jsxs)("div",{children:["职位: ",b.bot_post]}),(0,i.jsxs)("div",{children:["年龄: ",b.bot_age,"岁"]}),b.bot_style&&(0,i.jsxs)("div",{children:["风格: ",b.bot_style]})]})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"对话目标:"}),i.jsx("p",{className:"text-white mt-1",children:b.dialogue_target})]}),(0,i.jsxs)("div",{className:"md:col-span-2",children:[i.jsx("span",{className:"text-gray-400",children:"开场白:"}),i.jsx("p",{className:"text-white mt-1",children:b.dialogue_opening_prompt})]}),(0,i.jsxs)("div",{className:"md:col-span-2",children:[i.jsx("span",{className:"text-gray-400",children:"对话背景:"}),i.jsx("p",{className:"text-white mt-1",children:b.dialogue_bg})]}),(0,i.jsxs)("div",{className:"md:col-span-2",children:[i.jsx("span",{className:"text-gray-400",children:"对话流程:"}),i.jsx("p",{className:"text-white mt-1",children:b.dialogue_flow})]}),(0,i.jsxs)("div",{className:"md:col-span-2",children:[i.jsx("span",{className:"text-gray-400",children:"对话约束:"}),i.jsx("p",{className:"text-white mt-1",children:b.dialogue_constraint})]}),b.scene_tags&&b.scene_tags.length>0&&(0,i.jsxs)("div",{className:"md:col-span-2",children:[i.jsx("span",{className:"text-gray-400",children:"场景标签:"}),i.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:b.scene_tags.map((e,t)=>(0,i.jsxs)("div",{className:"bg-purple-500/20 border border-purple-500/30 rounded-lg p-2",children:[i.jsx("div",{className:"text-purple-300 font-medium text-sm mb-1",children:e.tag_name}),e.tag_detail&&i.jsx("div",{className:"text-gray-300 text-xs mb-1",children:e.tag_detail}),e.tags&&i.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.split(",").map((e,t)=>i.jsx("span",{className:"px-2 py-1 bg-purple-500/30 text-purple-200 text-xs rounded",children:e.trim()},`tag-value-${t}-${e.trim()}`))})]},`selected-tag-${t}-${e.tag_name}`))})]})]})]})]})]}),"generating_script"===a&&(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"正在生成话术"}),i.jsx("p",{className:"text-gray-300",children:"AI正在为您的线索生成个性化话术"})]}),(0,i.jsxs)("div",{className:"mb-8",children:[i.jsx("div",{className:"relative w-32 h-32 mx-auto mb-4",children:i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsxs)("svg",{className:"w-16 h-16 text-green-400 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})}),i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 mb-4",children:i.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${ee}%`}})}),i.jsx("p",{className:"text-gray-300 text-sm",children:ee>=100?"话术生成完成":"正在生成话术..."})]})]}),"script_complete"===a&&(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"话术生成成功！"}),i.jsx("p",{className:"text-gray-300",children:"个性化话术已生成，可以开始外呼任务"})]}),(0,i.jsxs)("div",{className:"mb-8",children:[i.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-green-500/20 rounded-full flex items-center justify-center",children:i.jsx("svg",{className:"w-12 h-12 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),(0,i.jsxs)("div",{className:"space-y-4 text-left max-w-md mx-auto",children:[(0,i.jsxs)("div",{className:"bg-blue-500/20 border border-blue-500/30 rounded-lg p-4",children:[(0,i.jsxs)("div",{className:"flex items-center mb-2",children:[i.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full mr-2 animate-pulse"}),i.jsx("span",{className:"text-blue-300 font-medium",children:"话术已生成"})]}),i.jsx("p",{className:"text-gray-300 text-sm",children:"个性化话术配置完成"})]}),(0,i.jsxs)("div",{className:"bg-purple-500/20 border border-purple-500/30 rounded-lg p-4",children:[(0,i.jsxs)("div",{className:"flex items-center mb-2",children:[i.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full mr-2"}),i.jsx("span",{className:"text-purple-300 font-medium",children:"外呼Agent"})]}),i.jsx("p",{className:"text-gray-300 text-sm",children:"准备开始执行外呼任务"})]})]})]})]})]}),(0,i.jsxs)("div",{className:"p-6 pt-0 pb-4 border-t border-white/10 mt-auto",children:["script_config"===a&&(0,i.jsxs)("div",{className:"flex justify-between mt-4",children:[i.jsx("button",{onClick:n,className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"返回任务列表"}),(0,i.jsxs)("div",{className:"flex space-x-3",children:[i.jsx("button",{onClick:ei,className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"取消"}),"scene_selected"===u||"create_custom"===u||_?(0,i.jsxs)(i.Fragment,{children:[i.jsx("button",{onClick:ea,disabled:("create_custom"===u||_)&&(!h.name.trim()||!h.bot_name.trim()||!h.dialogue_target.trim()||!h.dialogue_opening_prompt.trim()||!h.dialogue_flow.trim()||0===J.length),className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-medium rounded-lg transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500/50 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:"生成话术"}),("create_custom"===u||_)&&i.jsx("button",{onClick:eh,disabled:!h.name.trim()||!h.bot_name.trim()||!h.dialogue_target.trim()||!h.dialogue_opening_prompt.trim()||!h.dialogue_flow.trim()||0===J.length,className:"px-6 py-2 bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-500 hover:to-blue-500 text-white font-medium rounded-lg transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-green-500/50 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:_?"更新场景":"保存场景"})]}):i.jsx("button",{onClick:ea,disabled:!0,className:"px-6 py-2 bg-gray-500 text-gray-300 font-medium rounded-lg cursor-not-allowed",children:"请先选择场景"})]})]}),"script_complete"===a&&i.jsx("div",{className:"flex justify-center mt-4",children:i.jsx("button",{onClick:ei,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-medium rounded-lg transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500/50",children:"完成"})})]})]})}):null}let sL={leads_product:"线索产品",leads_type:"线索等级",first_follow:"首次跟进时间区间",latest_follow:"最近跟进时间区间",next_follow:"下次跟进时间区间",first_arrive:"首次到店时间区间",is_arrive:"是否到店"};function sO({isOpen:e,onClose:t,selectedTask:r,onConfigureScript:n,onStartCalling:s,onOutboundCallSuccess:a}){let[o,l]=(0,c.useState)(!1),[d,u]=(0,c.useState)(r),p=e=>{switch(e){case 1:return{text:"已创建",color:"bg-blue-500/20 text-blue-300"};case 2:return{text:"开始外呼",color:"bg-green-500/20 text-green-300"};case 3:return{text:"外呼完成",color:"bg-purple-500/20 text-purple-300"};case 4:return{text:"已删除",color:"bg-red-500/20 text-red-300"};default:return{text:"未知状态",color:"bg-gray-500/20 text-gray-300"}}},h=async e=>{if(d)try{let t=await m.Md.updateTaskScriptId(parseInt(d.id),e.script_id);"success"===t.status?(u({...d,selectedScene:e,script_id:e.script_id,hasGeneratedScript:!0}),console.log("任务script_id更新成功:",e.script_id)):(console.error("更新任务script_id失败:",t.message),alert("更新任务场景失败，请重试"))}catch(e){console.error("更新任务script_id出错:",e),alert("更新任务场景失败，请重试")}},x=()=>{l(!0)},f=async()=>{if(d)try{let e=await m.Md.startCallTask(d.id);"success"===e.status?(alert("外呼任务已成功发起！外呼Agent开始工作。"),t(),a?.()):alert(`外呼发起失败：${e.message||"未知错误"}`)}catch(e){console.error("发起外呼失败:",e),alert("发起外呼失败，请重试")}},g=()=>d?.selectedScene;if(!e||!d)return null;let b=((e,t)=>{if(e&&e.length>0)return e.map((e,t)=>{if("string"==typeof e)return e;let r=e.label||e.key||"",n=e.value||e.val||"",s=sL[r]||r;return`${s}: ${n}`});if(t){let e=[],r={};return Object.entries(t).forEach(([t,n])=>{if(null===n)return;let s=sL[t]||t;if(t.includes("_start")||t.includes("_end")){let e=t.replace(/_start$|_end$/,"");r[e]||(r[e]={label:sL[e]||e,start:void 0,end:void 0}),t.endsWith("_start")?r[e].start=String(n):t.endsWith("_end")&&(r[e].end=String(n))}else if(t.includes("_ranges")&&Array.isArray(n)){let e=t.replace(/_ranges$/,"");r[e]||(r[e]={label:sL[e]||e,ranges:[]}),r[e].ranges=n}else if("is_arrive"===t){let t="1"===n||1===n||!0===n?"是":"否";e.push(`${s}: ${t}`)}else Array.isArray(n)?n.length>0&&e.push(`${s}: ${n.join("、")}`):e.push(`${s}: ${String(n)}`)}),Object.values(r).forEach(t=>{if(t.ranges&&t.ranges.length>0){let r=t.ranges.map(e=>{let[t,r]=e.split("_");return`${t} 至 ${r}`});e.push(`${t.label}: ${r.join("、")}`)}else(t.start||t.end)&&(t.start&&t.end?e.push(`${t.label}: ${t.start} 至 ${t.end}`):t.start?e.push(`${t.label}: ${t.start} 起`):t.end&&e.push(`${t.label}: 至 ${t.end}`))}),e}return[]})(d.conditions,d.size_desc);return(0,i.jsxs)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-start justify-center z-50 pt-4",onClick:t,children:[(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl max-w-4xl w-full mx-4 h-[80vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 pb-0",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"任务详情"}),i.jsx("p",{className:"text-gray-300",children:"查看任务详细信息和执行状态"})]}),i.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"任务状态"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-300",children:"任务名称:"}),i.jsx("span",{className:"text-white font-medium",children:d.name})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-300",children:"任务状态:"}),i.jsx("div",{className:`px-3 py-1 rounded-full text-sm ${p(d.task_type).color}`,children:p(d.task_type).text})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-300",children:"目标线索:"}),i.jsx("span",{className:"text-green-400 font-bold text-lg",children:d.targetCount})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-300",children:"创建时间:"}),i.jsx("span",{className:"text-white",children:d.createdAt})]})]})]}),(0,i.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"筛选条件"}),i.jsx("div",{className:"space-y-3",children:b.length>0?b.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full mr-3"}),i.jsx("span",{className:"text-white",children:e})]},`condition-${t}-${e}`)):i.jsx("div",{className:"text-gray-400 text-sm",children:"无筛选条件"})})]})]}),d.selectedScene&&(0,i.jsxs)("div",{className:"mt-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"已选择场景"}),(0,i.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[i.jsx("h4",{className:"text-white font-medium",children:d.selectedScene.scene_name}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${1===d.selectedScene.scene_type?"bg-blue-500/20 text-blue-300":"bg-green-500/20 text-green-300"}`,children:1===d.selectedScene.scene_type?"官方场景":"自定义场景"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-1",children:[i.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),i.jsx("span",{className:"text-green-300 text-sm",children:"话术已生成"})]}),i.jsx("button",{onClick:x,className:"px-3 py-1 bg-blue-500/20 text-blue-300 hover:bg-blue-500/30 rounded-lg text-sm transition-colors",children:"切换场景"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,i.jsxs)("div",{className:"bg-white/5 rounded-lg p-3",children:[i.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"机器人信息"}),(0,i.jsxs)("div",{className:"text-white",children:[i.jsx("div",{className:"font-medium",children:d.selectedScene.bot_name}),i.jsx("div",{className:"text-gray-300 text-xs",children:d.selectedScene.bot_post})]})]}),(0,i.jsxs)("div",{className:"bg-white/5 rounded-lg p-3",children:[i.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"对话目标"}),i.jsx("div",{className:"text-white text-xs line-clamp-2",children:d.selectedScene.dialogue_target})]}),(0,i.jsxs)("div",{className:"bg-white/5 rounded-lg p-3",children:[i.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"开场白"}),i.jsx("div",{className:"text-white text-xs line-clamp-2",children:d.selectedScene.dialogue_opening_prompt})]})]}),d.selectedScene.scene_tags&&d.selectedScene.scene_tags.length>0&&(0,i.jsxs)("div",{className:"mt-4",children:[i.jsx("div",{className:"text-gray-400 text-xs mb-2",children:"场景标签"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:d.selectedScene.scene_tags.map((e,t)=>i.jsx("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-300 text-xs rounded",children:e.tag_name},`selected-tag-${t}-${e.tag_name}`))})]})]})]}),(0,i.jsxs)("div",{className:"mt-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"后续操作"}),i.jsx("div",{className:"grid grid-cols-1 gap-4",children:d.selectedScene?(0,i.jsxs)("button",{onClick:f,disabled:!g(),className:`p-4 border rounded-lg transition-colors text-left ${g()?"bg-green-500/20 border-green-500/30 hover:bg-green-500/30":"bg-gray-500/20 border-gray-500/30 cursor-not-allowed"}`,children:[(0,i.jsxs)("div",{className:"flex items-center mb-2",children:[i.jsx("svg",{className:`w-6 h-6 mr-2 ${g()?"text-green-400":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),i.jsx("span",{className:`font-medium ${g()?"text-green-300":"text-gray-400"}`,children:"开始外呼"})]}),i.jsx("p",{className:`text-sm ${g()?"text-gray-400":"text-gray-500"}`,children:g()?"开始执行外呼任务":"请先配置话术场景"})]}):(0,i.jsxs)("button",{onClick:x,className:"p-4 bg-blue-500/20 border border-blue-500/30 rounded-lg hover:bg-blue-500/30 transition-colors text-left",children:[(0,i.jsxs)("div",{className:"flex items-center mb-2",children:[i.jsx("svg",{className:"w-6 h-6 text-blue-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),i.jsx("span",{className:"text-blue-300 font-medium",children:"配置话术"})]}),i.jsx("p",{className:"text-gray-400 text-sm",children:"为任务配置个性化话术参数"})]})})]})]}),i.jsx("div",{className:"p-6 pt-0 pb-8 border-t border-white/10",children:i.jsx("div",{className:"flex justify-end space-x-3",children:i.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"关闭"})})})]}),i.jsx(sP,{isOpen:o,onClose:()=>{l(!1)},selectedTask:d,onBackToTaskDetail:()=>{l(!1)},onScriptConfigured:h})]})}let s$={leads_product:"线索产品",leads_type:"线索等级",first_follow:"首次跟进时间区间",latest_follow:"最近跟进时间区间",next_follow:"下次跟进时间区间",first_arrive:"首次到店时间区间",is_arrive:"是否到店"};function sI({isOpen:e,onClose:t,taskInfo:r,taskLeads:n=[],onRefresh:s}){if(!e)return null;let a=r?.size_desc?(e=>{if(!e)return[];let t=[],r={};return Object.entries(e).forEach(([e,n])=>{let s=s$[e]||e;if(e.includes("_start")||e.includes("_end")){let t=e.replace(/_start$|_end$/,"");r[t]||(r[t]={label:s$[t]||t,start:void 0,end:void 0}),e.endsWith("_start")?r[t].start=String(n):e.endsWith("_end")&&(r[t].end=String(n))}else if("is_arrive"===e){let e="1"===n||1===n||!0===n?"是":"否";t.push(`${s}: ${e}`)}else t.push(`${s}: ${String(n)}`)}),Object.values(r).forEach(e=>{(e.start||e.end)&&(e.start&&e.end?t.push(`${e.label}: ${e.start} 至 ${e.end}`):e.start?t.push(`${e.label}: ${e.start} 起`):e.end&&t.push(`${e.label}: 至 ${e.end}`))}),t})(r.size_desc):[];return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-start justify-center z-50 pt-4",onClick:t,children:i.jsx("div",{className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl max-w-6xl w-full mx-4 h-[80vh] flex flex-col",onClick:e=>e.stopPropagation(),children:(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 pb-0",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"任务线索详情"}),r&&(0,i.jsxs)("div",{className:"text-gray-300 space-y-1",children:[(0,i.jsxs)("p",{children:["任务名称: ",r.task_name]}),(0,i.jsxs)("p",{children:["线索数量: ",r.leads_count]}),a.length>0&&(0,i.jsxs)("div",{className:"mt-2",children:[i.jsx("p",{className:"text-sm font-medium mb-1",children:"筛选条件:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:a.map((e,t)=>i.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-300 text-xs rounded",children:e},`condition-${t}-${e}`))})]})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[s&&i.jsx("button",{onClick:s,className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-500 text-white text-sm rounded transition-colors",children:"刷新数据"}),i.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]}),0===n.length?(0,i.jsxs)("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-gray-400 mb-4",children:i.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),i.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"暂无线索"}),i.jsx("p",{className:"text-gray-400",children:"该任务下没有找到线索信息"})]}):(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"筛选后的线索列表"}),(0,i.jsxs)("span",{className:"text-gray-300 text-sm",children:["共 ",n.length," 条线索"]})]}),i.jsx("div",{className:"bg-white/5 border border-white/10 rounded-lg overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-white/10",children:(0,i.jsxs)("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"序号"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"姓名"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"手机号"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"线索ID"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"状态"})]})}),i.jsx("tbody",{className:"divide-y divide-white/10",children:n.map((e,t)=>(0,i.jsxs)("tr",{className:"hover:bg-white/5 transition-colors",children:[i.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:t+1}),i.jsx("td",{className:"px-4 py-3 text-sm text-white font-medium",children:e.leads_name||"未知"}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:e.leads_phone||"未知"}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:e.leads_id}),i.jsx("td",{className:"px-4 py-3 text-sm",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${0===e.call_type?"bg-gray-500/20 text-gray-300":1===e.call_type?"bg-green-500/20 text-green-300":2===e.call_type?"bg-red-500/20 text-red-300":"bg-blue-500/20 text-blue-300"}`,children:0===e.call_type?"未开始":1===e.call_type?"已接通":2===e.call_type?"未接通":"未知"})})]},e.id||`lead-${t}`))})]})})})]})]})})})}let sR=new Map;function sY({isOpen:e,onClose:t,taskId:r,taskName:n,onRefresh:s,taskType:a,onTaskTypeChange:o}){let[l,d]=(0,c.useState)([]),[u,p]=(0,c.useState)(!1),[h,x]=(0,c.useState)(null),[f,g]=(0,c.useState)(new Set),[b,v]=(0,c.useState)(null),w=(0,c.useRef)(null),y=(0,c.useRef)(0),j=(e,t=3e4)=>{let r=sR.get(e);return!!r&&Date.now()-r.timestamp<t},N=e=>{let t=sR.get(e);return t?t.data:null},_=(e,t,r=3e4)=>{sR.set(e,{data:t,timestamp:Date.now(),cacheDuration:r})};(0,c.useCallback)(()=>{w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{k()},500)},[]);let k=async()=>{if(!e||!r)return;let t=Date.now();if(!(t-y.current<3e3)){p(!0),x(null),y.current=t;try{let e;let t=`task_execution_${r}`;if(j(t,1e4)?e=N(t):(e=await m.Md.queryTaskExecution(parseInt(r)),"success"===e.status&&_(t,e,1e4)),"success"!==e.status)throw Error("获取任务执行情况失败");let n=e.data,s=n.jobs_data||[],a=s.filter(e=>"Succeeded"===e.Status).length;s.filter(e=>"Scheduling"===e.Status).length;let i=s.length;if(v({is_completed:i>0&&a===i,total_calls:i,connected_calls:a,not_connected_calls:i-a,query_time:n.query_time}),!n.jobs_data||0===n.jobs_data.length){x("该任务暂无外呼记录"),p(!1);return}let o=n.jobs_data.map(e=>({job_id:e.JobId||"未知",job_group_id:e.JobGroupId||"未知",status:e.Status||"未知",priority:e.Priority||0,created_time:new Date().toISOString(),modified_time:new Date().toISOString(),raw_data:e}));d(o)}catch(e){x(e instanceof Error?e.message:"获取外呼状态失败")}finally{p(!1)}}},D=e=>{if(!e)return"bg-gray-500/20 text-gray-300";switch(e.toLowerCase()){case"executing":return"bg-blue-500/20 text-blue-300";case"succeeded":case"succeededfinish":case"succeededchathangupafternoanswer":case"succeededchathangupaftersilence":case"succeededclienthangupafternoanswer":case"succeededclienthangup":case"succeededtransferbyintent":case"succeededtransferafternoanswer":case"succeededinointeraction":case"succeedederror":case"succeededspecialinterceptvoiceassistant":case"succeededspecialinterceptextensionnumbertransfer":return"bg-green-500/20 text-green-300";case"failed":return"bg-red-500/20 text-red-300";case"noanswer":case"notexist":case"busy":case"notconnected":case"poweredoff":case"outofservice":case"inarrears":case"emptynumber":case"perdaycallcountlimit":case"contactblocklist":case"callernotregistered":case"terminated":case"verificationcancelled":case"outofservicenocall":case"inarrearsnocall":case"callingnumbernotexist":return"bg-yellow-500/20 text-yellow-300";default:return"bg-gray-500/20 text-gray-300"}},S=e=>e?({Executing:"正在拨打",Succeeded:"已接通",NoAnswer:"未接通-无人接听",NotExist:"未接通-空号",Busy:"未接通-占线",Cancelled:"未呼出-任务停止",Failed:"失败",NotConnected:"未接通-无法接通",PoweredOff:"未接通-关机",OutOfService:"未接通-被叫停机",InArrears:"未接通-被叫欠费",EmptyNumber:"未呼出-空号不外呼",PerDayCallCountLimit:"未呼出-超出每日上限",ContactBlockList:"未呼出-黑名单",CallerNotRegistered:"未呼出-主叫号码未注册",Terminated:"未呼出-被终止",VerificationCancelled:"未呼出-呼叫前验证不通过取消",OutOfServiceNoCall:"未呼出-被叫停机不外呼",InArrearsNoCall:"未呼出-被叫欠费不外呼",CallingNumberNotExist:"未呼出-主叫号码不存在",SucceededFinish:"已接通-正常完结",SucceededChatbotHangUpAfterNoAnswer:"已接通-拒识后机器人挂机",SucceededChatbotHangUpAfterSilence:"已接通-静默超时挂机",SucceededClientHangUpAfterNoAnswer:"已接通-拒识后用户挂机",SucceededClientHangUp:"已接通-用户无理由挂机",SucceededTransferByIntent:"已接通-命中意图转人工",SucceededTransferAfterNoAnswer:"已接通-拒识转人工",SucceededInoInterAction:"已接通-用户侧无交互",SucceededError:"已接通-系统异常中断",SucceededSpecialInterceptVoiceAssistant:"已接通-特殊情况拦截-语音助手",SucceededSpecialInterceptExtensionNumberTransfer:"已接通-特殊情况拦截-分机号转接"})[e]||e:"未知状态",C=e=>e?new Date(e).toLocaleString("zh-CN"):"未知时间",M=e=>{if(!e)return"0秒";let t=Math.floor(e/1e3),r=Math.floor(t/60),n=t%60;return r>0?`${r}分${n}秒`:`${n}秒`},T=e=>{let t=new Set(f);t.has(e)?t.delete(e):t.add(e),g(t)},E=()=>{t()},P=async e=>{try{let n=await m.Md.suspendResumeTask(parseInt(r),e);if("success"===n.status)console.log(`${"suspend"===e?"暂停":"重启"}任务成功:`,n.data),o&&o(n.data.task_type),k();else{console.error(`${"suspend"===e?"暂停":"重启"}任务失败:`,n.message);try{let e=await m.Md.queryTaskExecution(parseInt(r));if("success"===e.status){let r=e.data;if(console.log("操作失败后查询任务状态:",r),2!==r.task_type&&5!==r.task_type){console.log("任务状态已变化，关闭弹窗"),t();return}}}catch(e){console.error("查询任务状态失败:",e)}}}catch(n){console.error(`${"suspend"===e?"暂停":"重启"}任务失败:`,n);try{let e=await m.Md.queryTaskExecution(parseInt(r));if("success"===e.status){let r=e.data;if(console.log("操作失败后查询任务状态:",r),2!==r.task_type&&5!==r.task_type){console.log("任务状态已变化，关闭弹窗"),t();return}}}catch(e){console.error("查询任务状态失败:",e)}}};return e?i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-start justify-center z-[80] pt-4",onClick:E,children:(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl max-w-6xl w-full mx-4 max-h-[90vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"电话拨打情况"}),(0,i.jsxs)("p",{className:"text-gray-300",children:["任务：",n]})]}),i.jsx("button",{onClick:E,className:"text-gray-400 hover:text-white transition-colors",style:{position:"relative",zIndex:1e3},children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),b&&(0,i.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"任务状态概览"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,i.jsxs)("div",{className:"bg-white/5 rounded-lg p-3",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"任务状态"}),i.jsx("div",{className:`text-lg font-medium ${b.is_completed?"text-green-400":"text-blue-400"}`,children:b.is_completed?"已完成":"执行中"})]}),(0,i.jsxs)("div",{className:"bg-white/5 rounded-lg p-3",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"总任务数"}),i.jsx("div",{className:"text-lg font-medium text-white",children:b.total_calls||0})]}),(0,i.jsxs)("div",{className:"bg-white/5 rounded-lg p-3",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"已接通任务数"}),i.jsx("div",{className:"text-lg font-medium text-green-400",children:b.connected_calls||0})]}),(0,i.jsxs)("div",{className:"bg-white/5 rounded-lg p-3",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"未接通任务数"}),i.jsx("div",{className:"text-lg font-medium text-yellow-400",children:b.not_connected_calls||0})]})]}),b.query_time&&(0,i.jsxs)("div",{className:"mt-3 text-xs text-gray-400",children:["查询时间: ",b.query_time]})]}),u?(0,i.jsxs)("div",{className:"text-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-300",children:"正在加载外呼状态..."})]}):h?(0,i.jsxs)("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-400 mb-4",children:i.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),i.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"加载失败"}),i.jsx("p",{className:"text-gray-400",children:h})]}):0===l.length?(0,i.jsxs)("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-gray-400 mb-4",children:i.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),i.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"暂无外呼记录"}),i.jsx("p",{className:"text-gray-400",children:"该任务还没有外呼记录"})]}):(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"外呼任务详情"}),(0,i.jsxs)("span",{className:"text-gray-300 text-sm",children:["共 ",l.length," 个外呼任务"]})]}),i.jsx("div",{className:"space-y-3",children:l.map((e,t)=>{let r=f.has(e.job_id),n=e.raw_data?.Contacts?.[0],s=e.raw_data?.Tasks?.[0];return(0,i.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full mr-2 animate-pulse"}),(0,i.jsxs)("h4",{className:"text-white font-medium",children:["外呼任务 ",t+1]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[i.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${D(e.status)}`,children:S(e.status)}),i.jsx("button",{onClick:()=>T(e.job_id),className:"text-blue-400 hover:text-blue-300 text-sm transition-colors",children:r?"收起详情":"查看详情"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"联系人:"}),i.jsx("span",{className:"text-white ml-2",children:n?.ContactName||"未知"})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"电话:"}),i.jsx("span",{className:"text-white ml-2",children:n?.PhoneNumber||"未知"})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"通话时长:"}),i.jsx("span",{className:"text-white ml-2",children:s?M(s.Duration):"0秒"})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"拨打时间:"}),i.jsx("span",{className:"text-white ml-2",children:s?C(s.ActualTime):"未知"})]})]}),r&&(0,i.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/10 space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"任务ID:"}),i.jsx("span",{className:"text-white ml-2 font-mono text-xs",children:e.job_id})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"优先级:"}),i.jsx("span",{className:"text-white ml-2",children:e.priority})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"创建时间:"}),i.jsx("span",{className:"text-white ml-2",children:e.created_time||"未知"})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"修改时间:"}),i.jsx("span",{className:"text-white ml-2",children:e.modified_time||"未知"})]})]}),e.raw_data?.Contacts&&e.raw_data.Contacts.length>0&&(0,i.jsxs)("div",{className:"mt-3",children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"联系人信息:"}),i.jsx("div",{className:"text-white text-sm mt-1 bg-white/5 rounded p-2",children:e.raw_data.Contacts.map((e,t)=>(0,i.jsxs)("div",{className:"mb-2 last:mb-0",children:[(0,i.jsxs)("div",{children:["姓名: ",e.ContactName]}),(0,i.jsxs)("div",{children:["电话: ",e.PhoneNumber]}),(0,i.jsxs)("div",{children:["引用ID: ",e.ReferenceId]}),(0,i.jsxs)("div",{children:["联系人ID: ",e.ContactId]})]},t))})]}),e.raw_data?.Tasks&&e.raw_data.Tasks.length>0&&(0,i.jsxs)("div",{className:"mt-3",children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"通话详情:"}),i.jsx("div",{className:"space-y-2 mt-1",children:e.raw_data.Tasks.map((e,t)=>(0,i.jsxs)("div",{className:"bg-white/5 rounded p-2",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"任务ID:"}),i.jsx("span",{className:"text-white ml-1",children:e.TaskId})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"状态:"}),i.jsx("span",{className:`ml-1 px-1 py-0.5 rounded text-xs ${D(e.Status)}`,children:S(e.Status)})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"主叫号码:"}),i.jsx("span",{className:"text-white ml-1",children:e.CallingNumber})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"被叫号码:"}),i.jsx("span",{className:"text-white ml-1",children:e.CalledNumber})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"通话时长:"}),i.jsx("span",{className:"text-white ml-1",children:M(e.Duration)})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"实际时间:"}),i.jsx("span",{className:"text-white ml-1",children:C(e.ActualTime)})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"计划时间:"}),i.jsx("span",{className:"text-white ml-1",children:C(e.PlanedTime)})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"通话ID:"}),i.jsx("span",{className:"text-white ml-1",children:e.CallId})]})]}),e.Conversation&&e.Conversation.length>0&&(0,i.jsxs)("div",{className:"mt-2",children:[i.jsx("span",{className:"text-gray-400 text-xs",children:"对话记录:"}),i.jsx("div",{className:"mt-1 space-y-1",children:e.Conversation.map((e,t)=>(0,i.jsxs)("div",{className:"text-xs bg-white/5 rounded p-1",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:`text-xs px-1 py-0.5 rounded ${"Robot"===e.Speaker?"bg-blue-500/20 text-blue-300":"bg-green-500/20 text-green-300"}`,children:"Robot"===e.Speaker?"机器人":"客户"}),i.jsx("span",{className:"text-gray-400 text-xs",children:C(e.Timestamp)})]}),e.Script&&i.jsx("div",{className:"text-white mt-1",children:e.Script}),e.Summary&&e.Summary.length>0&&(0,i.jsxs)("div",{className:"mt-1 text-yellow-300 text-xs",children:["总结: ",e.Summary.join(", ")]})]},t))})]})]},t))})]}),e.raw_data?.Summary&&e.raw_data.Summary.length>0&&(0,i.jsxs)("div",{className:"mt-3",children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"总结信息:"}),i.jsx("div",{className:"text-white text-sm mt-1 bg-white/5 rounded p-2",children:e.raw_data.Summary.map((e,t)=>(0,i.jsxs)("div",{className:"mb-1 last:mb-0",children:[(0,i.jsxs)("span",{className:"text-gray-400",children:[e.SummaryName,":"]}),i.jsx("span",{className:"text-white ml-1",children:e.Content})]},t))})]}),e.raw_data?.Extras&&e.raw_data.Extras.length>0&&(0,i.jsxs)("div",{className:"mt-3",children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"额外信息:"}),i.jsx("div",{className:"text-white text-sm mt-1 bg-white/5 rounded p-2",children:e.raw_data.Extras.map((e,t)=>(0,i.jsxs)("div",{className:"mb-1 last:mb-0",children:[(0,i.jsxs)("span",{className:"text-gray-400",children:[e.Key,":"]}),i.jsx("span",{className:"text-white ml-1",children:e.Value})]},t))})]}),e.result&&(0,i.jsxs)("div",{className:"mt-3",children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"执行结果:"}),i.jsx("div",{className:"text-white text-sm mt-1 bg-white/5 rounded p-2",children:e.result})]}),e.failure_reason&&(0,i.jsxs)("div",{className:"mt-3",children:[i.jsx("span",{className:"text-red-400 text-sm",children:"失败原因:"}),i.jsx("div",{className:"text-red-300 text-sm mt-1 bg-red-500/10 rounded p-2",children:e.failure_reason})]}),e.db_record&&(0,i.jsxs)("div",{className:"mt-3",children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"数据库记录:"}),i.jsx("div",{className:"text-gray-300 text-sm mt-1 bg-white/5 rounded p-2",children:i.jsx("pre",{className:"text-xs overflow-x-auto",children:JSON.stringify(e.db_record,null,2)})})]})]})]},e.job_id)})})]})]}),i.jsx("div",{className:"p-6 border-t border-white/10 flex-shrink-0",children:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex space-x-2",children:[2===a&&i.jsx("button",{onClick:P.bind(null,"suspend"),className:"px-4 py-2 bg-yellow-500/20 text-yellow-300 hover:bg-yellow-500/30 rounded-lg transition-colors",style:{position:"relative",zIndex:1e3},children:"暂停任务"}),5===a&&i.jsx("button",{onClick:P.bind(null,"resume"),className:"px-4 py-2 bg-green-500/20 text-green-300 hover:bg-green-500/30 rounded-lg transition-colors",style:{position:"relative",zIndex:1e3},children:"重启任务"})]}),(0,i.jsxs)("div",{className:"flex space-x-3",children:[i.jsx("button",{onClick:()=>{k(),s?.()},className:"px-4 py-2 bg-blue-500/20 text-blue-300 hover:bg-blue-500/30 rounded-lg transition-colors",style:{position:"relative",zIndex:1e3},children:"刷新状态"}),i.jsx("button",{onClick:E,className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",style:{position:"relative",zIndex:1e3},children:"关闭"})]})]})})]})}):null}function sF({isOpen:e,onClose:t,callingTasks:r,onTasksUpdate:n,onRefreshTaskDetails:s}){let[a,o]=(0,c.useState)(!1),[l,d]=(0,c.useState)(null),[u,p]=(0,c.useState)(r),[h,x]=(0,c.useState)(!1);(0,c.useRef)(null),(0,c.useRef)({});let f=(0,c.useCallback)(async e=>{try{let t=await m.Md.queryTaskExecution(parseInt(e.id));if("success"===t.status){let r=t.data;console.log("任务执行情况:",r);let s=r.jobs_data||[],a=s.filter(e=>"Succeeded"===e.Status).length,i=s.filter(e=>"Scheduling"===e.Status).length,o=s.length,l=o>0&&a===o;console.log(`点击任务 ${e.id} 状态计算:`,{totalJobs:o,succeededJobs:a,schedulingJobs:i,isCompleted:l,originalTaskType:r.task_type});let c=r.task_type||(l?3:2),h={...e,status:l?"completed":"calling",task_type:c,total_jobs:o,updated_count:a,error_count:r.error_count};if(p(t=>t.map(t=>t.id===e.id?h:t)),n){let t=u.map(t=>t.id===e.id?h:t);n(t)}d(h)}else d(e);o(!0)}catch(t){console.error("查询任务执行情况失败:",t),d(e),o(!0)}},[u,n]),g=(0,c.useCallback)(()=>{t()},[t]),b=(0,c.useCallback)(async()=>{if(l)try{let e=await m.Md.getCallTaskDetails(l.id);"success"===e.status&&(console.log("任务详情已刷新:",e.data),s?.(l.id))}catch(e){console.error("刷新任务详情失败:",e)}},[l,s]),v=(0,c.useCallback)(async(e,r)=>{try{let s=await m.Md.suspendResumeTask(parseInt(e.id),r);if("success"===s.status){console.log(`${"suspend"===r?"暂停":"重启"}任务成功:`,s.data);let t={...e,task_type:s.data.task_type};if(p(r=>r.map(r=>r.id===e.id?t:r)),n){let r=u.map(r=>r.id===e.id?t:r);n(r)}}else{console.error(`${"suspend"===r?"暂停":"重启"}任务失败:`,s.message);try{let r=await m.Md.queryTaskExecution(parseInt(e.id));if("success"===r.status){let e=r.data;if(console.log("操作失败后查询任务状态:",e),2!==e.task_type&&5!==e.task_type){console.log("任务状态已变化，关闭弹窗"),t();return}}}catch(e){console.error("查询任务状态失败:",e)}}}catch(n){console.error(`${"suspend"===r?"暂停":"重启"}任务失败:`,n);try{let r=await m.Md.queryTaskExecution(parseInt(e.id));if("success"===r.status){let e=r.data;if(console.log("操作失败后查询任务状态:",e),2!==e.task_type&&5!==e.task_type){console.log("任务状态已变化，关闭弹窗"),t();return}}}catch(e){console.error("查询任务状态失败:",e)}}},[u,n,t]),w=(0,c.useMemo)(()=>{let e=u.filter(e=>2===e.task_type||3===e.task_type||5===e.task_type);return console.log("DEBUG - displayTasks:",e.length,"from total tasks:",u.length),e},[u]),y=(0,c.useMemo)(()=>{let e=u.filter(e=>2===e.task_type).length;return console.log("DEBUG - executingTasks:",e,"tasks:",u),e},[u]),j=(0,c.useMemo)(()=>{let e=u.filter(e=>3===e.task_type).length;return console.log("DEBUG - completedTasks:",e),e},[u]),N=(0,c.useMemo)(()=>{let e=u.reduce((e,t)=>e+(t.targetCount||0),0);return console.log("DEBUG - totalLeads:",e,"tasks with targetCount:",u.map(e=>({id:e.id,targetCount:e.targetCount}))),e},[u]),_=(0,c.useMemo)(()=>{let e=y+j;return 0===e?0:Math.round(j/e*100)},[y,j]);return e?(0,i.jsxs)(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-start justify-center z-[70] pt-4",onClick:g,children:(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl max-w-4xl w-full mx-4 h-[80vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/10 flex-shrink-0",children:[(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"外呼Agent监控"}),i.jsx("p",{className:"text-gray-300",children:"实时监控外呼Agent的工作状态和任务执行情况"})]}),i.jsx("button",{onClick:g,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-6 mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full mr-3"}),i.jsx("h3",{className:"text-lg font-semibold text-white",children:"外呼Agent状态"})]}),i.jsx("span",{className:"text-blue-300 text-sm font-medium",children:y>0?"工作中":"空闲中"})]}),y>0&&(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[i.jsx("span",{className:"text-gray-300",children:"总体进度"}),(0,i.jsxs)("span",{className:"text-blue-300 font-medium",children:[_,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 overflow-hidden",children:i.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${_}%`}})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,i.jsxs)("div",{className:"bg-white/5 rounded-lg p-3",children:[i.jsx("div",{className:"text-blue-400 font-bold text-lg",children:y}),i.jsx("div",{className:"text-gray-400 text-xs",children:"执行中任务"})]}),(0,i.jsxs)("div",{className:"bg-white/5 rounded-lg p-3",children:[i.jsx("div",{className:"text-green-400 font-bold text-lg",children:j}),i.jsx("div",{className:"text-gray-400 text-xs",children:"已完成任务"})]}),(0,i.jsxs)("div",{className:"bg-white/5 rounded-lg p-3",children:[i.jsx("div",{className:"text-purple-400 font-bold text-lg",children:N}),i.jsx("div",{className:"text-gray-400 text-xs",children:"总线索数"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"任务列表"}),0===w.length?(0,i.jsxs)("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-gray-400 mb-4",children:i.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),i.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"暂无外呼任务"}),i.jsx("p",{className:"text-gray-400",children:0===u.length?"当前没有任务":"当前没有执行中或已完成的外呼任务"}),(0,i.jsxs)("p",{className:"text-gray-500 text-xs mt-2",children:["调试信息: 总任务数 ",u.length,", 显示任务数 ",w.length]})]}):i.jsx("div",{className:"space-y-3",children:w.map(e=>(0,i.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 cursor-pointer hover:bg-white/10 transition-colors",onClick:()=>f(e),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full mr-2"}),i.jsx("h4",{className:"text-white font-medium",children:e.name})]}),i.jsx("div",{className:"flex items-center space-x-2",children:3===e.task_type?(0,i.jsxs)(i.Fragment,{children:[i.jsx("span",{className:"text-green-300 text-sm font-medium",children:"已完成"}),i.jsx("svg",{className:"w-4 h-4 text-green-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]}):2===e.task_type?(0,i.jsxs)(i.Fragment,{children:[i.jsx("span",{className:"text-blue-300 text-sm font-medium",children:"执行中"}),i.jsx("svg",{className:"w-4 h-4 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]}):5===e.task_type?(0,i.jsxs)(i.Fragment,{children:[i.jsx("span",{className:"text-yellow-300 text-sm font-medium",children:"已暂停"}),i.jsx("svg",{className:"w-4 h-4 text-yellow-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"})})]}):1===e.task_type?(0,i.jsxs)(i.Fragment,{children:[i.jsx("span",{className:"text-gray-300 text-sm font-medium",children:"已创建"}),i.jsx("svg",{className:"w-4 h-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})]}):(0,i.jsxs)(i.Fragment,{children:[i.jsx("span",{className:"text-red-300 text-sm font-medium",children:"未知状态"}),i.jsx("svg",{className:"w-4 h-4 text-red-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"目标线索:"}),i.jsx("span",{className:"text-white ml-2 font-medium",children:e.targetCount})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"创建时间:"}),i.jsx("span",{className:"text-white ml-2",children:e.createdAt})]})]}),void 0!==e.total_jobs&&(0,i.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm mt-2",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"总任务:"}),i.jsx("span",{className:"text-white ml-2",children:e.total_jobs})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"已完成:"}),i.jsx("span",{className:"text-green-300 ml-2",children:e.updated_count||0})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"进行中:"}),i.jsx("span",{className:"text-blue-300 ml-2",children:e.total_jobs-(e.updated_count||0)})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"错误数:"}),i.jsx("span",{className:`ml-2 ${e.error_count&&e.error_count>0?"text-red-300":"text-gray-300"}`,children:e.error_count||0})]})]}),(0,i.jsxs)("div",{className:"mt-3",children:[(0,i.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[i.jsx("span",{className:"text-gray-400",children:"任务进度"}),i.jsx("span",{className:"text-blue-300",children:3===e.task_type?"100%":2===e.task_type&&e.total_jobs&&void 0!==e.updated_count?`${Math.round(e.updated_count/e.total_jobs*100)}%`:2===e.task_type?"进行中":"0%"})]}),i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1.5 overflow-hidden",children:i.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${3===e.task_type?"bg-green-500":2===e.task_type?"bg-blue-500":"bg-gray-500"}`,style:{width:3===e.task_type?"100%":2===e.task_type&&e.total_jobs&&void 0!==e.updated_count?`${Math.round(e.updated_count/e.total_jobs*100)}%`:2===e.task_type?"50%":"0%"}})})]}),(0,i.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[i.jsx("div",{className:"text-xs text-blue-400",children:"点击查看电话拨打情况"}),(0,i.jsxs)("div",{className:"flex space-x-2",children:[2===e.task_type&&i.jsx("button",{onClick:t=>{t.stopPropagation(),v(e,"suspend")},className:"px-3 py-1 bg-yellow-500/20 text-yellow-300 hover:bg-yellow-500/30 rounded text-xs transition-colors",children:"暂停"}),5===e.task_type&&i.jsx("button",{onClick:t=>{t.stopPropagation(),v(e,"resume")},className:"px-3 py-1 bg-green-500/20 text-green-300 hover:bg-green-500/30 rounded text-xs transition-colors",children:"重启"})]})]})]},e.id))})]})]})}),i.jsx("div",{className:"p-6 border-t border-white/10 flex-shrink-0",children:i.jsx("div",{className:"flex justify-end space-x-3",children:i.jsx("button",{onClick:g,className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"关闭"})})})]})}),l&&i.jsx(sY,{isOpen:a,onClose:()=>{o(!1),d(null)},taskId:l.id,taskName:l.name,onRefresh:b,taskType:l.task_type,onTaskTypeChange:e=>{let t={...l,task_type:e};d(t),p(e=>e.map(e=>e.id===l.id?t:e)),n&&n(u.map(e=>e.id===l.id?t:e))}})]}):null}function sA({isOpen:e,onClose:t,selectedRecords:r}){let[n,s]=(0,c.useState)("同步任务-"),[a,o]=(0,c.useState)("random"),[l,d]=(0,c.useState)(""),[u,p]=(0,c.useState)(new Date),[h,m]=(0,c.useState)(new Date(Date.now()+6048e5)),[x,f]=(0,c.useState)(""),[g,b]=(0,c.useState)(!1),[v,w]=(0,c.useState)(0),[y,j]=(0,c.useState)(""),[N,_]=(0,c.useState)(!1),k=e=>{if(!e)return"-";try{return new Date(e).toLocaleString("zh-CN")}catch{return e}},D=()=>u&&h?u>=h?(f("结束时间必须晚于开始时间"),!1):(f(""),!0):(f("请设置开始时间和结束时间"),!1),S=async()=>{if(!n.trim()){alert("请输入任务名称");return}if("specific_person"===a&&!l){alert("请选择指定跟进人");return}if(D()){_(!0),b(!0),w(0),j("正在创建任务...");try{let e=["正在创建任务...","正在分配跟进人员...","正在同步线索数据...","正在上传到DCC系统...","正在验证数据完整性...","同步完成！"];for(let t=0;t<e.length;t++)j(e[t]),await new Promise(e=>setTimeout(e,800)),w((t+1)/e.length*100);b(!1)}catch(e){j("同步失败，请重试"),b(!1)}}},C=()=>{g||(s("同步任务-"),o("random"),d(""),p(new Date),m(new Date(Date.now()+6048e5)),f(""),w(0),j(""),_(!1),b(!1),t())};return e?(0,i.jsxs)(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[70]",onClick:C}),i.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/10 flex-shrink-0",children:[(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"同步到DCC"}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"将选中的线索同步到DCC系统"})]}),i.jsx("button",{onClick:C,disabled:g,className:"p-2 hover:bg-white/10 rounded-lg transition-colors disabled:opacity-50",children:i.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:N?(0,i.jsxs)("div",{className:"text-center py-8",children:[g?(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("svg",{className:"w-8 h-8 text-blue-400 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),i.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"正在同步到DCC"}),i.jsx("p",{className:"text-gray-300",children:"请稍候，正在处理您的请求..."})]}),(0,i.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("span",{className:"text-blue-400 font-medium",children:y}),(0,i.jsxs)("span",{className:"text-blue-400 text-sm",children:[Math.round(v),"%"]})]}),i.jsx("div",{className:"w-full bg-blue-500/20 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${v}%`}})})]})]}):(0,i.jsxs)("div",{className:"mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("svg",{className:"w-8 h-8 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),i.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"同步成功"}),i.jsx("p",{className:"text-gray-300",children:"请前去DCC系统查看数据"})]}),!g&&i.jsx("button",{onClick:C,className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-lg transition-colors",children:"确定"})]}):(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[i.jsx("h4",{className:"text-white font-medium mb-4",children:"同步设置"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"任务名称"}),i.jsx("input",{type:"text",value:n,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholder:"请输入任务名称"})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"分配方式"}),(0,i.jsxs)("select",{value:a,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50",children:[i.jsx("option",{value:"random",children:"随机分配"}),i.jsx("option",{value:"followup_person",children:"分配给线索跟进人"}),i.jsx("option",{value:"specific_person",children:"指定跟进人"})]})]}),"specific_person"===a&&(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"指定跟进人"}),(0,i.jsxs)("select",{value:l,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50",children:[i.jsx("option",{value:"",children:"请选择跟进人"}),[{id:"1",name:"张经理",department:"DCC经理"},{id:"2",name:"李专员",department:"电销专员"},{id:"3",name:"王专员",department:"电销专员"},{id:"4",name:"赵专员",department:"电销专员"},{id:"5",name:"钱专员",department:"电销专员"}].map(e=>(0,i.jsxs)("option",{value:e.id,children:[e.name," - ",e.department]},e.id))]})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"任务开始时间"}),i.jsx(sN,{selected:u,onChange:e=>{p(e),e&&h&&e>=h?f("结束时间必须晚于开始时间"):f("")},className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholderText:"选择开始时间",dateFormat:"yyyy-MM-dd HH:mm",showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"任务结束时间"}),i.jsx(sN,{selected:h,onChange:e=>{m(e),e&&u&&u>=e?f("结束时间必须晚于开始时间"):f("")},minDate:u||void 0,className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholderText:"选择结束时间",dateFormat:"yyyy-MM-dd HH:mm",showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15})]}),x&&i.jsx("div",{className:"md:col-span-2",children:(0,i.jsxs)("div",{className:"text-red-400 text-sm mt-2 flex items-center",children:[i.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),x]})})]})]}),(0,i.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[(0,i.jsxs)("h4",{className:"text-white font-medium mb-4",children:["线索列表 (",r.length,")"]}),i.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.jsx("div",{className:"space-y-3",children:r.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center space-x-4 p-3 bg-white/5 rounded-lg",children:[i.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-500/20 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-blue-400 text-xs font-medium",children:t+1})}),(0,i.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"姓名"}),i.jsx("div",{className:"text-white font-medium",children:e.leadName})]}),(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"手机号"}),i.jsx("div",{className:"text-white",children:e.phone})]}),(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"下次跟进时间"}),i.jsx("div",{className:"text-white",children:k(e.nextFollowTime)})]}),(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"备注"}),i.jsx("div",{className:"text-white",children:e.remark||"-"})]})]})]},e.id))})})]}),!g&&(0,i.jsxs)("div",{className:"flex justify-end space-x-3",children:[i.jsx("button",{onClick:C,className:"px-6 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors",children:"取消"}),i.jsx("button",{onClick:S,className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-lg transition-colors",children:"创建任务并同步到DCC"})]})]})})]})})]}):null}function sW({isOpen:e,onClose:t,selectedTaskId:r}){let[n,s]=(0,c.useState)([]),[a,o]=(0,c.useState)(null),[l,d]=(0,c.useState)(null),[u,p]=(0,c.useState)(!1),[h,m]=(0,c.useState)(null),[x,f]=(0,c.useState)("overview"),[g,b]=(0,c.useState)("all"),[v,w]=(0,c.useState)("all"),[y,j]=(0,c.useState)(null),[N,_]=(0,c.useState)(null),[k,D]=(0,c.useState)(new Set),[S,C]=(0,c.useState)(new Set),[M,T]=(0,c.useState)(!1),[E,P]=(0,c.useState)(!1),L=e=>{f("records"),b(e)},O=e=>{let t=new Set(S);t.has(e)?t.delete(e):t.add(e),C(t);let r=new Set(R.map(e=>e.id));T(t.size===r.size&&r.size>0)},$=e=>null===e?"待跟进":0===e?"无法判断":1===e?"有意向":2===e?"无意向":"未知",I=e=>null===e?"text-yellow-400 bg-yellow-500/20":0===e?"text-orange-400 bg-orange-500/20":1===e?"text-green-400 bg-green-500/20":2===e?"text-red-400 bg-red-500/20":"text-gray-400 bg-gray-500/20",R=n.filter(e=>{let t=!0;"pending"===g?t=null===e.isInterested:"unable_to_judge"===g?t=0===e.isInterested:"interested"===g?t=1===e.isInterested:"not_interested"===g&&(t=2===e.isInterested);let r=!0;if("has_next_follow"===v)r=!!e.nextFollowTime;else if("no_next_follow"===v)r=!e.nextFollowTime;else if("custom_range"===v){if(e.nextFollowTime)try{let t=new Date(e.nextFollowTime);r=y&&N?t>=y&&t<=N:y?t>=y:!N||t<=N}catch{r=!1}else r=!1}return t&&r}),Y=e=>{let t=new Set(k);t.has(e)?t.delete(e):t.add(e),D(t)},F=e=>{if(!e)return"0秒";let t=Math.floor(e/60),r=e%60;return t>0?`${t}分${r}秒`:`${r}秒`},A=e=>{if(!e)return"-";try{return new Date(e).toLocaleString("zh-CN")}catch{return e}},W=e=>e?Array.isArray(e)?i.jsx("div",{className:"space-y-3",children:e.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${"Robot"===e.Speaker?"bg-blue-500/20":"bg-green-500/20"}`,children:i.jsx("span",{className:`text-xs font-medium ${"Robot"===e.Speaker?"text-blue-400":"text-green-400"}`,children:"Robot"===e.Speaker?"AI":"客"})}),(0,i.jsxs)("div",{className:"flex-1",children:[i.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Robot"===e.Speaker?"AI助手":"客户"}),i.jsx("div",{className:"text-sm text-white bg-white/5 p-3 rounded-lg",children:e.Script||"无内容"}),e.Summary&&e.Summary.length>0&&(0,i.jsxs)("div",{className:"mt-2 p-2 bg-blue-500/10 border border-blue-500/20 rounded",children:[i.jsx("div",{className:"text-xs text-blue-400 mb-1",children:"对话摘要："}),e.Summary.map((e,t)=>(0,i.jsxs)("div",{className:"text-xs text-blue-300",children:[e.SummaryName,": ",e.Content]},t))]})]})]},t))}):"object"!=typeof e||Array.isArray(e)?i.jsx("div",{className:"text-sm text-white bg-white/5 p-3 rounded-lg",children:e}):i.jsx("div",{className:"space-y-3",children:Object.entries(e).map(([e,t],r)=>(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${e.includes("assistant")||e.includes("ai")?"bg-blue-500/20":"bg-green-500/20"}`,children:i.jsx("span",{className:`text-xs font-medium ${e.includes("assistant")||e.includes("ai")?"text-blue-400":"text-green-400"}`,children:e.includes("assistant")||e.includes("ai")?"AI":"客"})}),(0,i.jsxs)("div",{className:"flex-1",children:[i.jsx("div",{className:"text-xs text-gray-400 mb-1",children:e.includes("assistant")||e.includes("ai")?"AI助手":"客户"}),i.jsx("div",{className:"text-sm text-white bg-white/5 p-3 rounded-lg",children:"string"==typeof t?t:JSON.stringify(t)})]})]},r))}):null;return e?(0,i.jsxs)(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:t}),i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl w-full max-w-6xl h-[90vh] flex flex-col",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/10 flex-shrink-0",children:[(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-white",children:"跟进记录Agent"}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"任务执行情况和通话记录"})]}),i.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:i.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[u&&i.jsx("div",{className:"mb-6 p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-400"}),i.jsx("span",{className:"text-blue-400 ml-2",children:"正在加载任务数据..."})]})}),h&&i.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("svg",{className:"w-5 h-5 text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{className:"text-red-400",children:h})]})}),a&&(0,i.jsxs)("div",{className:"mb-6 p-4 bg-white/5 rounded-lg border border-white/10",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"text-white font-semibold text-lg",children:a.task_name}),(0,i.jsxs)("p",{className:"text-gray-400 text-sm",children:["创建时间：",a.create_time]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[2===a.task_type&&(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full mr-2 animate-pulse"}),i.jsx("span",{className:"text-blue-400 text-sm",children:"外呼进行中"})]}),i.jsx("span",{className:`px-3 py-1 rounded text-sm ${((e,t)=>{if(t)return"text-green-400 bg-green-500/20";switch(e){case 1:case 3:return"text-blue-400 bg-blue-500/20";case 2:return"text-yellow-400 bg-yellow-500/20";case 4:return"text-green-400 bg-green-500/20";default:return"text-gray-400 bg-gray-500/20"}})(a.task_type,a.is_completed)}`,children:((e,t)=>{if(t)return"已完成";switch(e){case 1:return"已创建";case 2:return"开始外呼";case 3:return"跟进中";case 4:return"跟进完成";default:return"未知状态"}})(a.task_type,a.is_completed)})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"线索数量："}),i.jsx("span",{className:"text-white",children:a.leads_count})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"任务状态："}),i.jsx("span",{className:"text-white",children:a.is_completed?"已完成":"进行中"})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-400",children:"外呼状态："}),i.jsx("span",{className:2===a.task_type?"text-blue-400":"text-green-400",children:2===a.task_type?"进行中":"已完成"})]})]})]}),i.jsx("div",{className:"mb-6",children:(0,i.jsxs)("div",{className:"flex space-x-1 bg-white/5 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>f("overview"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all ${"overview"===x?"bg-blue-500 text-white":"text-gray-400 hover:text-white"}`,children:"任务概览"}),i.jsx("button",{onClick:()=>f("records"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all ${"records"===x?"bg-blue-500 text-white":"text-gray-400 hover:text-white"}`,children:"执行记录"})]})}),"overview"===x&&i.jsx("div",{className:"space-y-6",children:l&&(0,i.jsxs)("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[i.jsx("h4",{className:"text-white font-medium mb-4",children:"执行情况详情"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,i.jsxs)("div",{className:"text-center p-3 bg-white/5 rounded-lg",children:[i.jsx("div",{className:"text-blue-400 font-semibold text-lg",children:l.total_leads}),i.jsx("div",{className:"text-gray-400 text-xs",children:"线索数量"})]}),(0,i.jsxs)("div",{className:"text-center p-3 bg-white/5 rounded-lg cursor-pointer hover:bg-white/10 transition-colors",onClick:()=>L("pending"),children:[i.jsx("div",{className:"text-yellow-400 font-semibold text-lg",children:l.pending_follow}),i.jsx("div",{className:"text-gray-400 text-xs",children:"待跟进数量"})]}),(0,i.jsxs)("div",{className:"text-center p-3 bg-white/5 rounded-lg cursor-pointer hover:bg-white/10 transition-colors",onClick:()=>L("unable_to_judge"),children:[i.jsx("div",{className:"text-orange-400 font-semibold text-lg",children:l.unable_to_judge}),i.jsx("div",{className:"text-gray-400 text-xs",children:"无法判断数量"})]}),(0,i.jsxs)("div",{className:"text-center p-3 bg-white/5 rounded-lg cursor-pointer hover:bg-white/10 transition-colors",onClick:()=>L("interested"),children:[i.jsx("div",{className:"text-green-400 font-semibold text-lg",children:l.interested}),i.jsx("div",{className:"text-gray-400 text-xs",children:"有意向数量"})]}),(0,i.jsxs)("div",{className:"text-center p-3 bg-white/5 rounded-lg cursor-pointer hover:bg-white/10 transition-colors",onClick:()=>L("not_interested"),children:[i.jsx("div",{className:"text-red-400 font-semibold text-lg",children:l.not_interested}),i.jsx("div",{className:"text-gray-400 text-xs",children:"无意向数量"})]})]})]})}),"records"===x&&(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"执行记录"}),(0,i.jsxs)("button",{onClick:()=>P(!0),disabled:0===S.size,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${S.size>0?"bg-blue-500 hover:bg-blue-600 text-white":"bg-white/10 text-gray-400 cursor-not-allowed"}`,children:["同步DCC (",S.size,")"]})]}),i.jsx("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"text-gray-400 text-sm whitespace-nowrap",children:"意向筛选："}),(0,i.jsxs)("select",{value:g,onChange:e=>b(e.target.value),className:"bg-white/5 border border-white/20 rounded px-3 py-1 text-sm text-white focus:outline-none focus:border-blue-400",children:[i.jsx("option",{value:"all",children:"全部"}),i.jsx("option",{value:"pending",children:"待跟进"}),i.jsx("option",{value:"unable_to_judge",children:"无法判断"}),i.jsx("option",{value:"interested",children:"有意向"}),i.jsx("option",{value:"not_interested",children:"无意向"})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"text-gray-400 text-sm whitespace-nowrap",children:"下次跟进："}),(0,i.jsxs)("select",{value:v,onChange:e=>w(e.target.value),className:"bg-white/5 border border-white/20 rounded px-3 py-1 text-sm text-white focus:outline-none focus:border-blue-400",children:[i.jsx("option",{value:"all",children:"全部"}),i.jsx("option",{value:"has_next_follow",children:"有下次跟进"}),i.jsx("option",{value:"no_next_follow",children:"无下次跟进"}),i.jsx("option",{value:"custom_range",children:"自定义区间"})]})]}),"custom_range"===v&&(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"text-gray-400 text-sm whitespace-nowrap",children:"时间区间："}),i.jsx(sN,{selected:y,onChange:e=>j(e),selectsStart:!0,startDate:y||void 0,endDate:N||void 0,className:"bg-white/5 border border-white/20 rounded px-3 py-1 text-sm text-white placeholder-gray-400 focus:outline-none focus:border-blue-400",placeholderText:"开始时间",dateFormat:"yyyy-MM-dd HH:mm",showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15}),i.jsx("span",{className:"text-gray-400 text-sm",children:"至"}),i.jsx(sN,{selected:N,onChange:e=>_(e),selectsEnd:!0,startDate:y||void 0,endDate:N||void 0,minDate:y||void 0,className:"bg-white/5 border border-white/20 rounded px-3 py-1 text-sm text-white placeholder-gray-400 focus:outline-none focus:border-blue-400",placeholderText:"结束时间",dateFormat:"yyyy-MM-dd HH:mm",showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15})]}),i.jsx("div",{className:"flex items-center space-x-2 ml-auto",children:(0,i.jsxs)("span",{className:"text-gray-400 text-sm",children:["筛选结果：",R.length,"/",n.length]})})]})}),R.length>0&&(0,i.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-white/5 rounded-lg",children:[(0,i.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:M,onChange:()=>{M?(C(new Set),T(!1)):(C(new Set(R.map(e=>e.id))),T(!0))},className:"w-4 h-4 text-blue-500 bg-white/10 border-white/20 rounded focus:ring-blue-400 focus:ring-2"}),i.jsx("span",{className:"text-white text-sm",children:"全选"})]}),(0,i.jsxs)("span",{className:"text-gray-400 text-sm",children:["已选择 ",S.size," 条记录"]})]}),0===R.length?(0,i.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[i.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),i.jsx("p",{children:"暂无符合条件的执行记录"})]}):i.jsx("div",{className:"space-y-4",children:R.map(e=>(0,i.jsxs)("div",{className:"bg-white/5 rounded-lg border border-white/10 overflow-hidden",children:[i.jsx("div",{className:"p-4",children:(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"flex-shrink-0 pt-1",children:i.jsx("input",{type:"checkbox",checked:S.has(e.id),onChange:()=>O(e.id),className:"w-4 h-4 text-blue-500 bg-white/10 border-white/20 rounded focus:ring-blue-400 focus:ring-2"})}),(0,i.jsxs)("div",{className:"flex-1 cursor-pointer",onClick:()=>Y(e.id),children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"姓名"}),i.jsx("div",{className:"text-white font-medium",children:e.leadName})]}),(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"手机号"}),i.jsx("div",{className:"text-white",children:e.phone})]}),(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"有无意向"}),i.jsx("span",{className:`px-2 py-1 rounded text-xs ${I(e.isInterested??null)}`,children:$(e.isInterested??null)})]}),1===e.isInterested&&(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"下次跟进时间"}),i.jsx("div",{className:"text-white text-sm",children:A(e.nextFollowTime)})]}),(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"备注"}),i.jsx("div",{className:"text-white text-sm",children:e.remark||"-"})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-white/10",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-400",children:[e.followupTime&&(0,i.jsxs)("span",{children:["执行时间：",e.followupTime]}),e.callDuration&&(0,i.jsxs)("span",{children:["通话时长：",F(e.callDuration)]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"text-xs text-gray-400",children:k.has(e.id)?"收起":"展开对话"}),i.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${k.has(e.id)?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})]})]})}),k.has(e.id)&&e.conversation&&i.jsx("div",{className:"px-4 pb-4 border-t border-white/10",children:(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsxs)("div",{className:"flex items-center mb-3",children:[i.jsx("svg",{className:"w-4 h-4 text-purple-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),i.jsx("span",{className:"text-purple-400 font-medium text-sm",children:"通话对话"})]}),W(e.conversation)]})})]},e.id))})]})]})]})}),i.jsx(sA,{isOpen:E,onClose:()=>P(!1),selectedRecords:R.filter(e=>S.has(e.id))})]}):null}function sH({isOpen:e,onClose:t,onTaskSelect:r}){let[n,s]=(0,c.useState)([]),[a,o]=(0,c.useState)(!1),[l,d]=(0,c.useState)(null),u=e=>{switch(e){case 1:return"已创建";case 2:return"外呼进行中";case 3:return"跟进中";case 4:return"跟进完成";default:return"未知状态"}},p=e=>{switch(e){case 1:case 3:return"text-blue-400 bg-blue-500/20";case 2:return"text-yellow-400 bg-yellow-500/20";case 4:return"text-green-400 bg-green-500/20";default:return"text-gray-400 bg-gray-500/20"}},h=e=>{r(e),t()};return(0,i.jsxs)(i.Fragment,{children:[e&&i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:t}),i.jsx("div",{className:`
        fixed inset-0 flex items-center justify-center z-50
        ${e?"opacity-100":"opacity-0 pointer-events-none"}
        transition-opacity duration-300
      `,children:(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-lg p-6 w-[500px] max-h-[600px] overflow-y-auto",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-white",children:"选择任务"}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"查看外呼进行中、已完成和跟进完成的任务"})]}),i.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:i.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a&&(0,i.jsxs)("div",{className:"flex items-center justify-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400"}),i.jsx("span",{className:"text-blue-400 ml-3",children:"正在加载任务列表..."})]}),l&&i.jsx("div",{className:"mb-4 p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("svg",{className:"w-5 h-5 text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{className:"text-red-400",children:l})]})}),!a&&!l&&i.jsx("div",{className:"space-y-3",children:0===n.length?(0,i.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[i.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),i.jsx("p",{children:"暂无相关任务"}),i.jsx("p",{className:"text-xs mt-2",children:"请等待任务开始执行后再查看"})]}):n.map(e=>(0,i.jsxs)("div",{onClick:()=>h(e),className:"p-4 bg-white/5 rounded-lg border border-white/10 hover:bg-white/10 cursor-pointer transition-colors",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,i.jsxs)("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-white font-medium",children:e.task_name}),(0,i.jsxs)("p",{className:"text-gray-400 text-sm",children:["创建时间：",new Date(e.create_time).toLocaleString()]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[2===e.task_type&&(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full mr-1 animate-pulse"}),i.jsx("span",{className:"text-blue-400 text-xs",children:"外呼中"})]}),i.jsx("span",{className:`px-2 py-1 rounded text-xs ${p(e.task_type)}`,children:u(e.task_type)})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,i.jsxs)("span",{className:"text-gray-400",children:["线索数量：",e.leads_count]}),i.jsx("span",{className:"text-blue-400 text-xs",children:"点击查看执行记录"})]})]},e.id))}),i.jsx("div",{className:"mt-6 flex justify-end",children:i.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"取消"})})]})})]})}let sB=`
  @keyframes robot-pulse {
    0%, 100% {
      transform: scale(1);
      box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
    }
    50% {
      transform: scale(1.05);
      box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
    }
  }

  @keyframes robot-glow {
    0%, 100% {
      opacity: 0.5;
      transform: scale(1);
    }
    50% {
      opacity: 1;
      transform: scale(1.1);
    }
  }

  .robot-working {
    animation: robot-pulse 2s ease-in-out infinite;
  }

  .robot-glow {
    animation: robot-glow 3s ease-in-out infinite;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
`;function sz(){(0,p.useRouter)();let{user:e,loading:t}=(0,h.a)(),[r,n]=(0,c.useState)([{id:"task",name:"任务Agent",description:"智能任务分配和管理，优化工作流程",icon:"\uD83D\uDCCB",status:"idle",progress:0,stats:{total:0,completed:0,current:0}},{id:"script",name:"话术生成Agent",description:"智能生成个性化话术，提升沟通效果",icon:"\uD83D\uDCAC",status:"idle",progress:0,stats:{total:0,completed:0,current:0}},{id:"calling",name:"外呼Agent",description:"智能外呼客户，自动语音交互",icon:"\uD83D\uDCDE",status:"idle",progress:0,stats:{total:0,completed:0,current:0}},{id:"followup",name:"跟进Agent",description:"监控进行中的线索和已完成的任务",icon:"\uD83D\uDCDD",status:"idle",progress:0,stats:{total:0,completed:0,current:0}}]),[s,a]=(0,c.useState)(null),[o,d]=(0,c.useState)(!1),[u,x]=(0,c.useState)(!1),[f,w]=(0,c.useState)(!1),[y,j]=(0,c.useState)(!1),[N,_]=(0,c.useState)(!1),[k,D]=(0,c.useState)(!1),[S,C]=(0,c.useState)(!1),[M,T]=(0,c.useState)(null),[E,P]=(0,c.useState)([]),[L,O]=(0,c.useState)([]),[$,I]=(0,c.useState)(!1),[R,Y]=(0,c.useState)(!1),[F,A]=(0,c.useState)(!1),[W,H]=(0,c.useState)([]),[B,z]=(0,c.useState)(null),[q,Q]=(0,c.useState)(!1),[V,K]=(0,c.useState)(!1),[U,G]=(0,c.useState)(null),[X,J]=(0,c.useState)(!1),Z=async e=>{try{let t=await m.Md.getCallTaskDetails(e);"success"===t.status&&(console.log("任务详情已刷新:",t.data),S&&M?.task_info?.id===parseInt(e)&&T(t.data))}catch(e){console.error("刷新任务详情失败:",e)}},ee=async()=>{try{let e=await m.Md.getCallTasksList();if("success"===e.status){let t=(e.data.tasks||[]).filter(e=>2===e.task_type||3===e.task_type||4===e.task_type).map(e=>({id:e.id.toString(),name:e.task_name,createdAt:new Date(e.create_time).toLocaleString(),conditions:[],targetCount:e.leads_count,filteredCount:e.leads_count,status:3===e.task_type||4===e.task_type?"completed":"calling",organization_id:e.organization_id,create_name:e.create_name,script_id:e.script_id,task_type:e.task_type,size_desc:e.size_desc}));H(t)}}catch(e){console.error("刷新任务列表失败:",e)}},et=async e=>{if(!R){alert("请先绑定DCC账号才能进行操作"),I(!0);return}if(a(e),"task"===e){x(!0);return}if("script"===e){try{let e=await m.Md.getScriptTasksList();if("success"===e.status){let t=(e.data||[]).map(e=>({id:e.id.toString(),name:e.task_name,createdAt:new Date(e.create_time).toLocaleString(),conditions:[],targetCount:e.leads_count,filteredCount:e.leads_count,status:"pending",organization_id:e.organization_id,create_name:e.create_name,script_id:e.script_id,task_type:e.task_type,size_desc:e.size_desc}));H(t),j(!0)}else console.error("获取话术生成任务列表失败:",e.message),alert("获取话术生成任务列表失败，请重试")}catch(e){console.error("获取话术生成任务列表失败:",e),alert("获取话术生成任务列表失败，请重试")}return}if("calling"===e){try{console.log("外呼Agent clicked, 开始获取任务列表...");let e=await m.Md.getCallTasksList();if("success"===e.status){let t=e.data||[],r=t.filter(e=>2===e.task_type||3===e.task_type);if(console.log("DEBUG - All tasks:",t),console.log("DEBUG - Filtered tasks (type 2 or 3):",r),0===r.length){alert("暂无外呼中或外呼完成的任务，请先发起任务并发起外呼");return}let n=r.map(e=>({id:e.id.toString(),name:e.task_name,createdAt:new Date(e.create_time).toLocaleString(),conditions:[],targetCount:e.leads_count,filteredCount:e.leads_count,status:3===e.task_type?"completed":"calling",organization_id:e.organization_id,create_name:e.create_name,script_id:e.script_id,task_type:e.task_type,size_desc:e.size_desc}));H(n),console.log("显示外呼Agent监控界面"),Q(!0)}else console.error("获取任务列表失败:",e.message),alert("获取任务列表失败，请重试")}catch(e){console.error("获取任务列表失败:",e),alert("获取任务列表失败，请重试")}return}if("followup"===e){try{let e=await m.Md.getCallTasksList();if("success"===e.status){let t=(e.data||[]).filter(e=>3===e.task_type||4===e.task_type);if(0===t.length){alert("暂无跟进中或跟进完成的任务，请等待任务进入跟进阶段");return}let r=t.map(e=>({id:e.id.toString(),name:e.task_name,createdAt:new Date(e.create_time).toLocaleString(),conditions:[],targetCount:e.leads_count,filteredCount:e.leads_count,status:4===e.task_type?"completed":"calling",organization_id:e.organization_id,create_name:e.create_name,script_id:e.script_id,task_type:e.task_type,size_desc:e.size_desc}));H(r),J(!0)}else console.error("获取任务列表失败:",e.message),alert("获取任务列表失败，请重试")}catch(e){console.error("获取任务列表失败:",e),alert("获取任务列表失败，请重试")}return}},er=e=>{switch(e){case"working":return"text-blue-400";case"error":return"text-red-400";default:return"text-gray-400"}},en=e=>({idle:"空闲",working:"工作中",error:"错误"})[e]||e;return t?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{className:"inline-flex items-center space-x-3 mb-4",children:[i.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),i.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"DCC 数字员工"}),i.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full animate-pulse delay-500"})]}),(0,i.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-400"}),i.jsx("span",{className:"text-gray-300 text-sm",children:t?"正在加载...":"正在验证登录状态..."})]})]})}):e?(0,i.jsxs)("div",{className:`jsx-${sB.__hash} min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900`,children:[i.jsx(l(),{id:sB.__hash,children:sB}),(0,i.jsxs)("div",{className:`jsx-${sB.__hash} fixed inset-0 overflow-hidden pointer-events-none`,children:[i.jsx("div",{className:`jsx-${sB.__hash} absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(120,119,198,0.1),transparent_50%)]`}),i.jsx("div",{className:`jsx-${sB.__hash} absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl animate-pulse`}),i.jsx("div",{className:`jsx-${sB.__hash} absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse delay-1000`})]}),(0,i.jsxs)("div",{className:`jsx-${sB.__hash} relative z-10`,children:[i.jsx(g,{}),i.jsx("main",{className:`jsx-${sB.__hash} pt-4 px-4 sm:px-6 lg:px-8 h-[calc(100vh-4rem)] overflow-y-auto`,children:(0,i.jsxs)("div",{className:`jsx-${sB.__hash} max-w-7xl mx-auto`,children:[i.jsx("div",{className:`jsx-${sB.__hash} mb-4 flex justify-between items-center`,children:(0,i.jsxs)("div",{className:`jsx-${sB.__hash}`,children:[i.jsx("h1",{className:`jsx-${sB.__hash} text-2xl font-bold text-white mb-1`,children:"Agent工作台"}),i.jsx("p",{className:`jsx-${sB.__hash} text-gray-300 text-sm`,children:R?"监控和管理您的智能Agent团队":"请先绑定DCC账号以开始使用"}),!R&&i.jsx("div",{className:`jsx-${sB.__hash} mt-2 p-2 bg-yellow-500/20 border border-yellow-500/30 rounded-lg`,children:(0,i.jsxs)("div",{className:`jsx-${sB.__hash} flex items-center`,children:[i.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:`jsx-${sB.__hash} w-4 h-4 text-yellow-400 mr-2`,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z",className:`jsx-${sB.__hash}`})}),i.jsx("span",{className:`jsx-${sB.__hash} text-yellow-200 text-xs`,children:"需要绑定DCC账号才能使用系统功能"})]})})]})}),i.jsx("div",{className:`jsx-${sB.__hash} grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4`,children:r.map(e=>i.jsx("div",{className:`jsx-${sB.__hash}`,children:(0,i.jsxs)("div",{onClick:()=>et(e.id),className:`jsx-${sB.__hash} 
                      relative group transition-all duration-500 transform
                      bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10 p-4
                      min-h-[280px] flex flex-col justify-between
                      ${R?"cursor-pointer hover:scale-105 hover:bg-white/10 hover:border-white/20 hover:shadow-2xl":"cursor-not-allowed opacity-60"}
                      ${s===e.id?"ring-2 ring-blue-500/50":""}
                      ${"calling"===e.id&&"working"===e.status?"robot-working":""}
                      ${"followup"===e.id&&"working"===e.status?"robot-working":""}
                    `,children:[("calling"===e.id||"followup"===e.id)&&"working"===e.status&&(0,i.jsxs)("div",{className:`jsx-${sB.__hash} absolute top-3 right-3`,children:[i.jsx("div",{className:`jsx-${sB.__hash} w-2 h-2 rounded-full animate-pulse ${"calling"===e.id?"bg-blue-400":"bg-green-400"}`}),i.jsx("div",{className:`jsx-${sB.__hash} absolute inset-0 w-2 h-2 rounded-full animate-ping opacity-75 ${"calling"===e.id?"bg-blue-400":"bg-green-400"}`})]}),i.jsx("div",{className:`jsx-${sB.__hash} text-center mb-3`,children:(0,i.jsxs)("div",{className:`jsx-${sB.__hash} 
                        relative inline-flex items-center justify-center w-12 h-12 rounded-xl
                        text-2xl mb-2 transition-all duration-300 group-hover:scale-110
                        ${"calling"===e.id&&"working"===e.status?"bg-gradient-to-br from-blue-500 to-purple-600 robot-glow":"followup"===e.id&&"working"===e.status?"bg-gradient-to-br from-green-500 to-blue-600 robot-glow":"bg-gradient-to-br from-gray-600 to-gray-700"}
                      `,children:[e.icon,"calling"===e.id&&"working"===e.status&&i.jsx("div",{className:`jsx-${sB.__hash} absolute inset-0 rounded-xl border-2 border-blue-400/50 animate-spin`}),"followup"===e.id&&"working"===e.status&&i.jsx("div",{className:`jsx-${sB.__hash} absolute inset-0 rounded-xl border-2 border-green-400/50 animate-spin`})]})}),(0,i.jsxs)("div",{className:`jsx-${sB.__hash} text-center flex-1 flex flex-col justify-between`,children:[(0,i.jsxs)("div",{className:`jsx-${sB.__hash}`,children:[i.jsx("h3",{className:`jsx-${sB.__hash} text-base font-semibold text-white mb-1`,children:e.name}),i.jsx("p",{className:`jsx-${sB.__hash} text-xs text-gray-300 mb-3 line-clamp-2`,children:e.description}),("calling"===e.id||"followup"===e.id)&&(0,i.jsxs)("div",{className:`jsx-${sB.__hash} flex items-center justify-center mb-3`,children:[i.jsx("div",{className:`jsx-${sB.__hash} w-1.5 h-1.5 rounded-full mr-1.5 ${er(e.status)}`}),i.jsx("span",{className:`jsx-${sB.__hash} text-xs ${er(e.status)}`,children:en(e.status)}),"working"===e.status&&i.jsx("div",{className:`jsx-${sB.__hash} ml-2 text-xs text-blue-400 animate-pulse`,children:"点击查看"})]})]}),(0,i.jsxs)("div",{className:`jsx-${sB.__hash} mt-auto`,children:[("calling"===e.id||"followup"===e.id||"script"===e.id)&&(0,i.jsxs)("div",{className:`jsx-${sB.__hash} grid grid-cols-3 gap-2 text-center mb-3`,children:["calling"===e.id&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:`jsx-${sB.__hash} text-center`,children:[i.jsx("div",{className:`jsx-${sB.__hash} text-blue-400 font-semibold text-sm`,children:e.stats.total}),i.jsx("div",{className:`jsx-${sB.__hash} text-gray-400 text-xs`,children:"总外呼任务"})]}),(0,i.jsxs)("div",{className:`jsx-${sB.__hash} text-center`,children:[i.jsx("div",{className:`jsx-${sB.__hash} text-green-400 font-semibold text-sm`,children:e.stats.completed}),i.jsx("div",{className:`jsx-${sB.__hash} text-gray-400 text-xs`,children:"外呼完成"})]}),(0,i.jsxs)("div",{className:`jsx-${sB.__hash} text-center`,children:[i.jsx("div",{className:`jsx-${sB.__hash} text-blue-400 font-semibold text-sm`,children:e.stats.current}),i.jsx("div",{className:`jsx-${sB.__hash} text-gray-400 text-xs`,children:"外呼中"})]})]}),"followup"===e.id&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:`jsx-${sB.__hash} text-center`,children:[i.jsx("div",{className:`jsx-${sB.__hash} text-blue-400 font-semibold text-sm`,children:e.stats.total}),i.jsx("div",{className:`jsx-${sB.__hash} text-gray-400 text-xs`,children:"总跟进任务"})]}),(0,i.jsxs)("div",{className:`jsx-${sB.__hash} text-center`,children:[i.jsx("div",{className:`jsx-${sB.__hash} text-green-400 font-semibold text-sm`,children:e.stats.completed}),i.jsx("div",{className:`jsx-${sB.__hash} text-gray-400 text-xs`,children:"跟进完成"})]}),(0,i.jsxs)("div",{className:`jsx-${sB.__hash} text-center`,children:[i.jsx("div",{className:`jsx-${sB.__hash} text-blue-400 font-semibold text-sm`,children:e.stats.current}),i.jsx("div",{className:`jsx-${sB.__hash} text-gray-400 text-xs`,children:"跟进中"})]})]}),"script"===e.id&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:`jsx-${sB.__hash} text-center`,children:[i.jsx("div",{className:`jsx-${sB.__hash} text-blue-400 font-semibold text-sm`,children:e.stats.total}),i.jsx("div",{className:`jsx-${sB.__hash} text-gray-400 text-xs`,children:"总任务"})]}),(0,i.jsxs)("div",{className:`jsx-${sB.__hash} text-center`,children:[i.jsx("div",{className:`jsx-${sB.__hash} text-green-400 font-semibold text-sm`,children:e.stats.completed}),i.jsx("div",{className:`jsx-${sB.__hash} text-gray-400 text-xs`,children:"已生成"})]}),(0,i.jsxs)("div",{className:`jsx-${sB.__hash} text-center`,children:[i.jsx("div",{className:`jsx-${sB.__hash} text-blue-400 font-semibold text-sm`,children:e.stats.current}),i.jsx("div",{className:`jsx-${sB.__hash} text-gray-400 text-xs`,children:"待生成"})]})]})]}),"task"===e.id&&i.jsx("div",{className:`jsx-${sB.__hash} h-[60px] flex items-center justify-center`,children:(0,i.jsxs)("div",{className:`jsx-${sB.__hash} text-center`,children:[i.jsx("div",{className:`jsx-${sB.__hash} text-gray-400 text-xs`,children:"任务管理"}),i.jsx("div",{className:`jsx-${sB.__hash} text-gray-500 text-xs mt-1`,children:"智能分配"})]})}),"working"!==e.status&&i.jsx("div",{className:`jsx-${sB.__hash} text-xs text-gray-400 mt-2 text-center`,children:R?"task"===e.id?"点击创建任务":"script"===e.id?"点击生成话术":"calling"===e.id?"点击查看外呼任务":"followup"===e.id?"点击查看跟进记录":"等待外呼活动开始":"请先绑定DCC账号"})]})]}),i.jsx("div",{className:`jsx-${sB.__hash} absolute inset-0 rounded-2xl bg-gradient-to-r from-blue-500/0 to-purple-500/0 opacity-0 group-hover:opacity-10 transition-opacity duration-300`}),i.jsx("div",{className:`jsx-${sB.__hash} absolute inset-0 rounded-2xl bg-blue-500/0 group-active:bg-blue-500/20 transition-all duration-150`})]})},e.id))})]})})]}),i.jsx(b,{isOpen:o,onClose:()=>d(!1),records:L,currentTasks:E}),i.jsx(v,{isOpen:$,onClose:()=>I(!1),onBindSuccess:()=>Y(!0)}),i.jsx(sC,{isOpen:f,onClose:()=>w(!1),tasks:W,onViewTaskDetails:e=>{T(e),C(!0)}}),i.jsx(sT,{isOpen:y,onClose:()=>j(!1),onTaskSelect:e=>{z(e),j(!1),D(!0)},tasks:W}),i.jsx(sO,{isOpen:k,onClose:()=>D(!1),selectedTask:B,onConfigureScript:e=>{D(!1),_(!0)},onStartCalling:e=>{console.log("开始外呼任务:",e)},onOutboundCallSuccess:ee}),i.jsx(sP,{isOpen:N,onClose:()=>_(!1),selectedTask:B,onBackToTaskDetail:()=>{_(!1),D(!0)}}),i.jsx(sI,{isOpen:S,onClose:()=>C(!1),taskInfo:M?.task_info,taskLeads:M?.task_details||[],onRefresh:()=>{M?.task_info?.id&&Z(M.task_info.id.toString())}}),i.jsx(sD,{isOpen:u,onClose:()=>x(!1),onTaskCreated:e=>{console.log("任务创建成功:",e),x(!1)}}),i.jsx(sF,{isOpen:q,onClose:()=>Q(!1),callingTasks:W,onTasksUpdate:e=>{H(t=>{let r=[...t];return e.forEach(e=>{let t=r.findIndex(t=>t.id===e.id);-1!==t&&(r[t]=e)}),r})},onRefreshTaskDetails:Z}),i.jsx(sW,{isOpen:V,onClose:()=>K(!1),selectedTaskId:U?.id}),i.jsx(sH,{isOpen:X,onClose:()=>J(!1),onTaskSelect:e=>{G(e),K(!0)}})]}):null}},5480:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(8570).createProxy)(String.raw`/Users/wedo/Documents/product/DCC数字员工/V1.0/dcc-digital-employee/src/app/page.tsx#default`)},2094:()=>{},435:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[531,395],()=>r(3240));module.exports=n})();